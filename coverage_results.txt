============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0
rootdir: /home/sneakyfox/TOOLBOX/py-wallet-toolbox
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collected 3480 items

tests/abi/test_serializer.py ........................................... [  1%]
.........                                                                [  1%]
tests/authentication/test_authentication_coverage.py ...........         [  1%]
tests/brc29/test_brc29_address.py .............................          [  2%]
tests/brc29/test_brc29_template.py .............................         [  3%]
tests/certificates/test_certificate_life_cycle.py s                      [  3%]
tests/chaintracker/test_chaintracks_coverage.py ...........              [  3%]
tests/chaintracks/test_chain_tracker.py ..                               [  3%]
tests/chaintracks/test_chaintracks.py ..                                 [  3%]
tests/chaintracks/test_client_api.py ..........                          [  4%]
tests/chaintracks/test_e2e.py ...ss.                                     [  4%]
tests/chaintracks/test_fetch.py ssss                                     [  4%]
tests/chaintracks/test_service_client.py ss                              [  4%]
tests/constants/test_constants_coverage.py ...............               [  5%]
tests/entities/test_entities_coverage.py ................                [  5%]
tests/errors/test_action_error.py .......                                [  5%]
tests/errors/test_errors_coverage.py ................................... [  6%]
...................                                                      [  7%]
tests/integration/test_bulk_file_data_manager.py ss                      [  7%]
tests/integration/test_bulk_ingestor_cdn_babbage.py ss                   [  7%]
tests/integration/test_local_kv_store.py ....                            [  7%]
tests/integration/test_privileged_key_manager.py ....................... [  8%]
                                                                         [  8%]
tests/integration/test_single_writer_multi_reader_lock.py .              [  8%]
tests/manager/test_managers_expanded_coverage.py ..................      [  8%]
tests/manager/test_simple_manager_coverage.py ...............            [  9%]
tests/models/test_models_coverage.py ..............                      [  9%]
tests/monitor/test_live_ingestor_whats_on_chain_poll.py s                [  9%]
tests/monitor/test_monitor.py s.......                                   [  9%]
tests/monitor/test_tasks.py ...............................              [ 10%]
tests/permissions/test_permissions_coverage.py ............              [ 10%]
tests/permissions/test_permissions_protocols_coverage.py ............... [ 11%]
...............                                                          [ 11%]
tests/permissions/test_wallet_permissions_manager_callbacks.py .......ss [ 12%]
                                                                         [ 12%]
tests/permissions/test_wallet_permissions_manager_checks.py ............ [ 12%]
.............                                                            [ 12%]
tests/permissions/test_wallet_permissions_manager_encryption.py ........ [ 13%]
                                                                         [ 13%]
tests/permissions/test_wallet_permissions_manager_flows.py .....s.       [ 13%]
tests/permissions/test_wallet_permissions_manager_initialization.py .... [ 13%]
.....                                                                    [ 13%]
tests/permissions/test_wallet_permissions_manager_missing_coverage.py .. [ 13%]
...........                                                              [ 13%]
tests/permissions/test_wallet_permissions_manager_proxying.py .......... [ 14%]
.....................                                                    [ 14%]
tests/permissions/test_wallet_permissions_manager_tokens.py ssssssssssss [ 15%]
                                                                         [ 15%]
tests/rpc/test_json_rpc_client_coverage.py .....................         [ 15%]
tests/rpc/test_json_rpc_server_coverage.py .....................         [ 16%]
tests/services/test_arc_provider_coverage.py .......                     [ 16%]
tests/services/test_arc_services.py ..................                   [ 17%]
tests/services/test_bitails_provider_coverage.py ......                  [ 17%]
tests/services/test_cache_manager_coverage.py ....................       [ 17%]
tests/services/test_exchange_rates.py s.............                     [ 18%]
tests/services/test_get_chain_tracker.py ................                [ 18%]
tests/services/test_get_merkle_path.py s..............                   [ 19%]
tests/services/test_get_raw_tx.py ...............                        [ 19%]
tests/services/test_get_script_history_min.py .................          [ 20%]
tests/services/test_get_utxo_status_min.py ..................            [ 20%]
tests/services/test_local_services_hash_and_locktime.py ................ [ 20%]
...........                                                              [ 21%]
tests/services/test_post_beef.py ....................                    [ 21%]
tests/services/test_post_beef_array_min.py ................              [ 22%]
tests/services/test_service_collection_coverage.py .............         [ 22%]
tests/services/test_service_queue.py .......                             [ 22%]
tests/services/test_services.py sssssssssssssssss                        [ 23%]
tests/services/test_services_coverage.py .......s..                      [ 23%]
tests/services/test_services_expanded_coverage.py ...ssssssssssssssss..s [ 24%]
...                                                                      [ 24%]
tests/services/test_services_methods.py ................................ [ 25%]
.................................                                        [ 26%]
tests/services/test_transaction_status.py .................              [ 26%]
tests/services/test_verify_beef.py s..............                       [ 27%]
tests/services/test_wallet_services_coverage.py ............             [ 27%]
tests/services/test_whats_on_chain.py .............................      [ 28%]
tests/services/test_whatsonchain_provider_coverage.py ........           [ 28%]
tests/signer/test_methods_unit.py ..ss..s.s.s...s...                     [ 29%]
tests/signer/test_signer_methods_coverage.py ........................... [ 29%]
.....................                                                    [ 30%]
tests/signer/test_signer_methods_expanded.py ........................... [ 31%]
                                                                         [ 31%]
tests/signer/test_signer_methods_missing_coverage.py .........           [ 31%]
tests/storage/entities/test_certificate.py .....                         [ 31%]
tests/storage/entities/test_certificate_field.py .....                   [ 31%]
tests/storage/entities/test_commission.py .....                          [ 31%]
tests/storage/entities/test_output.py ......                             [ 32%]
tests/storage/entities/test_output_basket.py .....                       [ 32%]
tests/storage/entities/test_output_tag.py ........                       [ 32%]
tests/storage/entities/test_output_tag_map.py .....                      [ 32%]
tests/storage/entities/test_proven_tx.py ...........                     [ 32%]
tests/storage/entities/test_proven_tx_req.py .............               [ 33%]
tests/storage/entities/test_stamp_log.py .......                         [ 33%]
tests/storage/entities/test_sync_state.py ..........                     [ 33%]
tests/storage/entities/test_transaction.py .......................       [ 34%]
tests/storage/entities/test_tx_label.py ......                           [ 34%]
tests/storage/entities/test_tx_label_map.py .............                [ 35%]
tests/storage/entities/test_users.py ...........s.s.                     [ 35%]
tests/storage/test_advanced_operations.py .....                          [ 35%]
tests/storage/test_count.py ...............                              [ 36%]
tests/storage/test_create_action.py ...xxx.                              [ 36%]
tests/storage/test_crud_accessors.py ......                              [ 36%]
tests/storage/test_crud_conditions_coverage.py ......................... [ 37%]
........................                                                 [ 37%]
tests/storage/test_find.py ............                                  [ 38%]
tests/storage/test_find_legacy.py ...............                        [ 38%]
tests/storage/test_insert.py ...............                             [ 39%]
tests/storage/test_provider_high_impact.py ..........................    [ 39%]
tests/storage/test_provider_methods.py ........................          [ 40%]
tests/storage/test_provider_minimal.py ..............                    [ 40%]
tests/storage/test_specifications_coverage.py .......................... [ 41%]
........................................................................ [ 43%]
....................................................                     [ 45%]
tests/storage/test_storage_entities_coverage.py ...FFFFFFFFFFF.FFFFF.FFF [ 45%]
FFFFFFFFFFFFFFFF.FFFF                                                    [ 46%]
tests/storage/test_storage_methods_coverage.py ......................... [ 47%]
...................................................................      [ 49%]
tests/storage/test_storage_methods_expanded.py ......................... [ 49%]
...                                                                      [ 49%]
tests/storage/test_storage_methods_high_impact_coverage.py .FFFFFFFFFFFF [ 50%]
FFFFFFFFFFFFFFFFF.FFFFFFF                                                [ 51%]
tests/storage/test_storage_provider_coverage.py ........................ [ 51%]
........................................................................ [ 53%]
...................................                                      [ 54%]
tests/storage/test_storage_provider_missing_coverage.py ................ [ 55%]
...................                                                      [ 55%]
tests/storage/test_sync_processor.py .......                             [ 55%]
tests/storage/test_update.py ..............                              [ 56%]
tests/storage/test_update_advanced.py ................                   [ 56%]
tests/test_edge_cases.py ...........                                     [ 57%]
tests/test_swmr_lock_coverage.py ...........                             [ 57%]
tests/unit/test_errors.py ....                                           [ 57%]
tests/unit/test_utility_arrays_dates.py ............                     [ 57%]
tests/unit/test_utility_helpers.py .........................             [ 58%]
tests/unit/test_wallet_constructor.py .                                  [ 58%]
tests/unit/test_wallet_getheaderforheight.py .......                     [ 58%]
tests/unit/test_wallet_getheight.py ...                                  [ 58%]
tests/unit/test_wallet_getknowntxids.py .....                            [ 59%]
tests/unit/test_wallet_getnetwork.py ..                                  [ 59%]
tests/unit/test_wallet_getversion.py .                                   [ 59%]
tests/unit/test_wallet_isauthenticated.py .                              [ 59%]
tests/unit/test_wallet_waitforauthentication.py .                        [ 59%]
tests/universal/test_abortaction.py x                                    [ 59%]
tests/universal/test_acquirecertificate.py X.x.                          [ 59%]
tests/universal/test_createaction.py ....                                [ 59%]
tests/universal/test_createhmac.py .                                     [ 59%]
tests/universal/test_createsignature.py ..                               [ 59%]
tests/universal/test_decrypt.py .                                        [ 59%]
tests/universal/test_discoverbyattributes.py .                           [ 59%]
tests/universal/test_discoverbyidentitykey.py .                          [ 59%]
tests/universal/test_encrypt.py .                                        [ 59%]
tests/universal/test_encrypt_min.py ..                                   [ 59%]
tests/universal/test_getheaderforheight.py .                             [ 59%]
tests/universal/test_getheight.py .                                      [ 59%]
tests/universal/test_getnetwork.py ..                                    [ 59%]
tests/universal/test_getpublickey.py ..                                  [ 59%]
tests/universal/test_getversion.py ..                                    [ 60%]
tests/universal/test_hmac_min.py ..                                      [ 60%]
tests/universal/test_internalizeaction.py s                              [ 60%]
tests/universal/test_isauthenticated.py .                                [ 60%]
tests/universal/test_listactions.py .                                    [ 60%]
tests/universal/test_listcertificates.py .                               [ 60%]
tests/universal/test_listoutputs.py .                                    [ 60%]
tests/universal/test_provecertificate.py .                               [ 60%]
tests/universal/test_relinquishcertificate.py .                          [ 60%]
tests/universal/test_relinquishoutput.py s                               [ 60%]
tests/universal/test_revealcounterpartykeylinkage.py .                   [ 60%]
tests/universal/test_revealspecifickeylinkage.py .                       [ 60%]
tests/universal/test_signaction.py s                                     [ 60%]
tests/universal/test_signature_min.py ...                                [ 60%]
tests/universal/test_verifyhmac.py .                                     [ 60%]
tests/universal/test_verifysignature.py .                                [ 60%]
tests/universal/test_waitforauthentication.py .                          [ 60%]
tests/utils/satoshi/test_satoshi.py ........................             [ 61%]
tests/utils/test_address_coverage.py ............                        [ 61%]
tests/utils/test_aggregate_results_complete.py ......................... [ 62%]
                                                                         [ 62%]
tests/utils/test_aggregate_results_coverage.py ..................        [ 62%]
tests/utils/test_beef_utils_coverage.py ........                         [ 63%]
tests/utils/test_bitrails.py ..                                          [ 63%]
tests/utils/test_buffer_utils_complete.py .............................. [ 63%]
.........                                                                [ 64%]
tests/utils/test_change_distribution.py ...                              [ 64%]
tests/utils/test_config_complete.py .................................... [ 65%]
........                                                                 [ 65%]
tests/utils/test_config_coverage.py ...........................          [ 66%]
tests/utils/test_contains_utxo.py .                                      [ 66%]
tests/utils/test_encoding_coverage.py .............                      [ 66%]
tests/utils/test_extract_raw_txs_coverage.py ...................         [ 67%]
tests/utils/test_format_utils_coverage.py .............                  [ 67%]
tests/utils/test_format_utils_expanded_coverage.py ..................... [ 68%]
...................                                                      [ 68%]
tests/utils/test_generate_change_sdk.py .................                [ 69%]
tests/utils/test_hash_utils_coverage.py ...........                      [ 69%]
tests/utils/test_height_range.py .....                                   [ 69%]
tests/utils/test_hex_utils_coverage.py ...........                       [ 70%]
tests/utils/test_identity_utils_coverage.py ..................           [ 70%]
tests/utils/test_merkle_path_coverage.py .........                       [ 70%]
tests/utils/test_merkle_path_utils_complete.py ......................... [ 71%]
.....                                                                    [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py ................... [ 72%]
............                                                             [ 72%]
tests/utils/test_proof_for_merkle_path.py .                              [ 72%]
tests/utils/test_pushdrop.py s                                           [ 72%]
tests/utils/test_random_utils_complete.py .............................. [ 73%]
.........................................                                [ 74%]
tests/utils/test_randomizer.py ..........                                [ 75%]
tests/utils/test_reader_uint8array_complete.py ......................... [ 75%]
.......                                                                  [ 75%]
tests/utils/test_reader_uint8array_coverage.py ........................  [ 76%]
tests/utils/test_satoshi_complete.py ..................................  [ 77%]
tests/utils/test_satoshi_coverage.py .................................   [ 78%]
tests/utils/test_script_hash.py ..                                       [ 78%]
tests/utils/test_script_utils_coverage.py ..........                     [ 78%]
tests/utils/test_serialization_coverage.py .............                 [ 79%]
tests/utils/test_transaction_id_coverage.py ........                     [ 79%]
tests/utils/test_tx_size.py .....                                        [ 79%]
tests/utils/test_tx_size_complete.py ..........................          [ 80%]
tests/utils/test_tx_size_coverage.py .....................               [ 80%]
tests/utils/test_utility_helpers_no_buffer.py ....                       [ 81%]
tests/utils/test_validation_coverage.py ................................ [ 82%]
.                                                                        [ 82%]
tests/utils/test_varint_coverage.py ...........                          [ 82%]
tests/utils/validation/test_validate_abort_action_args.py ....           [ 82%]
tests/utils/validation/test_validate_basket_config.py ....               [ 82%]
tests/utils/validation/test_validate_create_action_args.py ....          [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py ... [ 82%]
.....                                                                    [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py .......  [ 83%]
tests/utils/validation/test_validate_list_actions_args.py ........       [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py .......   [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py ......         [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py .......   [ 83%]
tests/utils/validation/test_validate_originator.py ...                   [ 84%]
tests/utils/validation/test_validate_process_action_args.py ......       [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py .... [ 84%]
..                                                                       [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py ........  [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py .......  [ 84%]
tests/wallet/test_abort_action.py .............                          [ 85%]
tests/wallet/test_certificates.py ...................................... [ 86%]
..............................                                           [ 87%]
tests/wallet/test_crypto_methods.py ...............................      [ 88%]
tests/wallet/test_hmac_signature.py ................................     [ 88%]
tests/wallet/test_internalize_action.py ...s...............              [ 89%]
tests/wallet/test_list_actions.py .......................                [ 90%]
tests/wallet/test_list_certificates.py .ssss........................     [ 90%]
tests/wallet/test_list_outputs.py ...............................        [ 91%]
tests/wallet/test_misc_methods.py .....................................  [ 92%]
tests/wallet/test_relinquish_output.py .......................           [ 93%]
tests/wallet/test_sign_process_action.py .ss.........s.ss.............   [ 94%]
tests/wallet/test_sync.py ..........................                     [ 95%]
tests/wallet/test_wallet_coverage.py ................................... [ 96%]
.........................                                                [ 96%]
tests/wallet/test_wallet_create_action.py .......................        [ 97%]
tests/wallet/test_wallet_expanded_coverage.py .......................... [ 98%]
.......                                                                  [ 98%]
tests/wallet/test_wallet_final_coverage.py FFFFFFFFFFFFFFFFFFFFFFF       [ 99%]
tests/wallet/test_wallet_high_impact_coverage.py ....................    [ 99%]
tests/wallet/test_wallet_missing_coverage.py .........                   [100%]

=================================== FAILURES ===================================
______________ TestEntityCoverage.test_certificate_to_api_method _______________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca243800>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 123211), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_certificate_to_api_method(self, sample_api_objects) -> None:
        """Test Certificate.to_api() method (line 404)."""
        cert = Certificate(sample_api_objects["certificate"])
        api_result = cert.to_api()
    
        assert "certificateId" in api_result
        assert "userId" in api_result
        assert "type" in api_result
        assert "subject" in api_result
>       assert "fields" in api_result
E       AssertionError: assert 'fields' in {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 123203), 'isDeleted': False, ...}

tests/storage/test_storage_entities_coverage.py:221: AssertionError
________ TestEntityCoverage.test_certificate_field_constructor_defaults ________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242f30>

    def test_certificate_field_constructor_defaults(self) -> None:
        """Test CertificateField constructor defaults (lines 465-473)."""
        field = CertificateField()
    
>       assert field.field_id == 0
               ^^^^^^^^^^^^^^
E       AttributeError: 'CertificateField' object has no attribute 'field_id'

tests/storage/test_storage_entities_coverage.py:232: AttributeError
__________ TestEntityCoverage.test_output_constructor_with_api_object __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2427e0>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 159271), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_output_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test Output constructor with API object (line 605)."""
        output = Output(sample_api_objects["output"])
    
        assert output.output_id == 303
        assert output.transaction_id == 202
        assert output.vout == 0
        assert output.satoshis == 100000
        assert output.locking_script == [118, 169, 20, 255, 255, 255, 255, 136, 172]
        assert output.spent_by is None
>       assert output.spent_at is None
               ^^^^^^^^^^^^^^^
E       AttributeError: 'Output' object has no attribute 'spent_at'. Did you mean: 'spent_by'?

tests/storage/test_storage_entities_coverage.py:249: AttributeError
_________ TestEntityCoverage.test_output_basket_merge_new_raises_error _________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242240>

    def test_output_basket_merge_new_raises_error(self) -> None:
        """Test OutputBasket.merge_new() raises error (line 719)."""
        basket = OutputBasket()
    
        with pytest.raises(NotImplementedError):
>           basket.merge_new({})
E           TypeError: OutputBasket.merge_new() missing 1 required positional argument: '_user_id'

tests/storage/test_storage_entities_coverage.py:257: TypeError
_______________ TestEntityCoverage.test_output_tag_to_api_method _______________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2425d0>

    def test_output_tag_to_api_method(self) -> None:
        """Test OutputTag.to_api() method (line 738)."""
        tag = OutputTag()
        api_result = tag.to_api()
    
>       assert "tagId" in api_result
E       AssertionError: assert 'tagId' in {'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 188580), 'isDeleted': False, 'outputTagId': 0, 'tag': '', ...}

tests/storage/test_storage_entities_coverage.py:264: AssertionError
___________ TestEntityCoverage.test_output_tag_constructor_defaults ____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242180>

    def test_output_tag_constructor_defaults(self) -> None:
        """Test OutputTag constructor defaults (lines 741, 746)."""
        tag = OutputTag()
    
>       assert tag.tag_id == 0
               ^^^^^^^^^^
E       AttributeError: 'OutputTag' object has no attribute 'tag_id'

tests/storage/test_storage_entities_coverage.py:274: AttributeError
_____________ TestEntityCoverage.test_output_tag_map_to_api_method _____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2418b0>

    def test_output_tag_map_to_api_method(self) -> None:
        """Test OutputTagMap.to_api() method (line 763)."""
        tag_map = OutputTagMap()
        api_result = tag_map.to_api()
    
>       assert "mapId" in api_result
E       AssertionError: assert 'mapId' in {'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 220071), 'isDeleted': False, 'outputId': 0, 'outputTagId': 0, ...}

tests/storage/test_storage_entities_coverage.py:285: AssertionError
________ TestEntityCoverage.test_proven_tx_constructor_with_api_object _________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca241e20>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 235591), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_proven_tx_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test ProvenTx constructor with API object (line 788)."""
        proven_tx = ProvenTx(sample_api_objects["proven_tx"])
    
        assert proven_tx.proven_tx_id == 707
        assert proven_tx.txid == "a" * 64
>       assert proven_tx.user_id == 123
               ^^^^^^^^^^^^^^^^^
E       AttributeError: 'ProvenTx' object has no attribute 'user_id'

tests/storage/test_storage_entities_coverage.py:297: AttributeError
______ TestEntityCoverage.test_proven_tx_req_constructor_with_api_object _______

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2414c0>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 253816), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_proven_tx_req_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test ProvenTxReq constructor with API object (lines 819-829)."""
        req = ProvenTxReq(sample_api_objects["proven_tx_req"])
    
>       assert req.req_id == 808
               ^^^^^^^^^^
E       AttributeError: 'ProvenTxReq' object has no attribute 'req_id'

tests/storage/test_storage_entities_coverage.py:307: AttributeError
________ TestEntityCoverage.test_sync_state_constructor_with_api_object ________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240c20>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 270739), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_sync_state_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test SyncState constructor with API object (line 897)."""
        state = SyncState(sample_api_objects["sync_state"])
    
>       assert state.state_id == 1010
               ^^^^^^^^^^^^^^
E       AttributeError: 'SyncState' object has no attribute 'state_id'

tests/storage/test_storage_entities_coverage.py:319: AttributeError
_______ TestEntityCoverage.test_transaction_constructor_with_api_object ________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240d40>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 289474), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_transaction_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test Transaction constructor with API object (line 913)."""
        tx = Transaction(sample_api_objects["transaction"])
    
        assert tx.transaction_id == 202
        assert tx.user_id == 123
        assert tx.txid == "d" * 64
>       assert tx.raw_tx == bytes([9, 10, 11, 12])
E       AssertionError: assert None == b'\t\n\x0b\x0c'
E        +  where None = <bsv_wallet_toolbox.storage.entities.Transaction object at 0x7ff79dd3f380>.raw_tx
E        +  and   b'\t\n\x0b\x0c' = bytes([9, 10, 11, 12])

tests/storage/test_storage_entities_coverage.py:333: AssertionError
_________ TestEntityCoverage.test_tx_label_constructor_with_api_object _________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240230>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 307806), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_tx_label_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test TxLabel constructor with API object (line 928)."""
        label = TxLabel(sample_api_objects["tx_label"])
    
>       assert label.label_id == 1111
               ^^^^^^^^^^^^^^
E       AttributeError: 'TxLabel' object has no attribute 'label_id'. Did you mean: 'tx_label_id'?

tests/storage/test_storage_entities_coverage.py:353: AttributeError
_______ TestEntityCoverage.test_tx_label_map_constructor_with_api_object _______

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242690>
sample_api_objects = {'certificate': {'certificateId': 456, 'certifier': 'test_certifier', 'createdAt': datetime.datetime(2025, 12, 5, 11, ...time(2025, 12, 5, 11, 58, 58, 325829), 'lockingScript': [118, 169, 20, 255, 255, 255, ...], 'outputId': 303, ...}, ...}

    def test_tx_label_map_constructor_with_api_object(self, sample_api_objects) -> None:
        """Test TxLabelMap constructor with API object (line 939)."""
        label_map = TxLabelMap(sample_api_objects["tx_label_map"])
    
>       assert label_map.map_id == 1212
               ^^^^^^^^^^^^^^^^
E       AttributeError: 'TxLabelMap' object has no attribute 'map_id'

tests/storage/test_storage_entities_coverage.py:363: AttributeError
__________ TestEntityCoverage.test_certificate_merge_existing_method ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240aa0>

    def test_certificate_merge_existing_method(self) -> None:
        """Test Certificate.merge_existing() method (lines 1017-1031)."""
        cert = Certificate()
        existing_data = {"type": "updated_type", "subject": "updated_subject"}
    
        # merge_existing should update the certificate
>       cert.merge_existing(existing_data)
E       TypeError: Certificate.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:375: TypeError
__________ TestEntityCoverage.test_certificate_merge_new_raises_error __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240da0>

    def test_certificate_merge_new_raises_error(self) -> None:
        """Test Certificate.merge_new() raises error (lines 1046-1047)."""
        cert = Certificate()
    
        with pytest.raises(NotImplementedError):
>           cert.merge_new({})
E           TypeError: Certificate.merge_new() missing 1 required positional argument: '_user_id'

tests/storage/test_storage_entities_coverage.py:385: TypeError
_____________ TestEntityCoverage.test_output_merge_existing_method _____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca241580>

    def test_output_merge_existing_method(self) -> None:
        """Test Output.merge_existing() method (line 1070)."""
        output = Output()
        existing_data = {"satoshis": 200000, "spentBy": 12345}
    
>       output.merge_existing(existing_data)
E       TypeError: Output.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:392: TypeError
_______________ TestEntityCoverage.test_proven_tx_to_api_method ________________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca241f10>

    def test_proven_tx_to_api_method(self) -> None:
        """Test ProvenTx.to_api() method (line 1107)."""
        proven_tx = ProvenTx()
        api_result = proven_tx.to_api()
    
        assert "provenTxId" in api_result
        assert "txid" in api_result
>       assert "userId" in api_result
E       AssertionError: assert 'userId' in {'blockHash': '', 'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 396881), 'height': 0, 'index': 0, ...}

tests/storage/test_storage_entities_coverage.py:414: AssertionError
_____________ TestEntityCoverage.test_proven_tx_req_to_api_method ______________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2429c0>

    def test_proven_tx_req_to_api_method(self) -> None:
        """Test ProvenTxReq.to_api() method (lines 1127-1130)."""
        req = ProvenTxReq()
        api_result = req.to_api()
    
>       assert "reqId" in api_result
E       AssertionError: assert 'reqId' in {'attempts': 0, 'batch': '', 'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 411806), 'history': [], ...}

tests/storage/test_storage_entities_coverage.py:427: AssertionError
__________ TestEntityCoverage.test_proven_tx_req_constructor_defaults __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242c90>

    def test_proven_tx_req_constructor_defaults(self) -> None:
        """Test ProvenTxReq constructor defaults (lines 1134, 1140, 1143-1144)."""
        req = ProvenTxReq()
    
>       assert req.req_id == 0
               ^^^^^^^^^^
E       AttributeError: 'ProvenTxReq' object has no attribute 'req_id'

tests/storage/test_storage_entities_coverage.py:438: AttributeError
_______________ TestEntityCoverage.test_sync_state_to_api_method _______________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2435f0>

    def test_sync_state_to_api_method(self) -> None:
        """Test SyncState.to_api() method (line 1165)."""
        state = SyncState()
        api_result = state.to_api()
    
>       assert "stateId" in api_result
E       AssertionError: assert 'stateId' in {'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 443822), 'init': False, 'refNum': 0, 'status': '', ...}

tests/storage/test_storage_entities_coverage.py:451: AssertionError
___________ TestEntityCoverage.test_sync_state_constructor_defaults ____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca243c20>

    def test_sync_state_constructor_defaults(self) -> None:
        """Test SyncState constructor defaults (lines 1168-1170, 1177)."""
        state = SyncState()
    
>       assert state.state_id == 0
               ^^^^^^^^^^^^^^
E       AttributeError: 'SyncState' object has no attribute 'state_id'

tests/storage/test_storage_entities_coverage.py:464: AttributeError
__________ TestEntityCoverage.test_transaction_merge_existing_method ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24e1b0>

    def test_transaction_merge_existing_method(self) -> None:
        """Test Transaction.merge_existing() method (lines 1186-1200)."""
        tx = Transaction()
        existing_data = {"description": "updated description", "rawTx": bytes([1, 2, 3])}
    
>       tx.merge_existing(existing_data)
E       TypeError: Transaction.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:478: TypeError
________________ TestEntityCoverage.test_tx_label_to_api_method ________________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24ff20>

    def test_tx_label_to_api_method(self) -> None:
        """Test TxLabel.to_api() method (lines 1234-1246)."""
        label = TxLabel()
        api_result = label.to_api()
    
>       assert "labelId" in api_result
E       AssertionError: assert 'labelId' in {'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 492681), 'isDeleted': False, 'label': '', 'txLabelId': 0, ...}

tests/storage/test_storage_entities_coverage.py:488: AssertionError
____________ TestEntityCoverage.test_tx_label_constructor_defaults _____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24fc50>

    def test_tx_label_constructor_defaults(self) -> None:
        """Test TxLabel constructor defaults (line 1294)."""
        label = TxLabel()
    
>       assert label.label_id == 0
               ^^^^^^^^^^^^^^
E       AttributeError: 'TxLabel' object has no attribute 'label_id'. Did you mean: 'tx_label_id'?

tests/storage/test_storage_entities_coverage.py:498: AttributeError
______________ TestEntityCoverage.test_tx_label_map_to_api_method ______________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24f920>

    def test_tx_label_map_to_api_method(self) -> None:
        """Test TxLabelMap.to_api() method (line 1327)."""
        label_map = TxLabelMap()
        api_result = label_map.to_api()
    
>       assert "mapId" in api_result
E       AssertionError: assert 'mapId' in {'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 710385), 'isDeleted': False, 'transactionId': 0, 'txLabelId': 0, ...}

tests/storage/test_storage_entities_coverage.py:509: AssertionError
_______ TestEntityCoverage.test_certificate_field_merge_existing_method ________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24f290>

    def test_certificate_field_merge_existing_method(self) -> None:
        """Test CertificateField.merge_existing() method (lines 1350-1358)."""
        field = CertificateField()
        existing_data = {"fieldName": "updated_name", "fieldValue": "updated_value"}
    
>       field.merge_existing(existing_data)
E       TypeError: CertificateField.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:520: TypeError
___________ TestEntityCoverage.test_certificate_field_to_api_method ____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24f650>

    def test_certificate_field_to_api_method(self) -> None:
        """Test CertificateField.to_api() method (line 1375)."""
        field = CertificateField()
        api_result = field.to_api()
    
>       assert "fieldId" in api_result
E       AssertionError: assert 'fieldId' in {'certificateFieldId': 0, 'certificateId': 0, 'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 746207), 'fieldName': '', ...}

tests/storage/test_storage_entities_coverage.py:530: AssertionError
___________ TestEntityCoverage.test_commission_merge_existing_method ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24f0b0>

    def test_commission_merge_existing_method(self) -> None:
        """Test Commission.merge_existing() method (line 1398)."""
        commission = Commission()
        existing_data = {"satoshis": 75000, "isRedeemed": True}
    
>       commission.merge_existing(existing_data)
E       TypeError: Commission.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:542: TypeError
_________________ TestEntityCoverage.test_output_to_api_method _________________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca240bc0>

    def test_output_to_api_method(self) -> None:
        """Test Output.to_api() method (line 1422)."""
        output = Output()
        api_result = output.to_api()
    
        assert "outputId" in api_result
        assert "transactionId" in api_result
        assert "vout" in api_result
        assert "satoshis" in api_result
        assert "lockingScript" in api_result
        assert "spentBy" in api_result
>       assert "spentAt" in api_result
E       AssertionError: assert 'spentAt' in {'basketId': None, 'change': False, 'createdAt': datetime.datetime(2025, 12, 5, 11, 58, 58, 789749), 'customInstructions': '', ...}

tests/storage/test_storage_entities_coverage.py:558: AssertionError
_________ TestEntityCoverage.test_output_tag_map_constructor_defaults __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca242d20>

    def test_output_tag_map_constructor_defaults(self) -> None:
        """Test OutputTagMap constructor defaults (lines 1445-1450)."""
        tag_map = OutputTagMap()
    
>       assert tag_map.map_id == 0
               ^^^^^^^^^^^^^^
E       AttributeError: 'OutputTagMap' object has no attribute 'map_id'

tests/storage/test_storage_entities_coverage.py:567: AttributeError
__________ TestEntityCoverage.test_tx_label_map_constructor_defaults ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca243560>

    def test_tx_label_map_constructor_defaults(self) -> None:
        """Test TxLabelMap constructor defaults (line 1466)."""
        label_map = TxLabelMap()
    
>       assert label_map.map_id == 0
               ^^^^^^^^^^^^^^^^
E       AttributeError: 'TxLabelMap' object has no attribute 'map_id'

tests/storage/test_storage_entities_coverage.py:577: AttributeError
___________ TestEntityCoverage.test_proven_tx_merge_existing_method ____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2423f0>

    def test_proven_tx_merge_existing_method(self) -> None:
        """Test ProvenTx.merge_existing() method (line 1558)."""
        proven_tx = ProvenTx()
        existing_data = {"blockHeight": 67890, "merkleRoot": "e" * 64}
    
>       proven_tx.merge_existing(existing_data)
E       TypeError: ProvenTx.merge_existing() missing 2 required positional arguments: '_since' and '_ei'

tests/storage/test_storage_entities_coverage.py:589: TypeError
_________ TestEntityCoverage.test_proven_tx_req_merge_existing_method __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca2418e0>

    def test_proven_tx_req_merge_existing_method(self) -> None:
        """Test ProvenTxReq.merge_existing() method (line 1562)."""
        req = ProvenTxReq()
        existing_data = {"callback": "updated_callback"}
    
>       req.merge_existing(existing_data)
E       TypeError: ProvenTxReq.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:599: TypeError
___________ TestEntityCoverage.test_sync_state_merge_existing_method ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca241490>

    def test_sync_state_merge_existing_method(self) -> None:
        """Test SyncState.merge_existing() method (line 1587)."""
        state = SyncState()
        existing_data = {"version": 2, "data": json.dumps({"updated": "data"})}
    
>       state.merge_existing(existing_data)
E       TypeError: SyncState.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:608: TypeError
_______ TestEntityCoverage.test_certificate_field_merge_new_raises_error _______

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24f500>

    def test_certificate_field_merge_new_raises_error(self) -> None:
        """Test CertificateField.merge_new() raises error (line 1671)."""
        field = CertificateField()
    
        with pytest.raises(NotImplementedError):
>           field.merge_new({})
E           TypeError: CertificateField.merge_new() missing 1 required positional argument: '_user_id'

tests/storage/test_storage_entities_coverage.py:618: TypeError
____________ TestEntityCoverage.test_tx_label_merge_existing_method ____________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24ff50>

    def test_tx_label_merge_existing_method(self) -> None:
        """Test TxLabel.merge_existing() method (line 1689)."""
        label = TxLabel()
        existing_data = {"label": "updated_label"}
    
>       label.merge_existing(existing_data)
E       TypeError: TxLabel.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:640: TypeError
__________ TestEntityCoverage.test_tx_label_map_merge_existing_method __________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24e780>

    def test_tx_label_map_merge_existing_method(self) -> None:
        """Test TxLabelMap.merge_existing() method (line 1733)."""
        label_map = TxLabelMap()
        existing_data = {"transactionId": 999, "labelId": 888}
    
>       label_map.merge_existing(existing_data)
E       TypeError: TxLabelMap.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:649: TypeError
___________ TestEntityCoverage.test_output_tag_merge_existing_method ___________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24fb00>

    def test_output_tag_merge_existing_method(self) -> None:
        """Test OutputTag.merge_existing() method (line 1794)."""
        tag = OutputTag()
        existing_data = {"tag": "updated_tag"}
    
>       tag.merge_existing(existing_data)
E       TypeError: OutputTag.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:659: TypeError
_________ TestEntityCoverage.test_output_tag_map_merge_existing_method _________

self = <test_storage_entities_coverage.TestEntityCoverage object at 0x7ff7ca24e300>

    def test_output_tag_map_merge_existing_method(self) -> None:
        """Test OutputTagMap.merge_existing() method (line 1826)."""
        tag_map = OutputTagMap()
        existing_data = {"outputId": 777, "tagId": 666}
    
>       tag_map.merge_existing(existing_data)
E       TypeError: OutputTagMap.merge_existing() missing 2 required positional arguments: '_since' and 'ei'

tests/storage/test_storage_entities_coverage.py:668: TypeError
_ TestStorageMethodsHighImpactCoverage.test_generate_change_with_single_input __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca24cb60>
mock_storage = <Mock id='140702225016608'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_generate_change_with_single_input(self, mock_storage, mock_auth) -> None:
        """Test generate_change with single input (line 248)."""
        inputs = [
>           GenerateChangeInput(
                satoshis=50000,
                locking_script=bytes([118, 169, 20, 255, 255, 255, 255, 136, 172]),  # P2PKH
                derivation_prefix="m/44'/0'/0'",
                derivation_suffix="/0/0",
            )
        ]
E       TypeError: GenerateChangeInput.__init__() got an unexpected keyword argument 'derivation_prefix'

tests/storage/test_storage_methods_high_impact_coverage.py:78: TypeError
_ TestStorageMethodsHighImpactCoverage.test_generate_change_with_multiple_inputs _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca256990>
mock_storage = <Mock id='140702225012528'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_generate_change_with_multiple_inputs(self, mock_storage, mock_auth) -> None:
        """Test generate_change with multiple inputs (line 251)."""
        inputs = [
>           GenerateChangeInput(
                satoshis=30000,
                locking_script=bytes([118, 169, 20, 255, 255, 255, 255, 136, 172]),
                derivation_prefix="m/44'/0'/0'",
                derivation_suffix="/0/0",
            ),
            GenerateChangeInput(
                satoshis=20000,
                locking_script=bytes([118, 169, 20, 255, 255, 255, 255, 136, 172]),
                derivation_prefix="m/44'/0'/0'",
                derivation_suffix="/0/1",
            ),
        ]
E       TypeError: GenerateChangeInput.__init__() got an unexpected keyword argument 'derivation_prefix'

tests/storage/test_storage_methods_high_impact_coverage.py:101: TypeError
__ TestStorageMethodsHighImpactCoverage.test_list_actions_with_status_filter ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1a3410>
mock_storage = <Mock id='140701483367120'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_actions_with_status_filter(self, mock_storage, mock_auth) -> None:
        """Test list_actions with status filter (lines 346, 350)."""
        mock_storage.count.return_value = 10
        mock_storage.find.return_value = [
            {"actionId": 1, "status": "completed", "txid": "tx1"},
            {"actionId": 2, "status": "pending", "txid": "tx2"},
        ]
    
>       args = ListActionsArgs(
            limit=10,
            offset=0,
            status="completed",
            txid=None,
            start_date=None,
            end_date=None,
        )
E       TypeError: ListActionsArgs.__init__() got an unexpected keyword argument 'status'

tests/storage/test_storage_methods_high_impact_coverage.py:134: TypeError
___ TestStorageMethodsHighImpactCoverage.test_list_actions_with_txid_filter ____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1a3440>
mock_storage = <Mock id='140701483359056'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_actions_with_txid_filter(self, mock_storage, mock_auth) -> None:
        """Test list_actions with txid filter (lines 368-369)."""
        mock_storage.count.return_value = 1
        mock_storage.find.return_value = [
            {"actionId": 1, "status": "completed", "txid": "specific_txid"},
        ]
    
>       args = ListActionsArgs(
            limit=10,
            offset=0,
            status=None,
            txid="specific_txid",
            start_date=None,
            end_date=None,
        )
E       TypeError: ListActionsArgs.__init__() got an unexpected keyword argument 'status'

tests/storage/test_storage_methods_high_impact_coverage.py:157: TypeError
____ TestStorageMethodsHighImpactCoverage.test_list_outputs_with_pagination ____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1a2990>
mock_storage = <Mock id='140702224598704'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_outputs_with_pagination(self, mock_storage, mock_auth) -> None:
        """Test list_outputs with pagination (lines 403-405)."""
        mock_storage.count.return_value = 100
        mock_storage.find.return_value = [
            {"outputId": 1, "satoshis": 50000, "basketId": 1},
            {"outputId": 2, "satoshis": 25000, "basketId": 1},
        ]
    
>       args = ListOutputsArgs(
            basket="default",
            limit=2,
            offset=10,
            include_labels=False,
            include_tags=False,
            spent=None,
        )
E       TypeError: ListOutputsArgs.__init__() got an unexpected keyword argument 'include_labels'

tests/storage/test_storage_methods_high_impact_coverage.py:180: TypeError
___ TestStorageMethodsHighImpactCoverage.test_list_outputs_with_spent_filter ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1eb8f0>
mock_storage = <Mock id='140702057921856'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_outputs_with_spent_filter(self, mock_storage, mock_auth) -> None:
        """Test list_outputs with spent filter (lines 413-426)."""
        mock_storage.count.return_value = 5
        mock_storage.find.return_value = [
            {"outputId": 1, "satoshis": 50000, "spentBy": None},
        ]
    
>       args = ListOutputsArgs(
            basket="default",
            limit=10,
            offset=0,
            include_labels=False,
            include_tags=False,
            spent=False,  # Only unspent
        )
E       TypeError: ListOutputsArgs.__init__() got an unexpected keyword argument 'include_labels'

tests/storage/test_storage_methods_high_impact_coverage.py:203: TypeError
__ TestStorageMethodsHighImpactCoverage.test_list_outputs_with_basket_filter ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ea4b0>
mock_storage = <Mock id='140702225015888'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_outputs_with_basket_filter(self, mock_storage, mock_auth) -> None:
        """Test list_outputs with basket filter (lines 433-442)."""
        mock_storage.count.return_value = 3
        mock_storage.find.return_value = [
            {"outputId": 1, "satoshis": 50000, "basketId": 1},
        ]
    
>       args = ListOutputsArgs(
            basket="savings",
            limit=10,
            offset=0,
            include_labels=False,
            include_tags=False,
            spent=None,
        )
E       TypeError: ListOutputsArgs.__init__() got an unexpected keyword argument 'include_labels'

tests/storage/test_storage_methods_high_impact_coverage.py:225: TypeError
____ TestStorageMethodsHighImpactCoverage.test_list_outputs_include_labels _____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e8fe0>
mock_storage = <Mock id='140701483354784'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_outputs_include_labels(self, mock_storage, mock_auth) -> None:
        """Test list_outputs with include_labels (lines 446-455)."""
        mock_storage.count.return_value = 2
        mock_storage.find.return_value = [
            {"outputId": 1, "satoshis": 50000, "basketId": 1},
        ]
    
>       args = ListOutputsArgs(
            basket="default",
            limit=10,
            offset=0,
            include_labels=True,  # Include labels
            include_tags=False,
            spent=None,
        )
E       TypeError: ListOutputsArgs.__init__() got an unexpected keyword argument 'include_labels'

tests/storage/test_storage_methods_high_impact_coverage.py:246: TypeError
_____ TestStorageMethodsHighImpactCoverage.test_list_outputs_include_tags ______

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ebd70>
mock_storage = <Mock id='140702056305760'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_outputs_include_tags(self, mock_storage, mock_auth) -> None:
        """Test list_outputs with include_tags (lines 460-469)."""
        mock_storage.count.return_value = 2
        mock_storage.find.return_value = [
            {"outputId": 1, "satoshis": 50000, "basketId": 1},
        ]
    
>       args = ListOutputsArgs(
            basket="default",
            limit=10,
            offset=0,
            include_labels=False,
            include_tags=True,  # Include tags
            spent=None,
        )
E       TypeError: ListOutputsArgs.__init__() got an unexpected keyword argument 'include_labels'

tests/storage/test_storage_methods_high_impact_coverage.py:267: TypeError
_ TestStorageMethodsHighImpactCoverage.test_list_certificates_with_limit_offset _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ea180>
mock_storage = <Mock id='140701481864704'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_certificates_with_limit_offset(self, mock_storage, mock_auth) -> None:
        """Test list_certificates with limit and offset (lines 477-486)."""
        mock_storage.count.return_value = 50
        mock_storage.find.return_value = [
            {"certificateId": 1, "type": "identity", "subject": "test"},
        ]
    
        result = list_certificates(mock_storage, mock_auth, limit=5, offset=10)
    
        # Verify limit and offset were applied
        assert "certificates" in result
>       assert "total" in result
E       AssertionError: assert 'total' in {'certificates': [{'certificateId': 1, 'certifier': '', 'isDeleted': False, 'publicKey': '', ...}], 'totalCertificates': 1}

tests/storage/test_storage_methods_high_impact_coverage.py:292: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_internalize_action_with_transaction _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ea990>
mock_storage = <Mock id='140701481872336'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_internalize_action_with_transaction(self, mock_storage, mock_auth) -> None:
        """Test internalize_action with transaction processing (lines 490-512)."""
        # Mock the transaction and storage calls
        mock_storage.create_action.return_value = {
            "transactionId": 123,
            "outputs": [{"vout": 0, "satoshis": 50000}],
        }
        mock_storage.find.return_value = []
        mock_storage.insert.return_value = None
    
        args = {
            "tx": bytes([1, 0, 0, 0, 0, 0, 0, 0, 0, 0]),  # Minimal tx
            "outputs": [{"vout": 0, "satoshis": 50000, "basket": "default"}],
            "description": "Internalized transaction",
        }
    
        with patch('bsv_wallet_toolbox.storage.methods.Transaction') as mock_tx_class:
            mock_tx = Mock()
            mock_tx.txid.return_value = "internalized_txid"
            mock_tx_class.from_hex.return_value = mock_tx
    
>           result = internalize_action(mock_storage, mock_auth, args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:316: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140701481872336'>
auth = {'identityKey': 'test_key', 'userId': 123}
args = {'description': 'Internalized transaction', 'outputs': [{'basket': 'default', 'satoshis': 50000, 'vout': 0}], 'tx': b'\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00'}

    def internalize_action(storage: Any, auth: dict[str, Any], args: dict[str, Any]) -> dict[str, Any]:
        """Internalize external transaction into wallet.
    
        Records an externally-signed transaction as a wallet action,
        incorporating its outputs and inputs for tracking.
    
        TS parity:
            Mirrors TypeScript internalizeAction by validating and
            recording external transactions.
    
        Args:
            storage: StorageProvider instance
            auth: Authentication context
            args: Transaction details and inputs/outputs
    
        Returns:
            Dict with internalized transaction record
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/internalizeAction.ts
        """
        if not storage:
            raise WalletError("storage is required for internalize_action")
    
        user_id = auth.get("userId")
        if not user_id:
            raise WalletError("userId is required in auth context")
    
        # Initialize result structure
        result = {
            "accepted": True,
            "isMerge": False,
            "txid": "",
            "satoshis": 0,
        }
    
        # Step 1: Validate incoming transaction arguments
        # - Verify tx is valid BsvTransaction or Beef
        tx = args.get("tx")
        if not tx:
            raise WalletError("tx is required in internalizeAction args")
    
        txid = args.get("txid", "")
        if not txid:
>           raise WalletError("txid is required in internalizeAction args")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: txid is required in internalizeAction args

src/bsv_wallet_toolbox/storage/methods.py:776: WalletError
_ TestStorageMethodsHighImpactCoverage.test_get_beef_for_transaction_with_proven_tx _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ea3c0>
mock_storage = <Mock id='140702056913072'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_get_beef_for_transaction_with_proven_tx(self, mock_storage, mock_auth) -> None:
        """Test get_beef_for_transaction with proven tx (lines 542, 546)."""
        # Mock proven tx with beef
        mock_storage.find.return_value = [
            {
                "provenTxId": 1,
                "txid": "test_txid",
                "rawTx": bytes([1, 2, 3]),
                "proof": bytes([4, 5, 6]),
                "blockHeight": 1000,
            }
        ]
    
        result = get_beef_for_transaction(mock_storage, mock_auth, "test_txid")
    
        # Verify beef construction from proven tx
>       assert "beef" in result
               ^^^^^^^^^^^^^^^^
E       TypeError: argument of type 'Mock' is not iterable

tests/storage/test_storage_methods_high_impact_coverage.py:338: TypeError
_ TestStorageMethodsHighImpactCoverage.test_get_beef_for_transaction_with_merkle_path _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e9df0>
mock_storage = <Mock id='140701483539760'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_get_beef_for_transaction_with_merkle_path(self, mock_storage, mock_auth) -> None:
        """Test get_beef_for_transaction with merkle path (lines 568-572)."""
        # Mock proven tx with merkle path
        mock_storage.find.return_value = [
            {
                "provenTxId": 1,
                "txid": "test_txid",
                "rawTx": bytes([1, 2, 3]),
                "merklePath": "merkle_path_data",
                "blockHeight": 1000,
            }
        ]
    
>       with patch('bsv_wallet_toolbox.storage.methods.BsvTransaction') as mock_bsv_tx:

tests/storage/test_storage_methods_high_impact_coverage.py:354: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79def7d10>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <module 'bsv_wallet_toolbox.storage.methods' from '/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/storage/methods.py'> does not have the attribute 'BsvTransaction'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_ TestStorageMethodsHighImpactCoverage.test_attempt_to_post_reqs_to_network_no_beef _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e9850>
mock_storage = <Mock id='140702057658800'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_attempt_to_post_reqs_to_network_no_beef(self, mock_storage, mock_auth) -> None:
        """Test attempt_to_post_reqs_to_network without beef (lines 585-586)."""
        # Mock proven tx req without beef
        mock_storage.find.return_value = [
            {
                "txid": "test_txid",
                "userId": 123,
                "status": "unsent",
                "rawTx": bytes([1, 2, 3, 4]),
                # No beef field
            }
        ]
    
        txids = ["test_txid"]
    
        with patch('bsv_wallet_toolbox.storage.methods.requests') as mock_requests:
            mock_response = Mock()
            mock_response.status_code = 200
            mock_response.json.return_value = {"txid": "test_txid", "status": "posted"}
            mock_requests.post.return_value = mock_response
    
            result = attempt_to_post_reqs_to_network(mock_storage, mock_auth, txids)
    
            # Verify non-beef path was exercised
>           assert "send_with_results" in result
E           AssertionError: assert 'send_with_results' in {'failed_txids': [], 'posted_txids': ['test_txid'], 'results': {'test_txid': {'message': 'Posted to network', 'status': 'success', 'timestamp': '2025-12-05T02:58:59.600528+00:00'}}}

tests/storage/test_storage_methods_high_impact_coverage.py:387: AssertionError
___ TestStorageMethodsHighImpactCoverage.test_review_status_with_aged_limit ____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1a2c60>
mock_storage = <Mock id='140702056596640'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_aged_limit(self, mock_storage, mock_auth) -> None:
        """Test review_status with aged limit processing (lines 590-600)."""
        aged_limit = datetime.now(timezone.utc)
    
        # Mock various status updates
        mock_storage.find.return_value = []
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify aged limit processing
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:400: AssertionError
____ TestStorageMethodsHighImpactCoverage.test_purge_data_with_date_params _____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca257170>
mock_storage = <Mock id='140702191453104'>

    def test_purge_data_with_date_params(self, mock_storage) -> None:
        """Test purge_data with date parameters (lines 607-620)."""
        params = {
            "beforeDate": "2023-01-01",
            "entityTypes": ["Transaction", "Output"],
        }
    
        mock_storage.delete.return_value = 5
    
        result = purge_data(mock_storage, params)
    
        # Verify date-based purging
>       assert "deleted" in result
E       AssertionError: assert 'deleted' in {'deleted_certificates': 5, 'deleted_labels': 5, 'deleted_outputs': 5, 'deleted_requests': 5, ...}

tests/storage/test_storage_methods_high_impact_coverage.py:415: AssertionError
____ TestStorageMethodsHighImpactCoverage.test_purge_data_with_count_limits ____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca24c9b0>
mock_storage = <Mock id='140702191244528'>

    def test_purge_data_with_count_limits(self, mock_storage) -> None:
        """Test purge_data with count limits (lines 625-641)."""
        params = {
            "maxCount": 100,
            "entityTypes": ["Transaction"],
        }
    
        mock_storage.delete.return_value = 50
    
        result = purge_data(mock_storage, params)
    
        # Verify count-based purging
>       assert "deleted" in result
E       AssertionError: assert 'deleted' in {'deleted_certificates': 50, 'deleted_labels': 50, 'deleted_outputs': 50, 'deleted_requests': 50, ...}

tests/storage/test_storage_methods_high_impact_coverage.py:430: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_get_sync_chunk_with_entity_filters _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e9b50>
mock_storage = <Mock id='140702057287888'>

    def test_get_sync_chunk_with_entity_filters(self, mock_storage) -> None:
        """Test get_sync_chunk with entity filters (line 671)."""
        args = {
            "entityName": "Transaction",
            "sinceVersion": 100,
            "limit": 50,
        }
    
        mock_storage.find.return_value = [
            {"id": 1, "version": 101, "data": {"test": "data"}},
            {"id": 2, "version": 102, "data": {"test": "data2"}},
        ]
    
>       result = get_sync_chunk(mock_storage, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:446: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702057287888'>
args = {'entityName': 'Transaction', 'limit': 50, 'sinceVersion': 100}

    def get_sync_chunk(storage: Any, args: dict[str, Any]) -> dict[str, Any]:
        """Get synchronization chunk for wallet sync operations.
    
        Retrieves a chunk of wallet state for synchronization with
        other devices or backup systems.
    
        TS parity:
            Mirrors TypeScript getSyncChunk for wallet sync protocol.
    
        Args:
            storage: StorageProvider instance
            args: Sync request parameters
    
        Returns:
            Dict with sync chunk data
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/getSyncChunk.ts
        """
        if not storage:
            raise WalletError("storage is required for getSyncChunk")
    
        # Initialize result structure
        result = {
            "syncState": {},
            "transactions": [],
            "outputs": [],
            "certificates": [],
            "labels": [],
            "baskets": [],
            "hasMore": False,
            "nextChunkId": None,
        }
    
        # Step 1: Extract sync parameters
        user_id = args.get("userId")
        chunk_size = args.get("chunkSize", 100)
        sync_from = args.get("syncFrom")  # Timestamp or version
        chunk_offset = args.get("chunkOffset", 0)
    
        if not user_id:
>           raise WalletError("userId is required for getSyncChunk")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: userId is required for getSyncChunk

src/bsv_wallet_toolbox/storage/methods.py:1481: WalletError
___ TestStorageMethodsHighImpactCoverage.test_process_action_with_send_with ____

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e9e20>
mock_storage = <Mock id='140702057658416'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_process_action_with_send_with(self, mock_storage, mock_auth) -> None:
        """Test process_action with send_with functionality (lines 684-685)."""
        args = StorageProcessActionArgs(
            is_new_tx=True,
            is_no_send=False,
            is_send_with=True,
            is_delayed=False,
            send_with=["txid1", "txid2"],
            log={"action": "process"},
        )
    
        mock_storage.create_action.return_value = {"actionId": 123}
    
>       result = process_action(mock_storage, mock_auth, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:465: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702057658416'>
auth = {'identityKey': 'test_key', 'userId': 123}
args = StorageProcessActionArgs(is_new_tx=True, is_no_send=False, is_send_with=True, is_delayed=False, send_with=['txid1', 'txid2'], log={'action': 'process'})

    def process_action(storage: Any, auth: dict[str, Any], args: StorageProcessActionArgs) -> StorageProcessActionResults:
        """Storage-level processing for wallet createAction and signAction.
    
        Handles remaining storage tasks once a fully signed transaction has been
        completed. This is common to both createAction and signAction.
    
        TS parity:
            Mirrors TypeScript processAction by managing completed transactions,
            sharing with network, and tracking send state.
    
        Args:
            storage: StorageProvider instance
            auth: Authentication context with userId and storageIdentityKey
            args: StorageProcessActionArgs with transaction state
    
        Returns:
            StorageProcessActionResults with network sharing status
    
        Raises:
            WalletError: If storage operations fail
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/processAction.ts
        """
        if not storage:
            raise WalletError("storage is required for processAction")
    
        user_id = auth.get("userId")
        if not user_id:
            raise WalletError("userId is required in auth context")
    
        result = StorageProcessActionResults()
    
        # Build list of transaction IDs to share with network
        txids_to_share = list(args.send_with or [])
    
        # Step 1: Handle new transaction commit if isNewTx
        if args.is_new_tx:
            # Validate new transaction args
>           reference = args.get("reference", "")
                        ^^^^^^^^
E           AttributeError: 'StorageProcessActionArgs' object has no attribute 'get'

src/bsv_wallet_toolbox/storage/methods.py:156: AttributeError
__ TestStorageMethodsHighImpactCoverage.test_process_action_with_delayed_flag __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1eaae0>
mock_storage = <Mock id='140701483541488'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_process_action_with_delayed_flag(self, mock_storage, mock_auth) -> None:
        """Test process_action with delayed flag (lines 689-700)."""
        args = StorageProcessActionArgs(
            is_new_tx=True,
            is_no_send=False,
            is_send_with=False,
            is_delayed=True,  # Delayed processing
            send_with=[],
            log={"action": "delayed_process"},
        )
    
        mock_storage.create_action.return_value = {"actionId": 456}
    
>       result = process_action(mock_storage, mock_auth, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:483: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140701483541488'>
auth = {'identityKey': 'test_key', 'userId': 123}
args = StorageProcessActionArgs(is_new_tx=True, is_no_send=False, is_send_with=False, is_delayed=True, send_with=[], log={'action': 'delayed_process'})

    def process_action(storage: Any, auth: dict[str, Any], args: StorageProcessActionArgs) -> StorageProcessActionResults:
        """Storage-level processing for wallet createAction and signAction.
    
        Handles remaining storage tasks once a fully signed transaction has been
        completed. This is common to both createAction and signAction.
    
        TS parity:
            Mirrors TypeScript processAction by managing completed transactions,
            sharing with network, and tracking send state.
    
        Args:
            storage: StorageProvider instance
            auth: Authentication context with userId and storageIdentityKey
            args: StorageProcessActionArgs with transaction state
    
        Returns:
            StorageProcessActionResults with network sharing status
    
        Raises:
            WalletError: If storage operations fail
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/processAction.ts
        """
        if not storage:
            raise WalletError("storage is required for processAction")
    
        user_id = auth.get("userId")
        if not user_id:
            raise WalletError("userId is required in auth context")
    
        result = StorageProcessActionResults()
    
        # Build list of transaction IDs to share with network
        txids_to_share = list(args.send_with or [])
    
        # Step 1: Handle new transaction commit if isNewTx
        if args.is_new_tx:
            # Validate new transaction args
>           reference = args.get("reference", "")
                        ^^^^^^^^
E           AttributeError: 'StorageProcessActionArgs' object has no attribute 'get'

src/bsv_wallet_toolbox/storage/methods.py:156: AttributeError
___ TestStorageMethodsHighImpactCoverage.test_list_actions_with_date_filters ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ebc80>
mock_storage = <Mock id='140702056918928'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_list_actions_with_date_filters(self, mock_storage, mock_auth) -> None:
        """Test list_actions with date filters (lines 708-727)."""
        start_date = datetime(2023, 1, 1, tzinfo=timezone.utc)
        end_date = datetime(2023, 12, 31, tzinfo=timezone.utc)
    
        mock_storage.count.return_value = 25
        mock_storage.find.return_value = [
            {"actionId": 1, "createdAt": start_date, "txid": "tx1"},
        ]
    
>       args = ListActionsArgs(
            limit=10,
            offset=0,
            status=None,
            txid=None,
            start_date=start_date,
            end_date=end_date,
        )
E       TypeError: ListActionsArgs.__init__() got an unexpected keyword argument 'status'

tests/storage/test_storage_methods_high_impact_coverage.py:498: TypeError
___ TestStorageMethodsHighImpactCoverage.test_internalize_action_with_labels ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1eaf90>
mock_storage = <Mock id='140702057016128'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_internalize_action_with_labels(self, mock_storage, mock_auth) -> None:
        """Test internalize_action with labels processing (lines 758, 776)."""
        mock_storage.create_action.return_value = {
            "transactionId": 123,
            "outputs": [{"vout": 0, "satoshis": 50000}],
        }
        mock_storage.find.return_value = []
        mock_storage.insert.return_value = None
    
        args = {
            "tx": bytes([1, 0, 0, 0]),
            "outputs": [{"vout": 0, "satoshis": 50000, "basket": "default"}],
            "labels": ["received", "payment"],
            "description": "Labeled transaction",
        }
    
        with patch('bsv_wallet_toolbox.storage.methods.Transaction') as mock_tx_class:
            mock_tx = Mock()
            mock_tx.txid.return_value = "labeled_txid"
            mock_tx_class.from_hex.return_value = mock_tx
    
>           result = internalize_action(mock_storage, mock_auth, args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:534: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702057016128'>
auth = {'identityKey': 'test_key', 'userId': 123}
args = {'description': 'Labeled transaction', 'labels': ['received', 'payment'], 'outputs': [{'basket': 'default', 'satoshis': 50000, 'vout': 0}], 'tx': b'\x01\x00\x00\x00'}

    def internalize_action(storage: Any, auth: dict[str, Any], args: dict[str, Any]) -> dict[str, Any]:
        """Internalize external transaction into wallet.
    
        Records an externally-signed transaction as a wallet action,
        incorporating its outputs and inputs for tracking.
    
        TS parity:
            Mirrors TypeScript internalizeAction by validating and
            recording external transactions.
    
        Args:
            storage: StorageProvider instance
            auth: Authentication context
            args: Transaction details and inputs/outputs
    
        Returns:
            Dict with internalized transaction record
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/internalizeAction.ts
        """
        if not storage:
            raise WalletError("storage is required for internalize_action")
    
        user_id = auth.get("userId")
        if not user_id:
            raise WalletError("userId is required in auth context")
    
        # Initialize result structure
        result = {
            "accepted": True,
            "isMerge": False,
            "txid": "",
            "satoshis": 0,
        }
    
        # Step 1: Validate incoming transaction arguments
        # - Verify tx is valid BsvTransaction or Beef
        tx = args.get("tx")
        if not tx:
            raise WalletError("tx is required in internalizeAction args")
    
        txid = args.get("txid", "")
        if not txid:
>           raise WalletError("txid is required in internalizeAction args")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: txid is required in internalizeAction args

src/bsv_wallet_toolbox/storage/methods.py:776: WalletError
_ TestStorageMethodsHighImpactCoverage.test_get_beef_for_transaction_error_handling _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e92e0>
mock_storage = <Mock id='140702056314016'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_get_beef_for_transaction_error_handling(self, mock_storage, mock_auth) -> None:
        """Test get_beef_for_transaction error handling (line 802)."""
        # Mock no proven tx found
        mock_storage.find.return_value = []
    
>       with pytest.raises(WalletError):
E       Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.WalletError'>

tests/storage/test_storage_methods_high_impact_coverage.py:544: Failed
_ TestStorageMethodsHighImpactCoverage.test_attempt_to_post_reqs_to_network_http_error _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e8bf0>
mock_storage = <Mock id='140701481865472'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_attempt_to_post_reqs_to_network_http_error(self, mock_storage, mock_auth) -> None:
        """Test attempt_to_post_reqs_to_network HTTP error handling (lines 837-877)."""
        mock_storage.find.return_value = [
            {
                "txid": "test_txid",
                "userId": 123,
                "status": "unsent",
                "rawTx": bytes([1, 2, 3, 4]),
            }
        ]
    
        txids = ["test_txid"]
    
        with patch('bsv_wallet_toolbox.storage.methods.requests') as mock_requests:
            mock_requests.post.side_effect = Exception("Network error")
    
            result = attempt_to_post_reqs_to_network(mock_storage, mock_auth, txids)
    
            # Verify error handling
>           assert "errors" in result
E           AssertionError: assert 'errors' in {'failed_txids': [], 'posted_txids': ['test_txid'], 'results': {'test_txid': {'message': 'Posted to network', 'status': 'success', 'timestamp': '2025-12-05T02:58:59.886238+00:00'}}}

tests/storage/test_storage_methods_high_impact_coverage.py:566: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_attempt_to_post_reqs_to_network_update_failure _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e8650>
mock_storage = <Mock id='140702057657360'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_attempt_to_post_reqs_to_network_update_failure(self, mock_storage, mock_auth) -> None:
        """Test attempt_to_post_reqs_to_network update failure (lines 881, 883)."""
        mock_storage.find.return_value = [
            {
                "txid": "test_txid",
                "userId": 123,
                "status": "unsent",
                "rawTx": bytes([1, 2, 3, 4]),
            }
        ]
        mock_storage.update.side_effect = Exception("Update failed")
    
        txids = ["test_txid"]
    
>       result = attempt_to_post_reqs_to_network(mock_storage, mock_auth, txids)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:582: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
src/bsv_wallet_toolbox/storage/methods.py:1211: in attempt_to_post_reqs_to_network
    storage.update(
/usr/lib/python3.12/unittest/mock.py:1134: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1138: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Mock name='mock.update' id='140702057654192'>
args = ('ProvenTxReq', {'txid': 'test_txid', 'userId': 123}, {'lastUpdate': '2025-12-05T02:58:59.900787+00:00', 'status': 'unsent'})
kwargs = {}, effect = Exception('Update failed')

    def _execute_mock_call(self, /, *args, **kwargs):
        # separate from _increment_mock_call so that awaited functions are
        # executed separately from their call, also AsyncMock overrides this method
    
        effect = self.side_effect
        if effect is not None:
            if _is_exception(effect):
>               raise effect
E               Exception: Update failed

/usr/lib/python3.12/unittest/mock.py:1193: Exception
_ TestStorageMethodsHighImpactCoverage.test_review_status_with_abandoned_actions _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e8230>
mock_storage = <Mock id='140702191240448'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_abandoned_actions(self, mock_storage, mock_auth) -> None:
        """Test review_status with abandoned actions (lines 888, 901-911)."""
        aged_limit = datetime.now(timezone.utc)
    
        # Mock abandoned actions
        mock_storage.find.return_value = [
            {"actionId": 1, "status": "sending", "createdAt": aged_limit},
            {"actionId": 2, "status": "failed", "createdAt": aged_limit},
        ]
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify abandoned action processing
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:601: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_review_status_with_proven_tx_reqs __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca204c20>
mock_storage = <Mock id='140702191457904'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_proven_tx_reqs(self, mock_storage, mock_auth) -> None:
        """Test review_status with proven tx reqs (lines 916-947)."""
        aged_limit = datetime.now(timezone.utc)
    
        mock_storage.find.return_value = [
            {"reqId": 1, "status": "unsent", "createdAt": aged_limit},
        ]
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify proven tx req processing
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:615: AssertionError
__ TestStorageMethodsHighImpactCoverage.test_purge_data_with_combined_filters __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7c94040b0>
mock_storage = <Mock id='140701483361072'>

    def test_purge_data_with_combined_filters(self, mock_storage) -> None:
        """Test purge_data with combined filters (lines 1030-1032)."""
        params = {
            "beforeDate": "2023-01-01",
            "maxCount": 10,
            "entityTypes": ["Transaction", "Output"],
        }
    
        mock_storage.delete.return_value = 8
    
        result = purge_data(mock_storage, params)
    
        # Verify combined filtering
>       assert "deleted" in result
E       AssertionError: assert 'deleted' in {'deleted_certificates': 8, 'deleted_labels': 8, 'deleted_outputs': 8, 'deleted_requests': 8, ...}

tests/storage/test_storage_methods_high_impact_coverage.py:630: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_get_sync_chunk_with_version_filtering _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7c9404200>
mock_storage = <Mock id='140702057906544'>

    def test_get_sync_chunk_with_version_filtering(self, mock_storage) -> None:
        """Test get_sync_chunk with version filtering (lines 1069-1088)."""
        args = {
            "entityName": "Transaction",
            "sinceVersion": 50,
            "limit": 20,
        }
    
        mock_storage.find.return_value = [
            {"id": 1, "version": 51, "data": {"tx": "data1"}},
            {"id": 2, "version": 52, "data": {"tx": "data2"}},
        ]
    
>       result = get_sync_chunk(mock_storage, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:646: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702057906544'>
args = {'entityName': 'Transaction', 'limit': 20, 'sinceVersion': 50}

    def get_sync_chunk(storage: Any, args: dict[str, Any]) -> dict[str, Any]:
        """Get synchronization chunk for wallet sync operations.
    
        Retrieves a chunk of wallet state for synchronization with
        other devices or backup systems.
    
        TS parity:
            Mirrors TypeScript getSyncChunk for wallet sync protocol.
    
        Args:
            storage: StorageProvider instance
            args: Sync request parameters
    
        Returns:
            Dict with sync chunk data
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/getSyncChunk.ts
        """
        if not storage:
            raise WalletError("storage is required for getSyncChunk")
    
        # Initialize result structure
        result = {
            "syncState": {},
            "transactions": [],
            "outputs": [],
            "certificates": [],
            "labels": [],
            "baskets": [],
            "hasMore": False,
            "nextChunkId": None,
        }
    
        # Step 1: Extract sync parameters
        user_id = args.get("userId")
        chunk_size = args.get("chunkSize", 100)
        sync_from = args.get("syncFrom")  # Timestamp or version
        chunk_offset = args.get("chunkOffset", 0)
    
        if not user_id:
>           raise WalletError("userId is required for getSyncChunk")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: userId is required for getSyncChunk

src/bsv_wallet_toolbox/storage/methods.py:1481: WalletError
__ TestStorageMethodsHighImpactCoverage.test_review_status_with_monitor_tasks __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7c9404ec0>
mock_storage = <Mock id='140702058031744'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_monitor_tasks(self, mock_storage, mock_auth) -> None:
        """Test review_status with monitor tasks (lines 1167-1172)."""
        aged_limit = datetime.now(timezone.utc)
    
        mock_storage.find.return_value = []
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify monitor task processing
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:675: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_review_status_with_abandoned_proofs _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1eb6b0>
mock_storage = <Mock id='140702058898512'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_abandoned_proofs(self, mock_storage, mock_auth) -> None:
        """Test review_status with abandoned proofs (lines 1178-1183)."""
        aged_limit = datetime.now(timezone.utc)
    
        mock_storage.find.return_value = []
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify abandoned proof processing
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:687: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_purge_data_with_entity_specific_limits _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e83e0>
mock_storage = <Mock id='140702058307824'>

    def test_purge_data_with_entity_specific_limits(self, mock_storage) -> None:
        """Test purge_data with entity-specific limits (lines 1201, 1203)."""
        params = {
            "maxCount": 5,
            "entityTypes": ["Transaction"],
            "beforeDate": "2023-06-01",
        }
    
        mock_storage.delete.return_value = 3
    
        result = purge_data(mock_storage, params)
    
        # Verify entity-specific limits
>       assert "deleted" in result
E       AssertionError: assert 'deleted' in {'deleted_certificates': 3, 'deleted_labels': 3, 'deleted_outputs': 3, 'deleted_requests': 3, ...}

tests/storage/test_storage_methods_high_impact_coverage.py:702: AssertionError
_ TestStorageMethodsHighImpactCoverage.test_get_sync_chunk_with_empty_results __

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e86b0>
mock_storage = <Mock id='140702058439760'>

    def test_get_sync_chunk_with_empty_results(self, mock_storage) -> None:
        """Test get_sync_chunk with empty results (lines 1282-1283)."""
        args = {
            "entityName": "Transaction",
            "sinceVersion": 1000,
            "limit": 10,
        }
    
        mock_storage.find.return_value = []
    
>       result = get_sync_chunk(mock_storage, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:714: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702058439760'>
args = {'entityName': 'Transaction', 'limit': 10, 'sinceVersion': 1000}

    def get_sync_chunk(storage: Any, args: dict[str, Any]) -> dict[str, Any]:
        """Get synchronization chunk for wallet sync operations.
    
        Retrieves a chunk of wallet state for synchronization with
        other devices or backup systems.
    
        TS parity:
            Mirrors TypeScript getSyncChunk for wallet sync protocol.
    
        Args:
            storage: StorageProvider instance
            args: Sync request parameters
    
        Returns:
            Dict with sync chunk data
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/getSyncChunk.ts
        """
        if not storage:
            raise WalletError("storage is required for getSyncChunk")
    
        # Initialize result structure
        result = {
            "syncState": {},
            "transactions": [],
            "outputs": [],
            "certificates": [],
            "labels": [],
            "baskets": [],
            "hasMore": False,
            "nextChunkId": None,
        }
    
        # Step 1: Extract sync parameters
        user_id = args.get("userId")
        chunk_size = args.get("chunkSize", 100)
        sync_from = args.get("syncFrom")  # Timestamp or version
        chunk_offset = args.get("chunkOffset", 0)
    
        if not user_id:
>           raise WalletError("userId is required for getSyncChunk")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: userId is required for getSyncChunk

src/bsv_wallet_toolbox/storage/methods.py:1481: WalletError
_ TestStorageMethodsHighImpactCoverage.test_review_status_with_no_updates_needed _

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1ea540>
mock_storage = <Mock id='140702225018240'>
mock_auth = {'identityKey': 'test_key', 'userId': 123}

    def test_review_status_with_no_updates_needed(self, mock_storage, mock_auth) -> None:
        """Test review_status with no updates needed (lines 1295-1297)."""
        aged_limit = datetime.now(timezone.utc)
    
        # Mock no items to update
        mock_storage.find.return_value = []
        mock_storage.update.return_value = None
    
        result = review_status(mock_storage, mock_auth, aged_limit)
    
        # Verify no-op case
>       assert "updated" in result
E       AssertionError: assert 'updated' in {'aged_count': 0, 'log': 'Review completed: 0 transactions updated, 0 transactions aged', 'updated_count': 0}

tests/storage/test_storage_methods_high_impact_coverage.py:731: AssertionError
___ TestStorageMethodsHighImpactCoverage.test_purge_data_with_invalid_params ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca1e9b80>
mock_storage = <Mock id='140701483368320'>

    def test_purge_data_with_invalid_params(self, mock_storage) -> None:
        """Test purge_data with invalid parameters (line 1336)."""
        params = {}  # Empty params
    
        result = purge_data(mock_storage, params)
    
        # Verify invalid param handling
>       assert "deleted" in result
E       AssertionError: assert 'deleted' in {'deleted_certificates': <Mock name='mock.delete()' id='140701483365968'>, 'deleted_labels': <Mock name='mock.delete()... name='mock.delete()' id='140701483365968'>, 'deleted_requests': <Mock name='mock.delete()' id='140701483365968'>, ...}

tests/storage/test_storage_methods_high_impact_coverage.py:741: AssertionError
__ TestStorageMethodsHighImpactCoverage.test_get_sync_chunk_with_large_limit ___

self = <test_storage_methods_high_impact_coverage.TestStorageMethodsHighImpactCoverage object at 0x7ff7ca24d850>
mock_storage = <Mock id='140702191459440'>

    def test_get_sync_chunk_with_large_limit(self, mock_storage) -> None:
        """Test get_sync_chunk with large limit (lines 1342-1352)."""
        args = {
            "entityName": "Transaction",
            "sinceVersion": 1,
            "limit": 1000,  # Large limit
        }
    
        mock_storage.find.return_value = [{"id": 1, "version": 2, "data": {"large": "data"}}]
    
>       result = get_sync_chunk(mock_storage, args)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/storage/test_storage_methods_high_impact_coverage.py:754: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

storage = <Mock id='140702191459440'>
args = {'entityName': 'Transaction', 'limit': 1000, 'sinceVersion': 1}

    def get_sync_chunk(storage: Any, args: dict[str, Any]) -> dict[str, Any]:
        """Get synchronization chunk for wallet sync operations.
    
        Retrieves a chunk of wallet state for synchronization with
        other devices or backup systems.
    
        TS parity:
            Mirrors TypeScript getSyncChunk for wallet sync protocol.
    
        Args:
            storage: StorageProvider instance
            args: Sync request parameters
    
        Returns:
            Dict with sync chunk data
    
        Reference:
            toolbox/ts-wallet-toolbox/src/storage/methods/getSyncChunk.ts
        """
        if not storage:
            raise WalletError("storage is required for getSyncChunk")
    
        # Initialize result structure
        result = {
            "syncState": {},
            "transactions": [],
            "outputs": [],
            "certificates": [],
            "labels": [],
            "baskets": [],
            "hasMore": False,
            "nextChunkId": None,
        }
    
        # Step 1: Extract sync parameters
        user_id = args.get("userId")
        chunk_size = args.get("chunkSize", 100)
        sync_from = args.get("syncFrom")  # Timestamp or version
        chunk_offset = args.get("chunkOffset", 0)
    
        if not user_id:
>           raise WalletError("userId is required for getSyncChunk")
E           bsv_wallet_toolbox.errors.wallet_errors.WalletError: userId is required for getSyncChunk

src/bsv_wallet_toolbox/storage/methods.py:1481: WalletError
___ TestWalletFinalCoverage.test_wallet_initialization_with_minimal_services ___

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ae7d70>
mock_storage = <Mock id='140701481864416'>
mock_key_deriver = <Mock id='140701477300288'>

    def test_wallet_initialization_with_minimal_services(self, mock_storage, mock_key_deriver):
        """Test wallet initialization with minimal services (covers lines around 373, 397)."""
        # Test wallet creation with minimal components
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef') as mock_init_beef:

tests/wallet/test_wallet_final_coverage.py:83: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7c9f64830>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
________ TestWalletFinalCoverage.test_wallet_balance_and_utxos_methods _________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab1f10>
mock_storage = <Mock id='140701480925520'>
mock_key_deriver = <Mock id='140701480856240'>

    def test_wallet_balance_and_utxos_methods(self, mock_storage, mock_key_deriver):
        """Test wallet balance and UTXO methods (covers lines 476, 541-545)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dca1430>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
____________ TestWalletFinalCoverage.test_wallet_blockchain_methods ____________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab22a0>
mock_storage = <Mock id='140702057298928'>
mock_key_deriver = <Mock id='140699927616912'>
mock_services = <Mock id='140699927612064'>

    def test_wallet_blockchain_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet blockchain-related methods (covers lines 566-568, 618, 648, 679)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:107: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff741349880>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
________ TestWalletFinalCoverage.test_wallet_transaction_status_methods ________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab1e50>
mock_storage = <Mock id='140702191045088'>
mock_key_deriver = <Mock id='140702058036736'>
mock_services = <Mock id='140702058024016'>

    def test_wallet_transaction_status_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet transaction status methods (covers lines 731, 772, 815, 858)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7c03a3650>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_______ TestWalletFinalCoverage.test_wallet_exchange_and_merkle_methods ________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab1a00>
mock_storage = <Mock id='140699917940448'>
mock_key_deriver = <Mock id='140702191175488'>
mock_services = <Mock id='140700445901936'>

    def test_wallet_exchange_and_merkle_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet exchange rate and merkle path methods (covers lines 871, 888, 912-922)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:152: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff740a0e5d0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_______________ TestWalletFinalCoverage.test_wallet_beef_methods _______________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab11f0>
mock_storage = <Mock id='140699926321136'>
mock_key_deriver = <Mock id='140699926328240'>

    def test_wallet_beef_methods(self, mock_storage, mock_key_deriver):
        """Test wallet BEEF-related methods (covers lines 933, 966, 994)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:171: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff74120d100>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_______________ TestWalletFinalCoverage.test_wallet_key_methods ________________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab0b30>
mock_storage = <Mock id='140701480857584'>
mock_key_deriver = <Mock id='140701480853072'>

    def test_wallet_key_methods(self, mock_storage, mock_key_deriver):
        """Test wallet key-related methods (covers lines 1005-1013, 1018-1025)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:190: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79db70860>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
________ TestWalletFinalCoverage.test_wallet_beef_verification_methods _________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab3da0>
mock_storage = <Mock id='140701480922352'>
mock_key_deriver = <Mock id='140701481868016'>

    def test_wallet_beef_verification_methods(self, mock_storage, mock_key_deriver):
        """Test wallet BEEF verification methods (covers lines 1072, 1085, 1093-1122)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:208: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dca10d0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
___________ TestWalletFinalCoverage.test_wallet_known_txids_methods ____________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab01d0>
mock_storage = <Mock id='140702058030688'>
mock_key_deriver = <Mock id='140701483353872'>

    def test_wallet_known_txids_methods(self, mock_storage, mock_key_deriver):
        """Test wallet known TXIDs methods (covers lines 1205, 1245, 1247)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:226: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dca2870>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
______________ TestWalletFinalCoverage.test_wallet_action_methods ______________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab3e60>
mock_storage = <Mock id='140699927339104'>
mock_key_deriver = <Mock id='140700448697056'>

    def test_wallet_action_methods(self, mock_storage, mock_key_deriver):
        """Test wallet action-related methods (covers lines 1573, 1837, 1840, 1843)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:238: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff741306240>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
____________ TestWalletFinalCoverage.test_wallet_output_operations _____________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b64230>
mock_storage = <Mock id='140702222015216'>
mock_key_deriver = <Mock id='140701483352192'>

    def test_wallet_output_operations(self, mock_storage, mock_key_deriver):
        """Test wallet output operation methods (covers lines 1907, 1910, 1913, 1962)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:262: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7413e0500>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
__________ TestWalletFinalCoverage.test_wallet_transaction_operations __________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b645c0>
mock_storage = <Mock id='140701480109264'>
mock_key_deriver = <Mock id='140701480914000'>

    def test_wallet_transaction_operations(self, mock_storage, mock_key_deriver):
        """Test wallet transaction operation methods (covers lines 1978, 1980, 1985, 2043)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:286: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79d92e8a0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
____________ TestWalletFinalCoverage.test_wallet_service_management ____________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b64980>
mock_storage = <Mock id='140701480849760'>
mock_key_deriver = <Mock id='140701479677888'>
mock_services = <Mock id='140702056598368'>

    def test_wallet_service_management(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet service management methods (covers lines 2058, 2062, 2067, 2149)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:316: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dc93e90>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
__________ TestWalletFinalCoverage.test_wallet_storage_party_methods ___________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b64d10>
mock_storage = <Mock id='140699926318880'>
mock_key_deriver = <Mock id='140700451860848'>

    def test_wallet_storage_party_methods(self, mock_storage, mock_key_deriver):
        """Test wallet storage party methods (covers lines 2152, 2228, 2231, 2303)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:346: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff76071f170>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
______________ TestWalletFinalCoverage.test_wallet_header_methods ______________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab3fb0>
mock_storage = <Mock id='140699917937760'>
mock_key_deriver = <Mock id='140701477019936'>
mock_services = <Mock id='140701477026512'>

    def test_wallet_header_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet header methods (covers lines 2306, 2382, 2385, 2440)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:370: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff740a0ed20>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
___________ TestWalletFinalCoverage.test_wallet_destruction_methods ____________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab0350>
mock_storage = <Mock id='140701479969920'>
mock_key_deriver = <Mock id='140702191423888'>

    def test_wallet_destruction_methods(self, mock_storage, mock_key_deriver):
        """Test wallet destruction methods (covers lines 2443, 2499, 2502, 2553)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:388: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dbb9850>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
__________ TestWalletFinalCoverage.test_wallet_authentication_methods __________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab0e60>
mock_storage = <Mock id='140700452549024'>
mock_key_deriver = <Mock id='140701482257200'>
mock_services = <Mock id='140702221334912'>

    def test_wallet_authentication_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet authentication methods (covers lines 2556, 2601-2619, 2646-2648)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:400: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7413216d0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_______ TestWalletFinalCoverage.test_wallet_complex_transaction_methods ________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab0e30>
mock_storage = <Mock id='140700451860848'>
mock_key_deriver = <Mock id='140702058691424'>

    def test_wallet_complex_transaction_methods(self, mock_storage, mock_key_deriver):
        """Test wallet complex transaction methods (covers lines 2679-2712, 2746, 2761)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:418: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7c9ab14f0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
___________ TestWalletFinalCoverage.test_wallet_error_handling_paths ___________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ab1910>
mock_storage = <Mock id='140699926316480'>
mock_key_deriver = <Mock id='140701481866240'>

    def test_wallet_error_handling_paths(self, mock_storage, mock_key_deriver):
        """Test wallet error handling paths (covers lines 2780, 2792, 2827, 2830)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:433: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7c9ab10d0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_____________ TestWalletFinalCoverage.test_wallet_network_methods ______________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9ae7110>
mock_storage = <Mock id='140701480918032'>
mock_key_deriver = <Mock id='140701480109264'>
mock_services = <Mock id='140702217814624'>

    def test_wallet_network_methods(self, mock_storage, mock_key_deriver, mock_services):
        """Test wallet network methods (covers lines 2845, 2871, 2883-2893, 2922)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:447: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dca2840>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_______ TestWalletFinalCoverage.test_wallet_advanced_transaction_methods _______

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b64b00>
mock_storage = <Mock id='140701483360448'>
mock_key_deriver = <Mock id='140699919051056'>

    def test_wallet_advanced_transaction_methods(self, mock_storage, mock_key_deriver):
        """Test wallet advanced transaction methods (covers lines 3006, 3011, 3067-3086)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:471: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dca3950>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
_________ TestWalletFinalCoverage.test_wallet_beef_processing_methods __________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b64440>
mock_storage = <Mock id='140701479922688'>
mock_key_deriver = <Mock id='140701479924848'>

    def test_wallet_beef_processing_methods(self, mock_storage, mock_key_deriver):
        """Test wallet BEEF processing methods (covers lines 3119-3138, 3158-3169, 3195)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:485: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff79dbad4c0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
________ TestWalletFinalCoverage.test_wallet_final_transaction_methods _________

self = <test_wallet_final_coverage.TestWalletFinalCoverage object at 0x7ff7c9b65220>
mock_storage = <Mock id='140699919042416'>
mock_key_deriver = <Mock id='140700452043664'>

    def test_wallet_final_transaction_methods(self, mock_storage, mock_key_deriver):
        """Test wallet final transaction methods (covers lines 3229-3241, 3271-3274, 3294-3305, 3328-3330)."""
>       with patch('bsv_wallet_toolbox.wallet.Wallet._initialize_beef'):

tests/wallet/test_wallet_final_coverage.py:499: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/lib/python3.12/unittest/mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7ff7c0173980>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <class 'bsv_wallet_toolbox.wallet.Wallet'> does not have the attribute '_initialize_beef'

/usr/lib/python3.12/unittest/mock.py:1431: AttributeError
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                                                               Stmts   Miss   Cover   Missing
---------------------------------------------------------------------------------------------------------------------------------
src/bsv_wallet_toolbox/__init__.py                                                                     8      0 100.00%
src/bsv_wallet_toolbox/abi/__init__.py                                                                 2      0 100.00%
src/bsv_wallet_toolbox/abi/serializer.py                                                             145      5  96.55%   187, 229, 237, 242, 250
src/bsv_wallet_toolbox/auth_fetch.py                                                                  51     38  25.49%   38-40, 59-68, 88-142, 146-147, 151, 155
src/bsv_wallet_toolbox/brc29/__init__.py                                                               4      0 100.00%
src/bsv_wallet_toolbox/brc29/address.py                                                               26      4  84.62%   65-66, 135-136
src/bsv_wallet_toolbox/brc29/template.py                                                              42     17  59.52%   57-58, 100-101, 117, 132-136, 150, 186-193
src/bsv_wallet_toolbox/brc29/types.py                                                                 18      1  94.44%   50
src/bsv_wallet_toolbox/brc29/utils.py                                                                 61     17  72.13%   43-46, 50, 55, 87-88, 98-102, 106, 111, 158-159
src/bsv_wallet_toolbox/errors/__init__.py                                                              2      0 100.00%
src/bsv_wallet_toolbox/errors/wallet_errors.py                                                        78      0 100.00%
src/bsv_wallet_toolbox/local_kv_store.py                                                              24      5  79.17%   75-76, 80-85
src/bsv_wallet_toolbox/manager/__init__.py                                                             4      0 100.00%
src/bsv_wallet_toolbox/manager/permission_token_parser.py                                             98     42  57.14%   126-175, 224, 253-258, 264, 267, 292, 311-331, 350-373
src/bsv_wallet_toolbox/manager/permission_types.py                                                    32      0 100.00%
src/bsv_wallet_toolbox/manager/simple_wallet_manager.py                                              132     65  50.76%   72-73, 86-87, 97-104, 113-116, 129-134, 148, 169, 181-182, 191-195, 199-200, 204-205, 209-210, 215, 220, 225, 230, 235, 240, 245, 250, 255, 259-260, 264-265, 270, 275, 279-280, 284-285, 289-290, 294-295, 299-300, 304-305, 309-310, 314-315, 320, 325
src/bsv_wallet_toolbox/manager/wallet_interface.py                                                    28     28   0.00%   9-402
src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py                                        1176    390  66.84%   178, 181, 205-207, 285-286, 337-339, 357-365, 437-439, 458-470, 540-542, 560-571, 589-594, 608-622, 658-667, 691, 713, 736, 758-772, 784-798, 811-825, 837-851, 862-875, 891-909, 922-934, 947-950, 1002, 1005, 1018, 1033, 1038, 1074-1075, 1150, 1155-1157, 1162, 1166, 1168, 1170, 1172, 1174, 1176, 1180, 1185, 1192-1193, 1197, 1204, 1212, 1222-1226, 1230-1238, 1260-1268, 1283, 1347, 1350-1353, 1360-1367, 1402, 1406, 1410, 1458-1474, 1481-1488, 1511-1520, 1539-1548, 1564, 1569-1571, 1625, 1670-1690, 1705-1716, 1731, 1743, 1782-1798, 1824, 1828-1834, 1864-1872, 1876-1882, 1907-1927, 1940-1969, 1982-1998, 2027, 2050, 2054-2109, 2159-2163, 2167-2171, 2305, 2328-2329, 2349-2350, 2370, 2375, 2393, 2416, 2444, 2465, 2486, 2509, 2532, 2558-2562, 2581-2585, 2601, 2607, 2625, 2631, 2649, 2655, 2673, 2692, 2697, 2715, 2736, 2761, 2788, 2811, 2935, 2975, 2980, 3003, 3037, 3099, 3154, 3159, 3290, 3300-3306, 3310-3318, 3322-3331
src/bsv_wallet_toolbox/manager/wallet_settings_manager.py                                             40      3  92.50%   160, 169-170
src/bsv_wallet_toolbox/monitor/__init__.py                                                             4      0 100.00%
src/bsv_wallet_toolbox/monitor/monitor.py                                                            154     43  72.08%   117-119, 126-147, 162, 179-181, 190-192, 207, 244-248, 258-263, 280-283, 303-304, 307-308, 323, 326-327
src/bsv_wallet_toolbox/monitor/monitor_daemon.py                                                      38     24  36.84%   27-29, 37-42, 50-53, 57-72
src/bsv_wallet_toolbox/monitor/tasks/__init__.py                                                      13      0 100.00%
src/bsv_wallet_toolbox/monitor/tasks/task_check_for_proofs.py                                        106     35  66.98%   75, 85, 94, 101-103, 109-112, 119-120, 124-125, 134-135, 138-139, 151-155, 159-169, 176-177, 213-216
src/bsv_wallet_toolbox/monitor/tasks/task_check_no_sends.py                                           24     18  25.00%   27-28, 32-57
src/bsv_wallet_toolbox/monitor/tasks/task_clock.py                                                    22      0 100.00%
src/bsv_wallet_toolbox/monitor/tasks/task_fail_abandoned.py                                           48     26  45.83%   33-34, 49, 53-81, 84
src/bsv_wallet_toolbox/monitor/tasks/task_monitor_call_history.py                                     14      2  85.71%   27-28
src/bsv_wallet_toolbox/monitor/tasks/task_new_header.py                                               23      0 100.00%
src/bsv_wallet_toolbox/monitor/tasks/task_purge.py                                                    23      3  86.96%   43-46, 56
src/bsv_wallet_toolbox/monitor/tasks/task_reorg.py                                                    63     43  31.75%   42-50, 59-133
src/bsv_wallet_toolbox/monitor/tasks/task_review_status.py                                            24      2  91.67%   41-42
src/bsv_wallet_toolbox/monitor/tasks/task_send_waiting.py                                             62      9  85.48%   57, 70-76, 89, 94, 121
src/bsv_wallet_toolbox/monitor/tasks/task_sync_when_idle.py                                           13      3  76.92%   47-49
src/bsv_wallet_toolbox/monitor/tasks/task_un_fail.py                                                  68     42  38.24%   28-31, 44, 49, 54-80, 84, 92-127
src/bsv_wallet_toolbox/monitor/wallet_monitor_task.py                                                 16      1  93.75%   51
src/bsv_wallet_toolbox/rpc/__init__.py                                                                 4      0 100.00%
src/bsv_wallet_toolbox/rpc/json_rpc_client.py                                                        145     36  75.17%   123-124, 127-128, 184-187, 264-266, 301-305, 342-343, 347, 376-377, 393-394, 410-411, 427-428, 439-440, 541-542, 575-576, 592-593, 609-610, 621-622
src/bsv_wallet_toolbox/rpc/json_rpc_server.py                                                        119     79  33.61%   84-86, 94, 223, 246-248, 261, 269, 291-353, 378-398, 449-526, 565-577
src/bsv_wallet_toolbox/sdk/__init__.py                                                                 3      0 100.00%
src/bsv_wallet_toolbox/sdk/privileged_key_manager.py                                                 366     41  88.80%   61, 71-74, 80, 151-153, 157-158, 183, 198, 287, 292, 294, 338, 356, 358, 405, 424, 426, 445-446, 482, 484, 498-500, 538, 540, 590, 592, 635, 637, 766-768, 784, 790, 813, 829-830
src/bsv_wallet_toolbox/sdk/types.py                                                                   12      0 100.00%
src/bsv_wallet_toolbox/services/__init__.py                                                            8      0 100.00%
src/bsv_wallet_toolbox/services/cache_manager.py                                                      30      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/__init__.py                                               7      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/__init__.py                                  10      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/api/__init__.py                               3      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/api/block_header_api.py                      37      4  89.19%   106, 120, 134, 148
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/api/chaintracks_client_api.py                40      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_headers_container.py                    84     84   0.00%   8-202
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_ingestor_cdn.py                         31     16  48.39%   51-73, 81-85
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_ingestor_factory.py                     13      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_ingestor_interface.py                   19      6  68.42%   63-66, 70-71
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_ingestor_woc.py                         58     41  29.31%   51-80, 88-124, 132-138
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/bulk_manager.py                              28      8  71.43%   43, 55, 67, 76, 93, 102, 111, 126
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/cdn_reader.py                                57     31  45.61%   29-32, 44-53, 58-59, 115-125, 139-149
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/chain_work.py                                44     17  61.36%   28, 45-48, 74, 85-90, 102-104, 108, 137-138
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/chaintracks.py                               71      6  91.55%   30-32, 73, 121, 303
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/core_service.py                             250     75  70.00%   63-88, 92-97, 123-125, 186, 209-221, 226-230, 244, 302-308, 312-313, 323, 327, 331, 342-344, 362-369, 381-385, 403-404, 411-416, 431-432, 450-451
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/ingest.py                                    22      8  63.64%   29-30, 69-70, 104-105, 121-122
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/internal.py                                  44     44   0.00%   8-112
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/live_ingestor_factory.py                      9      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/live_ingestor_interface.py                   11      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/live_ingestor_woc_poll.py                    81     33  59.26%   90-95, 105-107, 126-134, 145-173
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/models.py                                    81     12  85.19%   106-121, 124, 142-143, 146
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/models_new.py                                81     81   0.00%   8-323
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/options.py                                    5      1  80.00%   46
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/storage/__init__.py                           2      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/storage/knex.py                              25     12  52.00%   21-23, 41-42, 55, 59, 63, 67, 75, 87, 95
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/storage/sqlalchemy_storage.py               145     84  42.07%   43, 53, 58-60, 70-80, 96, 110-122, 130-145, 157-165, 177-185, 200-202, 213-219, 242-245, 267-270, 283-293, 304-312, 324-339
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/__init__.py                              6      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/block_header_utilities.py               51      5  90.20%   56, 116, 183-193
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/bulk_file_data_manager.py               51     34  33.33%   36-39, 44-46, 64-67, 86-95, 105-109, 124, 135, 146-151, 164, 180-183
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/chaintracks_fs.py                       31     17  45.16%   30, 45-46, 56-57, 69, 79-82, 100-113
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/height_range.py                         94     26  72.34%   43, 65-70, 87, 109-111, 122-124, 217-226, 245, 253-255, 267, 274
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/util/single_writer_multi_reader_lock.py      45      0 100.00%
src/bsv_wallet_toolbox/services/chaintracker/chaintracks/woc_client.py                                96     50  47.92%   25-39, 44-50, 111, 129-143, 164-165, 185-186, 200-210, 224-231
src/bsv_wallet_toolbox/services/chaintracker/chaintracks_chain_tracker.py                             17      1  94.12%   99
src/bsv_wallet_toolbox/services/chaintracker/chaintracks_service.py                                   90     66  26.67%   106-110, 130-149, 159-230, 238-245, 255, 265-266, 279-283, 296-300, 307
src/bsv_wallet_toolbox/services/chaintracker/chaintracks_service_client.py                           125     91  27.20%   67-70, 77, 82, 108-117, 132-158, 174-177, 192-204, 214, 228-232, 245-249, 260-261, 274-282, 301-310, 325-333, 347-354, 364-365, 379-380, 393, 401-409
src/bsv_wallet_toolbox/services/chaintracker/chaintracks_storage.py                                  176     90  48.86%   208-213, 235-236, 248-257, 290-326, 339-361, 379-409, 421-450, 463-484, 493-498
src/bsv_wallet_toolbox/services/merkle_path_utils.py                                                  25      0 100.00%
src/bsv_wallet_toolbox/services/providers/__init__.py                                                  5      0 100.00%
src/bsv_wallet_toolbox/services/providers/arc.py                                                     228     56  75.44%   166-170, 195, 198, 201, 204, 218, 253-254, 305-308, 314-315, 326-327, 346-350, 414-416, 425-426, 472-474, 504-539
src/bsv_wallet_toolbox/services/providers/bitails.py                                                 207    110  46.86%   156, 195-209, 228-384, 429-460, 483-515
src/bsv_wallet_toolbox/services/providers/exchange_rates.py                                           54     12  77.78%   33-34, 86, 92, 110, 135-145
src/bsv_wallet_toolbox/services/providers/whatsonchain.py                                            204    115  43.63%   82, 92, 103, 113, 123-127, 135-136, 152, 160, 174-177, 204-226, 236, 246, 256, 266, 276, 286, 306, 321-335, 426-447, 483, 485, 491, 513-520, 546-577, 601-602, 642-649
src/bsv_wallet_toolbox/services/service_collection.py                                                183     38  79.23%   183, 188, 193, 228, 236-239, 244, 254, 258, 275, 363-373, 412-473
src/bsv_wallet_toolbox/services/service_queue.py                                                      75      9  88.00%   36, 40, 81, 97, 130, 136-137, 157, 162
src/bsv_wallet_toolbox/services/services.py                                                          514     94  81.71%   421, 474, 478, 482, 490, 551, 597-598, 602, 624-626, 629-631, 694-695, 703, 708, 738-740, 802, 900, 912, 924-936, 945, 1000, 1011, 1022-1034, 1061-1062, 1070, 1081, 1094, 1104-1107, 1147-1152, 1173-1191, 1229-1234, 1240, 1281-1282, 1324, 1327-1352
src/bsv_wallet_toolbox/services/wallet_services.py                                                    13      0 100.00%
src/bsv_wallet_toolbox/services/wallet_services_options.py                                            42      0 100.00%
src/bsv_wallet_toolbox/signer/__init__.py                                                              2      0 100.00%
src/bsv_wallet_toolbox/signer/methods.py                                                             396    168  57.58%   107-108, 173, 196-198, 207-260, 305-316, 322-362, 374-387, 398-402, 522-556, 670, 711-712, 777-780, 822-851, 873, 877-896, 900-901, 914, 948-995, 1019, 1026, 1038-1083
src/bsv_wallet_toolbox/single_writer_multi_reader_lock.py                                             45      0 100.00%
src/bsv_wallet_toolbox/storage/__init__.py                                                             4      0 100.00%
src/bsv_wallet_toolbox/storage/background_broadcaster.py                                              73     73   0.00%   9-166
src/bsv_wallet_toolbox/storage/create_action.py                                                      209     59  71.77%   125, 128-129, 134-135, 162, 166, 170, 192, 195, 198-199, 202, 214-232, 291-295, 300, 304, 315, 410-411, 447-462, 478-482, 497-500
src/bsv_wallet_toolbox/storage/crud.py                                                               361     76  78.95%   240, 252-254, 257-259, 262-263, 266-269, 272, 286, 303-305, 308-310, 313-314, 317-320, 323, 334, 337, 354-356, 359-360, 363-366, 369, 377, 380, 383, 390-392, 395-397, 400-402, 405-406, 409-412, 415, 442, 447, 452, 493, 498, 502-503, 513, 541, 545-546, 552, 556, 589-590, 604-605
src/bsv_wallet_toolbox/storage/db.py                                                                  25      1  96.00%   53
src/bsv_wallet_toolbox/storage/entities.py                                                           923     68  92.63%   404, 605, 719, 738, 741, 746, 763, 788, 875, 897, 913, 920, 928, 939, 954, 959, 966, 1046-1047, 1070, 1074, 1078, 1107, 1127-1130, 1134, 1140, 1143-1144, 1150, 1154-1155, 1165, 1168-1170, 1177, 1186-1200, 1294, 1327, 1375, 1398, 1422, 1466, 1486, 1558, 1562, 1587, 1671, 1682-1684, 1689, 1733, 1794, 1826
src/bsv_wallet_toolbox/storage/methods.py                                                            539    160  70.32%   33-34, 38-39, 197-210, 248, 251, 346, 350, 368-369, 403-405, 413-426, 433-442, 446-455, 460-469, 477-486, 490-512, 542, 546, 568-572, 585-586, 590-600, 607-620, 625-641, 671, 684-685, 708-727, 758, 802, 837-877, 881, 883, 888, 901-911, 916-947, 1030-1032, 1069-1088, 1103-1119, 1167-1172, 1178-1183, 1201, 1203, 1282-1283, 1295-1297, 1336, 1342-1352
src/bsv_wallet_toolbox/storage/models.py                                                             207      0 100.00%
src/bsv_wallet_toolbox/storage/provider.py                                                          1774    580  67.31%   314-319, 331-335, 363, 395-396, 429-432, 458-490, 595-602, 608-611, 631-632, 640, 679-694, 710-744, 757-759, 770-787, 798-799, 812, 833-841, 863, 868, 872, 898, 907-933, 936-937, 940, 947, 955, 986, 1017, 1019, 1025, 1027, 1041-1043, 1144-1162, 1185-1186, 1204, 1233, 1235, 1237, 1305, 1310-1312, 1368, 1419, 1421, 1640-1643, 1709-1713, 1717, 1735-1736, 1748-1754, 1758, 1762-1770, 1782, 1819, 1999-2002, 2009-2010, 2019, 2029, 2033, 2047-2051, 2082, 2164-2176, 2227, 2260, 2314, 2316, 2320, 2322, 2354, 2356, 2452, 2464, 2550, 2597-2600, 2633, 2646-2649, 2694-2697, 2729, 2742-2745, 2822, 2838, 2895, 2957-2976, 3012, 3015, 3018, 3030, 3063, 3095, 3104, 3107, 3135-3137, 3177-3185, 3204, 3236-3260, 3280-3295, 3327, 3330, 3349-3351, 3354-3356, 3465, 3470, 3500, 3530-3531, 3557-3559, 3579-3587, 3615, 3649, 3667, 3676-3679, 3715, 3746-3755, 3766-3813, 3829-3835, 3851, 3869-3872, 3893, 3913-3914, 3917, 3922-3924, 3933-3939, 3978, 4001, 4022-4025, 4041, 4069, 4076, 4185, 4190, 4196-4209, 4214, 4223, 4229-4281, 4285-4313, 4317-4332, 4336-4355, 4359-4376, 4380-4409, 4413-4433, 4437-4469, 4473-4483, 4487-4536, 4540-4563, 4567-4587, 4606-4615, 4627-4628, 4639-4640, 4651-4652, 4663-4664, 4675-4676, 4687-4688, 4699-4700, 4711-4712, 4738-4747
src/bsv_wallet_toolbox/storage/specifications.py                                                     971    130  86.61%   407, 516, 608, 722, 756-759, 763-766, 773-784, 788-793, 878, 900, 913-991, 1047-1050, 1070-1073, 1110, 1137, 1146-1147, 1157-1158, 1162-1163, 1167-1173, 1180, 1189, 1194, 1203, 1297, 1330, 1401, 1425, 1489, 1590, 1610, 1674, 1692, 1756, 1787-1795, 1802-1811, 1820-1823
src/bsv_wallet_toolbox/storage/sync_processor.py                                                     176     69  60.80%   100-103, 129-135, 148-149, 155-161, 167-172, 193-194, 200-208, 214-222, 228-236, 242-250, 256-264, 270-275, 281-286, 293, 300
src/bsv_wallet_toolbox/types.py                                                                        8      0 100.00%
src/bsv_wallet_toolbox/utils/__init__.py                                                              88      3  96.59%   207-209
src/bsv_wallet_toolbox/utils/aggregate_results.py                                                     75     11  85.33%   90-97, 183-186
src/bsv_wallet_toolbox/utils/buffer_utils.py                                                          55      0 100.00%
src/bsv_wallet_toolbox/utils/change_distribution.py                                                   36      0 100.00%
src/bsv_wallet_toolbox/utils/config.py                                                                64      1  98.44%   237
src/bsv_wallet_toolbox/utils/contains_utxo.py                                                          9      0 100.00%
src/bsv_wallet_toolbox/utils/crypto_utils.py                                                          58     30  48.28%   30, 61, 64, 78, 126, 137, 150, 163-164, 189-199, 235-264, 278-279
src/bsv_wallet_toolbox/utils/extract_raw_txs.py                                                       18      0 100.00%
src/bsv_wallet_toolbox/utils/format_utils.py                                                          89      0 100.00%
src/bsv_wallet_toolbox/utils/generate_change_sdk.py                                                  172     22  87.21%   18-24, 152, 190-202, 212, 221-222, 325, 329, 347-349
src/bsv_wallet_toolbox/utils/identity_utils.py                                                       101     15  85.15%   185-187, 247-281
src/bsv_wallet_toolbox/utils/merkle_path_utils.py                                                     32      0 100.00%
src/bsv_wallet_toolbox/utils/parse_tx_script_offsets.py                                               53      1  98.11%   138
src/bsv_wallet_toolbox/utils/proof_for_merkle_path.py                                                 32      3  90.62%   11, 17, 44
src/bsv_wallet_toolbox/utils/random_utils.py                                                          53      0 100.00%
src/bsv_wallet_toolbox/utils/randomizer.py                                                            58      1  98.28%   121
src/bsv_wallet_toolbox/utils/reader_uint8array.py                                                     47      0 100.00%
src/bsv_wallet_toolbox/utils/satoshi.py                                                               64     11  82.81%   101, 120-123, 143, 165-169
src/bsv_wallet_toolbox/utils/script_hash.py                                                           11      0 100.00%
src/bsv_wallet_toolbox/utils/stamp_log.py                                                             57      1  98.25%   81
src/bsv_wallet_toolbox/utils/transaction_id.py                                                         6      0 100.00%
src/bsv_wallet_toolbox/utils/ttl_cache.py                                                             80     26  67.50%   59-64, 89-93, 97-98, 102-103, 121-122, 125, 148-150, 154-156, 174-177
src/bsv_wallet_toolbox/utils/tx_size.py                                                               41      5  87.80%   17, 32-33, 41-42
src/bsv_wallet_toolbox/utils/validation.py                                                           697    107  84.65%   73, 127, 173, 248, 274, 280-282, 284-286, 290, 322, 363, 440, 449-450, 472, 475, 483, 497, 499, 526, 573, 587, 614, 617, 620, 628, 661, 693, 705, 708, 712, 723, 751, 754, 777, 826, 873, 887, 889, 901, 910, 933, 963, 975, 981, 989, 994, 1003, 1014, 1021, 1024, 1043, 1050, 1056, 1059, 1063, 1066, 1070, 1073, 1076, 1089, 1100, 1103, 1107, 1119, 1126, 1130, 1139, 1142, 1146, 1149, 1158, 1174, 1182, 1185, 1189, 1192, 1201, 1211, 1217, 1221, 1228, 1230, 1237, 1243, 1246, 1250, 1253, 1266, 1279, 1291, 1295-1304, 1312-1316
src/bsv_wallet_toolbox/wallet.py                                                                     901    219  75.69%   97, 103, 109-110, 241, 292, 303, 310-313, 373, 397, 418, 423-440, 444-448, 476, 541-545, 566-568, 618, 648, 679, 731, 772, 815, 858, 871, 888, 912-922, 933, 966, 994, 1005-1013, 1018-1025, 1072, 1085, 1093-1122, 1205, 1245, 1247, 1573, 1837, 1840, 1843, 1907, 1910, 1913, 1962, 1978, 1980, 1985, 2043, 2058, 2062, 2067, 2149, 2152, 2228, 2231, 2303, 2306, 2382, 2385, 2440, 2443, 2499, 2502, 2553, 2556, 2601-2619, 2646-2648, 2679-2712, 2746, 2761, 2780, 2792, 2827, 2830, 2845, 2871, 2883-2893, 2922, 3006, 3011, 3067-3086, 3119-3138, 3158-3169, 3195, 3229-3241, 3271-3274, 3294-3305, 3328-3330
---------------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                              15573   4239  72.78%
Coverage HTML written to dir htmlcov
=========================== short test summary info ============================
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_field_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_basket_merge_new_raises_error
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_map_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_req_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_sync_state_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_transaction_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_map_constructor_with_api_object
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_merge_new_raises_error
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_req_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_req_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_sync_state_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_sync_state_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_transaction_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_map_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_field_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_field_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_commission_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_to_api_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_map_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_map_constructor_defaults
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_proven_tx_req_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_sync_state_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_certificate_field_merge_new_raises_error
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_tx_label_map_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_merge_existing_method
FAILED tests/storage/test_storage_entities_coverage.py::TestEntityCoverage::test_output_tag_map_merge_existing_method
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_generate_change_with_single_input
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_generate_change_with_multiple_inputs
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_actions_with_status_filter
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_actions_with_txid_filter
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_outputs_with_pagination
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_outputs_with_spent_filter
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_outputs_with_basket_filter
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_outputs_include_labels
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_outputs_include_tags
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_certificates_with_limit_offset
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_internalize_action_with_transaction
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_beef_for_transaction_with_proven_tx
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_beef_for_transaction_with_merkle_path
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_attempt_to_post_reqs_to_network_no_beef
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_aged_limit
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_purge_data_with_date_params
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_purge_data_with_count_limits
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_sync_chunk_with_entity_filters
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_process_action_with_send_with
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_process_action_with_delayed_flag
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_list_actions_with_date_filters
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_internalize_action_with_labels
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_beef_for_transaction_error_handling
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_attempt_to_post_reqs_to_network_http_error
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_attempt_to_post_reqs_to_network_update_failure
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_abandoned_actions
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_proven_tx_reqs
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_purge_data_with_combined_filters
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_sync_chunk_with_version_filtering
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_monitor_tasks
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_abandoned_proofs
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_purge_data_with_entity_specific_limits
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_sync_chunk_with_empty_results
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_review_status_with_no_updates_needed
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_purge_data_with_invalid_params
FAILED tests/storage/test_storage_methods_high_impact_coverage.py::TestStorageMethodsHighImpactCoverage::test_get_sync_chunk_with_large_limit
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_initialization_with_minimal_services
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_balance_and_utxos_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_blockchain_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_transaction_status_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_exchange_and_merkle_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_beef_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_key_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_beef_verification_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_known_txids_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_action_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_output_operations
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_transaction_operations
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_service_management
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_storage_party_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_header_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_destruction_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_authentication_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_complex_transaction_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_error_handling_paths
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_network_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_advanced_transaction_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_beef_processing_methods
FAILED tests/wallet/test_wallet_final_coverage.py::TestWalletFinalCoverage::test_wallet_final_transaction_methods
= 98 failed, 3286 passed, 90 skipped, 5 xfailed, 1 xpassed in 104.21s (0:01:44) =
