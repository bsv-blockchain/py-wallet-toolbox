============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/bin/python
cachedir: .pytest_cache
rootdir: /home/sneakyfox/TOOLBOX/py-wallet-toolbox
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 3109 items

tests/abi/test_serializer.py::TestSerializeRequest::test_serialize_known_method PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeRequest::test_serialize_unknown_method PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeRequest::test_serialize_method_with_args_ignored PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeRequest::test_deserialize_known_method PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeRequest::test_deserialize_unknown_method PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeRequest::test_deserialize_empty_data_raises_error PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeRequest::test_deserialize_single_byte_data PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeResponse::test_serialize_version_response PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeResponse::test_serialize_network_response PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeResponse::test_serialize_signature_response PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeResponse::test_serialize_unknown_response PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeResponse::test_deserialize_empty_data PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeResponse::test_deserialize_simple_dict PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeDict::test_serialize_empty_dict PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeDict::test_serialize_simple_dict PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeDict::test_serialize_multiple_entries PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeDict::test_deserialize_empty_data PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeDict::test_deserialize_truncated_key_length PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_string PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_boolean_true PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_boolean_false PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_integer PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_byte_array PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_generic_list PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_dict PASSED [  0%]
tests/abi/test_serializer.py::TestSerializeValue::test_serialize_unsupported_type_raises_error PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_string PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_boolean_true PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_integer PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_byte_array PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_list PASSED [  0%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_dict PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_unknown_type_raises_error PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeValue::test_deserialize_truncated_data_raises_error PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeLength::test_serialize_small_length PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeLength::test_serialize_medium_length PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeLength::test_serialize_large_length PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeLength::test_deserialize_small_length PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeLength::test_deserialize_medium_length PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeLength::test_deserialize_large_length PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeLength::test_deserialize_truncated_data_raises_error PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeVarint::test_serialize_small_int PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeVarint::test_serialize_medium_int PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeVarint::test_serialize_large_int PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeVarint::test_serialize_zero PASSED [  1%]
tests/abi/test_serializer.py::TestSerializeVarint::test_serialize_negative_raises_error PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_small_int PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_medium_int PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_large_int PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_zero PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_truncated_data PASSED [  1%]
tests/abi/test_serializer.py::TestDeserializeVarint::test_deserialize_max_length_varint PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthentication::test_import_auth_module PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthentication::test_create_auth_context PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthentication::test_verify_credentials PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthorization::test_check_permission PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthorization::test_require_permission PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthorization::test_has_role PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthenticationErrors::test_invalid_credentials PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthenticationErrors::test_missing_permission PASSED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthContextMethods::test_get_user_id SKIPPED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthContextMethods::test_get_permissions SKIPPED [  1%]
tests/authentication/test_authentication_coverage.py::TestAuthContextMethods::test_add_permission SKIPPED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientCreation::test_return_valid_address_with_hex_string_as_sender_public_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientCreation::test_return_valid_address_with_ec_publickey_as_sender_public_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientCreation::test_return_valid_address_with_sender_key_deriver_as_sender_public_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientCreation::test_return_valid_address_with_ec_privatekey_as_recipient_private_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientCreation::test_return_testnet_address_created_with_brc29_by_recipient PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_sender_key_is_empty PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_sender_key_parsing_fails PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_keyid_is_invalid PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_recipient_key_is_empty PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_recipient_key_parsing_fails PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_nil_is_passed_as_sender_public_key_deriver PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_nil_is_passed_as_sender_public_key PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_nil_is_passed_as_recipient_private_key_deriver PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressByRecipientErrors::test_return_error_when_nil_is_passed_as_recipient_private_key PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_valid_address_created_with_brc28_with_hex_string_as_sender_private_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_valid_address_created_with_brc28_with_wif_as_sender_private_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_valid_address_created_with_brc28_with_ec_privatekey_as_sender_private_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_valid_address_created_with_brc28_with_key_deriver_as_sender_private_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_valid_address_created_with_brc28_with_ec_publickey_as_receiver_public_key_source PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressCreation::test_return_testnet_address_created_with_brc29 PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_sender_key_is_empty PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_sender_key_parsing_fails PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_keyid_is_invalid PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_recipient_key_is_empty PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_recipient_key_parsing_fails PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_nil_is_passed_as_sender_private_key_deriver PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_nil_is_passed_as_sender_private_key PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_nil_is_passed_as_recipient_public_key_deriver PASSED [  2%]
tests/brc29/test_brc29_address.py::TestBRC29AddressErrors::test_return_error_when_nil_is_passed_as_recipient_public_key PASSED [  2%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_should_lock_with_p2pkh_and_brc29_calculated_address PASSED [  2%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_key_id_is_invalid PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_nil_is_passed_as_sender_private_key_deriver PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_nil_is_passed_as_sender_private_key PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_nil_is_passed_as_recipient_public_key_deriver PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_nil_is_passed_as_recipient_public_key PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_sender_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_sender_key_parsing_fails PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_keyid_is_invalid PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_recipient_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLock::test_return_error_when_recipient_key_parsing_fails PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_should_lock_with_p2pkh_and_brc29_calculated_address_self PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_key_id_is_invalid_self PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_nil_is_passed_as_sender_public_key_deriver PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_nil_is_passed_as_sender_public_key PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_nil_is_passed_as_recipient_private_key_deriver PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_nil_is_passed_as_recipient_private_key PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_sender_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_sender_key_parsing_fails PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_keyid_is_invalid PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_recipient_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateLockForSelf::test_return_error_when_recipient_key_parsing_fails PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_unlock_the_output_locked_with_brc29_locker PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_estimate_unlocking_script_length PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_return_error_when_sender_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_return_error_when_sender_key_parsing_fails PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_return_error_when_keyid_is_invalid PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_return_error_when_recipient_key_is_empty PASSED [  3%]
tests/brc29/test_brc29_template.py::TestBRC29TemplateUnlock::test_return_error_when_recipient_key_parsing_fails PASSED [  3%]
tests/certificates/test_certificate_life_cycle.py::TestCertificateLifeCycle::test_complete_flow_mastercertificate_and_verifiablecertificate SKIPPED [  3%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksService::test_import_chaintracks_service PASSED [  3%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksService::test_create_chaintracks_service PASSED [  3%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksServiceClient::test_import_chaintracks_client PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksServiceClient::test_create_chaintracks_client PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksServiceClient::test_client_get_header PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksStorage::test_import_chaintracks_storage PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksStorage::test_create_chaintracks_storage PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksStorage::test_storage_save_header PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksStorage::test_storage_get_header PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksIntegration::test_service_with_client PASSED [  4%]
tests/chaintracker/test_chaintracks_coverage.py::TestChaintracksIntegration::test_service_with_storage PASSED [  4%]
tests/chaintracks/test_chain_tracker.py::TestChaintracksChainTracker::test_test SKIPPED [  4%]
tests/chaintracks/test_chain_tracker.py::TestChaintracksChainTracker::test_main SKIPPED [  4%]
tests/chaintracks/test_chaintracks.py::TestChaintracks::test_nodb_mainnet PASSED [  4%]
tests/chaintracks/test_chaintracks.py::TestChaintracks::test_nodb_testnet PASSED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_getchain SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_getinfo SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_getpresentheight SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_getheaders SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_findchaintipheader SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_findchaintiphash SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_findheaderforheight SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_addheader SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_subscribeheaders SKIPPED [  4%]
tests/chaintracks/test_client_api.py::TestChaintracksClientApi::test_subscribereorgs SKIPPED [  4%]
tests/chaintracks/test_fetch.py::TestChaintracksFetch::test_fetchjson SKIPPED [  4%]
tests/chaintracks/test_fetch.py::TestChaintracksFetch::test_download SKIPPED [  4%]
tests/chaintracks/test_fetch.py::TestChaintracksFetch::test_download_716 SKIPPED [  4%]
tests/chaintracks/test_fetch.py::TestChaintracksFetch::test_download_717 SKIPPED [  4%]
tests/chaintracks/test_service_client.py::TestChaintracksServiceClient::test_mainnet_findheaderforheight SKIPPED [  4%]
tests/chaintracks/test_service_client.py::TestChaintracksServiceClient::test_testnet_findheaderforheight SKIPPED [  4%]
tests/constants/test_constants_coverage.py::TestNetworkConstants::test_import_network_constants PASSED [  4%]
tests/constants/test_constants_coverage.py::TestNetworkConstants::test_mainnet_constants PASSED [  4%]
tests/constants/test_constants_coverage.py::TestNetworkConstants::test_testnet_constants PASSED [  5%]
tests/constants/test_constants_coverage.py::TestTransactionConstants::test_max_tx_size PASSED [  5%]
tests/constants/test_constants_coverage.py::TestTransactionConstants::test_dust_limit PASSED [  5%]
tests/constants/test_constants_coverage.py::TestTransactionConstants::test_sequence_final PASSED [  5%]
tests/constants/test_constants_coverage.py::TestScriptConstants::test_op_codes PASSED [  5%]
tests/constants/test_constants_coverage.py::TestScriptConstants::test_op_return PASSED [  5%]
tests/constants/test_constants_coverage.py::TestCryptographicConstants::test_hash_lengths PASSED [  5%]
tests/constants/test_constants_coverage.py::TestCryptographicConstants::test_key_lengths PASSED [  5%]
tests/constants/test_constants_coverage.py::TestFeeConstants::test_default_fee_rate PASSED [  5%]
tests/constants/test_constants_coverage.py::TestFeeConstants::test_min_relay_fee PASSED [  5%]
tests/constants/test_constants_coverage.py::TestBlockchainConstants::test_block_time PASSED [  5%]
tests/constants/test_constants_coverage.py::TestBlockchainConstants::test_difficulty_adjustment PASSED [  5%]
tests/constants/test_constants_coverage.py::TestBlockchainConstants::test_max_block_size PASSED [  5%]
tests/entities/test_entities_coverage.py::TestUserEntity::test_import_user_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestUserEntity::test_create_user_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestOutputEntity::test_import_output_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestOutputEntity::test_create_output_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestTransactionEntity::test_import_transaction_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestTransactionEntity::test_create_transaction_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestCertificateEntity::test_import_certificate_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestCertificateEntity::test_create_certificate_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestActionEntity::test_import_action_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestActionEntity::test_create_action_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestOutputBasketEntity::test_import_output_basket_entity PASSED [  5%]
tests/entities/test_entities_coverage.py::TestOutputBasketEntity::test_create_output_basket_instance PASSED [  5%]
tests/entities/test_entities_coverage.py::TestEntityRelationships::test_user_output_relationship PASSED [  5%]
tests/entities/test_entities_coverage.py::TestEntityRelationships::test_output_basket_relationship PASSED [  5%]
tests/entities/test_entities_coverage.py::TestEntityValidation::test_output_requires_txid PASSED [  5%]
tests/entities/test_entities_coverage.py::TestEntityValidation::test_transaction_requires_txid PASSED [  5%]
tests/errors/test_action_error.py::TestTransactionError::test_success PASSED [  5%]
tests/errors/test_action_error.py::TestTransactionError::test_error_without_cause PASSED [  5%]
tests/errors/test_action_error.py::TestCreateActionError::test_success PASSED [  6%]
tests/errors/test_action_error.py::TestCreateActionError::test_error_without_cause PASSED [  6%]
tests/errors/test_action_error.py::TestProcessActionError::test_with_success_and_failed_txs PASSED [  6%]
tests/errors/test_action_error.py::TestProcessActionError::test_with_review_results_and_cause PASSED [  6%]
tests/errors/test_action_error.py::TestProcessActionError::test_nil_cause_and_no_results PASSED [  6%]
tests/errors/test_errors_coverage.py::TestWalletErrors::test_import_wallet_error PASSED [  6%]
tests/errors/test_errors_coverage.py::TestWalletErrors::test_raise_wallet_error PASSED [  6%]
tests/errors/test_errors_coverage.py::TestWalletErrors::test_wallet_error_message PASSED [  6%]
tests/errors/test_errors_coverage.py::TestWalletErrors::test_wallet_error_with_context PASSED [  6%]
tests/errors/test_errors_coverage.py::TestWalletErrors::test_wallet_error_format_message PASSED [  6%]
tests/errors/test_errors_coverage.py::TestValidationError::test_validation_error_basic PASSED [  6%]
tests/errors/test_errors_coverage.py::TestValidationError::test_validation_error_with_field PASSED [  6%]
tests/errors/test_errors_coverage.py::TestValidationError::test_validation_error_with_value PASSED [  6%]
tests/errors/test_errors_coverage.py::TestValidationError::test_validation_error_with_field_and_value PASSED [  6%]
tests/errors/test_errors_coverage.py::TestConfigurationError::test_configuration_error_basic PASSED [  6%]
tests/errors/test_errors_coverage.py::TestConfigurationError::test_configuration_error_with_component PASSED [  6%]
tests/errors/test_errors_coverage.py::TestConfigurationError::test_configuration_error_with_required PASSED [  6%]
tests/errors/test_errors_coverage.py::TestConfigurationError::test_configuration_error_full PASSED [  6%]
tests/errors/test_errors_coverage.py::TestStateError::test_state_error_basic PASSED [  6%]
tests/errors/test_errors_coverage.py::TestStateError::test_state_error_with_current_state PASSED [  6%]
tests/errors/test_errors_coverage.py::TestStateError::test_state_error_with_expected_state_string PASSED [  6%]
tests/errors/test_errors_coverage.py::TestStateError::test_state_error_with_expected_state_list PASSED [  6%]
tests/errors/test_errors_coverage.py::TestStateError::test_state_error_full PASSED [  6%]
tests/errors/test_errors_coverage.py::TestOperationError::test_operation_error_basic PASSED [  6%]
tests/errors/test_errors_coverage.py::TestOperationError::test_operation_error_with_operation PASSED [  6%]
tests/errors/test_errors_coverage.py::TestOperationError::test_operation_error_with_reason PASSED [  6%]
tests/errors/test_errors_coverage.py::TestOperationError::test_operation_error_full PASSED [  6%]
tests/errors/test_errors_coverage.py::TestFormatError::test_format_error_basic PASSED [  6%]
tests/errors/test_errors_coverage.py::TestFormatError::test_format_error_with_data_type PASSED [  6%]
tests/errors/test_errors_coverage.py::TestFormatError::test_format_error_with_expected_format PASSED [  6%]
tests/errors/test_errors_coverage.py::TestFormatError::test_format_error_full PASSED [  6%]
tests/errors/test_errors_coverage.py::TestInvalidParameterError::test_invalid_parameter_error_basic PASSED [  7%]
tests/errors/test_errors_coverage.py::TestInvalidParameterError::test_invalid_parameter_error_with_message PASSED [  7%]
tests/errors/test_errors_coverage.py::TestInvalidParameterError::test_raise_invalid_parameter_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestInsufficientFundsError::test_insufficient_funds_error_basic PASSED [  7%]
tests/errors/test_errors_coverage.py::TestInsufficientFundsError::test_insufficient_funds_error_message PASSED [  7%]
tests/errors/test_errors_coverage.py::TestInsufficientFundsError::test_raise_insufficient_funds_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionBroadcastError::test_transaction_broadcast_error_default PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionBroadcastError::test_transaction_broadcast_error_custom PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionBroadcastError::test_raise_transaction_broadcast_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionSizeError::test_transaction_size_error_default PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionSizeError::test_transaction_size_error_custom PASSED [  7%]
tests/errors/test_errors_coverage.py::TestTransactionSizeError::test_raise_transaction_size_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestReviewActionsError::test_review_actions_error_minimal PASSED [  7%]
tests/errors/test_errors_coverage.py::TestReviewActionsError::test_review_actions_error_full PASSED [  7%]
tests/errors/test_errors_coverage.py::TestReviewActionsError::test_review_actions_error_multiple_actions PASSED [  7%]
tests/errors/test_errors_coverage.py::TestReviewActionsError::test_raise_review_actions_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_wallet_error_is_exception PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_validation_error_is_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_configuration_error_is_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_state_error_is_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_operation_error_is_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_format_error_is_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_catch_base_exception PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorInheritance::test_catch_as_wallet_error PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorStringRepresentations::test_wallet_error_str PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorStringRepresentations::test_wallet_error_str_with_context PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorStringRepresentations::test_invalid_parameter_error_str PASSED [  7%]
tests/errors/test_errors_coverage.py::TestErrorStringRepresentations::test_insufficient_funds_error_str PASSED [  7%]
tests/integration/test_bulk_file_data_manager.py::TestBulkFileDataManager::test_default_options_cdn_files SKIPPEDnNet_*.headers)) [  7%]
tests/integration/test_bulk_file_data_manager.py::TestBulkFileDataManager::test_default_options_cdn_files_nodropall SKIPPEDnNet_*.headers)) [  7%]
tests/integration/test_bulk_ingestor_cdn_babbage.py::TestBulkIngestorCDNBabbage::test_mainnet SKIPPED [  7%]
tests/integration/test_bulk_ingestor_cdn_babbage.py::TestBulkIngestorCDNBabbage::test_testnet SKIPPED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerXOR::test_xor_function_verifies_correctness PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerNewUser::test_successfully_creates_a_new_token_and_calls_buildandsend PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerNewUser::test_throws_if_user_tries_to_provide_recovery_key_during_new_user_flow PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_decryption_of_primary_key_and_building_the_wallet PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_successfully_decrypts_with_presentation_plus_recovery PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_throws_if_presentation_key_not_provided_first PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_works_with_correct_keys_sets_mode_as_existing_user PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_throws_if_no_token_found_by_recovery_key_hash PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerSnapshot::test_saves_a_snapshot_and_can_load_it_into_a_fresh_manager_instance FAILED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerSnapshot::test_throws_error_if_saving_snapshot_while_no_primary_key_or_token_set PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerSnapshot::test_throws_if_snapshot_is_corrupt_or_cannot_be_decrypted PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerChangePassword::test_requires_authentication_and_updates_the_ump_token_on_chain PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerChangePassword::test_throws_if_not_authenticated PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerChangeRecoveryKey::test_prompts_to_save_the_new_key_updates_the_token PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerChangeRecoveryKey::test_throws_if_not_authenticated_527 PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerChangePresentationKey::test_requires_authentication_re_publishes_the_token_old_token_consumed PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerDestroy::test_destroy_callback_clears_sensitive_data PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_throws_if_user_is_not_authenticated PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_throws_if_originator_is_adminoriginator PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_passes_if_user_is_authenticated_and_originator_is_not_admin PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_all_proxied_methods_call_underlying_with_correct_arguments PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_isauthenticated_rejects_if_originator_is_admin_resolves_otherwise PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_waitforauthentication_eventually_resolves PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerAdditionalTests::test_serializeumptoken_and_deserializeumptoken_correctly_round_trip_a_ump_token PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerAdditionalTests::test_password_retriever_callback_the_test_function_is_passed_and_returns_a_boolean PASSED [  8%]
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerAdditionalTests::test_privileged_key_expiry_each_call_to_decrypt_via_the_privileged_manager_invokes_passwordretriever PASSED [  8%]
tests/integration/test_local_kv_store.py::TestLocalKVStore::test_get_non_existent PASSED [  8%]
tests/integration/test_local_kv_store.py::TestLocalKVStore::test_set_get PASSED [  8%]
tests/integration/test_local_kv_store.py::TestLocalKVStore::test_set_x_4_get PASSED [  8%]
tests/integration/test_local_kv_store.py::TestLocalKVStore::test_set_x_4_get_set_x_4_get PASSED [  8%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_validates_the_brc_3_compliance_vector PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_validates_the_brc_2_hmac_compliance_vector PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_validates_the_brc_2_encryption_compliance_vector PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_encrypts_messages_decryptable_by_the_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_fails_to_decryupt_messages_for_the_wrong_protocol_key_and_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_correctly_derives_keys_for_a_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_signs_messages_verifiable_by_the_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_directly_signs_hash_of_message_verifiable_by_the_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_fails_to_verify_signature_for_the_wrong_data_protocol_key_and_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_computes_hmac_over_messages_verifiable_by_the_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_fails_to_verify_hmac_for_the_wrong_data_protocol_key_and_counterparty PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_uses_anyone_for_creating_signatures_and_self_for_other_operations_if_no_counterparty_is_provided PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_validates_the_revealcounterpartykeylinkage_function PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_validates_the_revealspecifickeylinkage_function PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_calls_keygetter_only_once_if_getprivilegedkey_is_invoked_multiple_times_within_retention_period PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_destroys_key_after_retention_period_elapses PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_explicitly_calls_destroykey_and_removes_all_chunk_properties PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_reuses_in_memory_obfuscated_key_if_data_is_valid_otherwise_fetches_a_new_key PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_ensures_chunk_splitting_logic_is_correct_for_a_32_byte_key PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_xor_function_works_as_expected PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_generates_random_property_names PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_sets_up_initial_decoy_properties_in_the_constructor PASSED [  9%]
tests/integration/test_privileged_key_manager.py::TestPrivilegedKeyManager::test_new_decoy_properties_are_created_on_each_key_fetch_and_destroyed_on_destroy PASSED [  9%]
tests/integration/test_single_writer_multi_reader_lock.py::TestSingleWriterMultiReaderLock::test_concurrent_reads_and_writes_execute_in_correct_order PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerBasics::test_manager_creation PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerBasics::test_manager_with_options PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerBasics::test_manager_creation_with_mocks PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerBasics::test_profile_creation PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerBasics::test_profile_default_id PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerConfiguration::test_configure_services PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerConfiguration::test_get_configuration PASSED [  9%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerAuthentication::test_authentication_flows PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerAuthentication::test_profile_management PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerAuthentication::test_wallet_operations PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerSecurity::test_encryption_methods_exist PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerSecurity::test_pbkdf2_constants PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerErrorHandling::test_manager_invalid_chain PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerErrorHandling::test_manager_missing_required_config PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIStyleWalletManagerErrorHandling::test_profile_validation PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_provide_presentation_key PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_provide_recovery_key PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_request_permission PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_is_authenticated_false_initially PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_is_authenticated_with_originator_check PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_get_underlying_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_switch_profile PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_destroy PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerAuthentication::test_request_password_once PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_get_public_key_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_encrypt_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_decrypt_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_create_hmac_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_verify_hmac_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_create_signature_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_verify_signature_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_create_action_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_sign_action_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_abort_action_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_list_actions_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_internalize_action_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_list_outputs_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_relinquish_output_not_authenticated PASSED [ 10%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_acquire_certificate_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_list_certificates_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_prove_certificate_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_relinquish_certificate_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_discover_by_identity_key_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerWalletOperations::test_discover_by_attributes_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_get_height_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_get_header_for_height_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_get_network_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_get_version_not_authenticated PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_with_valid_originator PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_with_invalid_originator FAILED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_no_originator PASSED [ 11%]
tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_not_authenticated FAILED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerInitialization::test_manager_creation_basic PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerInitialization::test_manager_with_wallet PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerInitialization::test_manager_with_permissions PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerMethods::test_create_action SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerMethods::test_sign_action SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerMethods::test_list_actions SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerMethods::test_list_outputs SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerMethods::test_list_certificates SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerInitialization::test_manager_creation_basic PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerInitialization::test_manager_with_wallet PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerInitialization::test_manager_with_auto_approve PASSED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerMethods::test_create_action SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerMethods::test_sign_action SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerMethods::test_abort_action SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerMethods::test_get_network SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerMethods::test_get_version SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerCertificates::test_acquire_certificate SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerCertificates::test_prove_certificate SKIPPED [ 11%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerCertificates::test_relinquish_certificate SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerOutputs::test_relinquish_output SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerOutputs::test_list_outputs_with_basket SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestManagerComparison::test_both_managers_can_create_actions PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerAdvanced::test_manager_delegation_to_wallet PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerAdvanced::test_manager_permission_checking PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerAdvanced::test_manager_auto_approve_behavior PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerAdvanced::test_manager_manual_approve_behavior PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerErrorHandling::test_manager_without_wallet PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerErrorHandling::test_manager_action_with_no_wallet PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerErrorHandling::test_manager_without_wallet PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerErrorHandling::test_manager_invalid_args PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestManagerInteroperability::test_both_managers_with_same_wallet PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestManagerInteroperability::test_manager_method_consistency PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerNetworkMethods::test_get_network SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerNetworkMethods::test_get_height SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestCWIStyleWalletManagerNetworkMethods::test_get_version SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_create_signature SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_verify_signature SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_create_hmac SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_verify_hmac SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_encrypt_data SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestSimpleWalletManagerCryptoMethods::test_decrypt_data SKIPPED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestManagerEdgeCases::test_manager_with_none_parameters PASSED [ 12%]
tests/manager/test_managers_expanded_coverage.py::TestManagerEdgeCases::test_manager_concurrent_operations PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerInitialization::test_manager_creation PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerInitialization::test_manager_with_config PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerInitialization::test_manager_with_minimal_params PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerInitialization::test_manager_with_state_snapshot PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerAuthentication::test_authentication_methods_exist PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerAuthentication::test_authenticate_method PASSED [ 12%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerAuthentication::test_is_authenticated_property PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerMethods::test_get_wallet PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerMethods::test_initialize_wallet PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerMethods::test_wallet_interface_methods PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerStateManagement::test_state_snapshot_handling PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerStateManagement::test_privileged_key_manager_integration PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerErrorHandling::test_manager_invalid_config PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerErrorHandling::test_authenticate_without_setup PASSED [ 13%]
tests/manager/test_simple_manager_coverage.py::TestSimpleWalletManagerErrorHandling::test_wallet_operations_without_auth PASSED [ 13%]
tests/models/test_models_coverage.py::TestTransactionModels::test_transaction_input_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestTransactionModels::test_transaction_output_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestTransactionModels::test_utxo_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestActionModels::test_action_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestActionModels::test_action_result_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestCertificateModels::test_certificate_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestCertificateModels::test_certificate_field_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestMerkleProofModels::test_merkle_path_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestMerkleProofModels::test_merkle_proof_model PASSED [ 13%]
tests/models/test_models_coverage.py::TestModelValidation::test_model_required_fields PASSED [ 13%]
tests/models/test_models_coverage.py::TestModelValidation::test_model_field_types PASSED [ 13%]
tests/models/test_models_coverage.py::TestModelSerialization::test_model_to_dict PASSED [ 13%]
tests/models/test_models_coverage.py::TestModelSerialization::test_model_from_dict PASSED [ 13%]
tests/models/test_models_coverage.py::TestModelSerialization::test_model_to_json PASSED [ 13%]
tests/monitor/test_live_ingestor_whats_on_chain_poll.py::TestLiveIngestorWhatsOnChainPoll::test_listen_for_first_new_header SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_taskclock SKIPPED       [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_tasknewheader SKIPPED   [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_tasksendwaiting_success SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_taskcheckforproofs_success SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_taskcheckforproofs_fail SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_taskreviewstatus SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_processproventransaction SKIPPED [ 13%]
tests/monitor/test_monitor.py::TestMonitor::test_processbroadcastedtransactions SKIPPED [ 14%]
tests/monitor/test_tasks.py::TestTaskClock::test_task_clock_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskClock::test_task_clock_trigger_every_minute PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskClock::test_task_clock_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskNewHeader::test_task_new_header_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskNewHeader::test_task_new_header_trigger PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskNewHeader::test_task_new_header_run_task_no_header PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskNewHeader::test_task_new_header_run_task_with_header PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskNewHeader::test_task_new_header_run_task_triggers_proof_check PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_custom_params PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_trigger_timing PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_run_task_no_transactions PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_run_task_with_transactions PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSendWaiting::test_task_send_waiting_run_task_broadcast_failure PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskCheckForProofs::test_task_check_for_proofs_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskCheckForProofs::test_task_check_for_proofs_trigger PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskCheckForProofs::test_task_check_for_proofs_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskReviewStatus::test_task_review_status_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskReviewStatus::test_task_review_status_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskPurge::test_task_purge_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskPurge::test_task_purge_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskFailAbandoned::test_task_fail_abandoned_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskFailAbandoned::test_task_fail_abandoned_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskMonitorCallHistory::test_task_monitor_call_history_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskMonitorCallHistory::test_task_monitor_call_history_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskReorg::test_task_reorg_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskReorg::test_task_reorg_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSyncWhenIdle::test_task_sync_when_idle_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskSyncWhenIdle::test_task_sync_when_idle_run_task PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskUnFail::test_task_un_fail_initialization PASSED [ 14%]
tests/monitor/test_tasks.py::TestTaskUnFail::test_task_un_fail_run_task PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionManager::test_import_permission_manager PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionManager::test_create_permission_manager PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionChecking::test_check_permission PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionChecking::test_grant_permission PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionChecking::test_revoke_permission PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestRoleManagement::test_assign_role PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestRoleManagement::test_remove_role PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestRoleManagement::test_get_user_roles PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionGroups::test_create_permission_group PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionGroups::test_add_user_to_group PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionValidation::test_validate_permission_string PASSED [ 15%]
tests/permissions/test_permissions_coverage.py::TestPermissionValidation::test_parse_permission_string PASSED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_bindcallback_should_register_multiple_callbacks_for_the_same_event_which_are_called_in_sequence PASSED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_unbindcallback_by_numeric_id_should_prevent_the_callback_from_being_called_again PASSED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_unbindcallback_by_function_reference_should_remove_the_callback PASSED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_a_failing_callback_throwing_an_error_does_not_block_subsequent_callbacks PASSED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_trigger_onprotocolpermissionrequested_with_correct_params_when_a_non_admin_domain_requests_a_protocol_operation FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_resolve_the_original_caller_promise_when_requests_are_granted FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_reject_the_original_caller_promise_when_permission_is_denied FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_multiple_pending_requests_for_the_same_resource_should_trigger_only_one_onxxxrequested_callback SKIPPED [ 15%]
tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_multiple_pending_requests_for_different_resources_should_trigger_separate_onxxxrequested_callbacks SKIPPED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_permission_prompt_if_seclevel_0_open_usage FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_protocol_usage_if_securitylevel_1_and_no_existing_token FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_deny_protocol_usage_if_user_denies_permission FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_enforce_privileged_token_if_differentiateprivilegedoperations_true FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_ignore_privileged_true_if_differentiateprivilegedoperations_false FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_if_protocol_name_is_admin_reserved_and_caller_is_not_admin FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_renewal_if_token_is_found_but_expired FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_immediately_if_using_an_admin_only_basket_as_non_admin FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_immediately_if_using_the_reserved_basket_default_as_non_admin FAILED [ 15%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_insertion_permission_if_seekbasketinsertionpermissions_true PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_insertion_permission_if_seekbasketinsertionpermissions_false PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_listing_permission_if_seekbasketlistingpermissions_true_and_no_token FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_removal_permission_if_seekbasketremovalpermissions_true FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_certificate_disclosure_permission_if_config_seekcertificatedisclosurepermissions_false PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_permission_if_seekcertificatedisclosurepermissions_true_no_valid_token PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_check_that_requested_fields_are_a_subset_of_the_tokens_fields PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_renewal_if_token_is_expired_cert PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_if_seekspendingpermissions_false PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_spending_token_if_netspent_gt_0_and_seekspendingpermissions_true PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_check_monthly_limit_usage_and_prompt_renewal_if_insufficient PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_pass_if_usage_plus_new_spend_is_within_the_monthly_limit PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_if_label_starts_with_admin FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_label_permission_if_seekpermissionwhenapplyingactionlabels_false PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_label_usage_if_seekpermissionwhenapplyingactionlabels_true FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_also_prompt_for_listing_actions_by_label_if_seekpermissionwhenlistingactionsbylabel_true FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionHelpers::test_should_call_underlying_encrypt_with_correct_protocol_and_key_when_encryptwalletmetadata_true PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionHelpers::test_should_not_call_underlying_encrypt_if_encryptwalletmetadata_false PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionHelpers::test_should_call_underlying_decrypt_with_correct_protocol_and_key_returning_plaintext_on_success PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionHelpers::test_should_fallback_to_original_string_if_underlying_decrypt_fails PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionIntegration::test_should_encrypt_metadata_fields_in_createaction_when_encryptwalletmetadata_true_then_decrypt_them_in_listactions PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionIntegration::test_should_not_encrypt_metadata_if_encryptwalletmetadata_false_storing_and_retrieving_plaintext FAILED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerListOutputsDecryption::test_should_decrypt_custominstructions_in_listoutputs_if_encryptwalletmetadata_true PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerListOutputsDecryption::test_should_fallback_to_the_original_ciphertext_if_decrypt_fails_in_listoutputs PASSED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_coalesce_parallel_requests_for_the_same_resource_into_a_single_user_prompt SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_generate_two_distinct_user_prompts_for_two_different_permission_requests SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_resolve_all_parallel_requests_when_permission_is_granted_referencing_the_same_requestid SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_reject_only_the_matching_request_queue_on_deny_if_requestid_is_specified SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_not_create_a_token_if_ephemeral_true_so_subsequent_calls_re_trigger_the_request SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_create_a_token_if_ephemeral_false_so_subsequent_calls_do_not_re_trigger_if_unexpired SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_flows.py::TestWalletPermissionsManagerFlows::test_should_handle_renewal_if_the_found_token_is_expired_passing_previoustoken_in_the_request SKIPPED [ 16%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_initialize_with_default_config_if_none_is_provided PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_initialize_with_partial_config_overrides_merging_with_defaults PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_initialize_with_all_config_flags_set_to_false PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_consider_calls_from_the_adminoriginator_as_admin_bypassing_checks PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_skip_protocol_permission_checks_for_signing_if_seekprotocolpermissionsforsigning_false FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_enforce_protocol_permission_checks_for_signing_if_seekprotocolpermissionsforsigning_true FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_skip_basket_insertion_permission_checks_if_seekbasketinsertionpermissions_false PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_skip_certificate_disclosure_permission_checks_if_seekcertificatedisclosurepermissions_false PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_skip_metadata_encryption_if_encryptwalletmetadata_false PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_pass_createaction_calls_through_label_them_handle_metadata_encryption_and_check_spending_authorization PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_abort_the_action_if_spending_permission_is_denied FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_throw_an_error_if_a_non_admin_tries_signandprocess_true PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_signaction_calls_directly_if_invoked_by_the_user PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_abortaction_calls_directly PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_listactions_on_the_underlying_wallet_and_decrypt_metadata_fields_if_encryptwalletmetadata_true PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_pass_internalizeaction_calls_to_underlying_after_ensuring_basket_permissions_and_encrypting_custominstructions_if_config_on PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_ensure_basket_listing_permission_then_call_listoutputs_decrypting_custominstructions PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_ensure_basket_removal_permission_then_call_relinquishoutput FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_getpublickey_on_underlying_after_ensuring_protocol_permission PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_revealcounterpartykeylinkage_with_permission_check_pass_result PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_revealspecifickeylinkage_with_permission_check_pass_result PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_encrypt_calls_after_checking_protocol_permission FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_decrypt_calls_after_checking_protocol_permission FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_createhmac_calls FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_verifyhmac_calls FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_createsignature_calls_already_tested_the_netspent_logic_in_createaction_but_lets_double_check FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_verifysignature_calls FAILED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_acquirecertificate_verifying_permission_if_config_seekcertificateacquisitionpermissions_true PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_listcertificates_verifying_permission_if_config_seekcertificatelistingpermissions_true PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_provecertificate_after_ensuring_certificate_permission PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_relinquishcertificate_if_config_seekcertificaterelinquishmentpermissions_true PASSED [ 17%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_discoverbyidentitykey_after_ensuring_identity_resolution_permission PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_call_discoverbyattributes_after_ensuring_identity_resolution_permission PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_isauthenticated_without_any_special_permission_checks PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_waitforauthentication_without_any_special_permission_checks PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_getheight PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_getheaderforheight PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_getnetwork PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_getversion PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_propagate_errors_from_the_underlying_wallet_calls PASSED [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_build_correct_fields_for_a_protocol_token_dpacp SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_build_correct_fields_for_a_basket_token_dbap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_build_correct_fields_for_a_certificate_token_dcap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_build_correct_fields_for_a_spending_token_dsap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_create_a_new_protocol_token_with_the_correct_basket_script_and_tags SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_create_a_new_basket_token_dbap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_create_a_new_certificate_token_dcap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_create_a_new_spending_authorization_token_dsap SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_spend_the_old_token_input_and_create_a_new_protocol_token_output_with_updated_expiry SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_allow_updating_the_authorizedamount_in_dsap_renewal SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_create_a_transaction_that_consumes_spends_the_old_token_with_no_new_outputs SKIPPEDn) [ 18%]
tests/permissions/test_wallet_permissions_manager_tokens.py::TestWalletPermissionsManagerTokens::test_should_remove_the_old_token_from_listing_after_revocation SKIPPEDn) [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcError::test_json_rpc_error_creation PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcError::test_json_rpc_error_without_data PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_client_creation PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_client_context_manager PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_get_next_id_thread_safe PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_rpc_call_success PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_rpc_call_with_error_response PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_rpc_call_network_error PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_rpc_call_timeout PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_is_available PASSED [ 18%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_make_available PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_get_services PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_get_settings PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_create_action PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_list_actions PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_abort_action PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_internalize_action PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_list_certificates PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_list_outputs PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_close_session PASSED [ 19%]
tests/rpc/test_json_rpc_client_coverage.py::TestJsonRpcClient::test_rpc_call_includes_auth_headers PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerInitialization::test_server_creation_basic PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerInitialization::test_server_with_wallet PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerInitialization::test_server_with_port PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethods::test_handle_request_basic PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethods::test_handle_invalid_request PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethods::test_register_method PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethods::test_start_server PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethods::test_stop_server PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcError::test_json_rpc_error_creation PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcError::test_json_rpc_error_with_data PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethodHandling::test_handle_getbalance_method PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethodHandling::test_handle_createaction_method PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerMethodHandling::test_handle_unknown_method PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerBatchRequests::test_handle_batch_request PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerBatchRequests::test_handle_empty_batch PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerConfiguration::test_server_with_host_and_port PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerConfiguration::test_server_with_ssl_config PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerConfiguration::test_server_with_authentication PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerEdgeCases::test_malformed_json_request PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerEdgeCases::test_missing_required_fields PASSED [ 19%]
tests/rpc/test_json_rpc_server_coverage.py::TestJsonRpcServerEdgeCases::test_concurrent_requests PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderInitialization::test_arc_provider_creation PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderInitialization::test_arc_provider_without_api_key PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderMethods::test_post_beef_success PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderMethods::test_post_beef_error PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderMethods::test_get_transaction_status PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderErrorHandling::test_arc_provider_network_error PASSED [ 20%]
tests/services/test_arc_provider_coverage.py::TestArcProviderErrorHandling::test_arc_provider_timeout PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_services_placeholder PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_services_initialization_invalid_config PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_services_initialization_valid_config PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_invalid_beef_data PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_network_failures FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_authentication_failures FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_rate_limiting FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_success_responses FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_malformed_requests PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_double_spend_handling FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_insufficient_funds FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_transaction_rejected FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_connection_error FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_services_provider_fallback FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_array_invalid_inputs PASSED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_array_empty_list FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_array_partial_failures FAILED [ 20%]
tests/services/test_arc_services.py::TestArcServices::test_arc_services_large_payload_handling FAILED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsProviderInitialization::test_provider_creation PASSED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsProviderInitialization::test_provider_with_auth PASSED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsProviderMethods::test_get_script_history PASSED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsProviderMethods::test_get_utxo_status PASSED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsProviderMethods::test_post_beef PASSED [ 20%]
tests/services/test_bitails_provider_coverage.py::TestBitailsErrorHandling::test_provider_invalid_response PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheEntry::test_cache_entry_creation PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheEntry::test_cache_entry_not_expired PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheEntry::test_cache_entry_expired PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheEntry::test_cache_entry_with_different_types PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_cache_manager_creation PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_set_and_get_value PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_get_nonexistent_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_get_expired_value PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_overwrite_existing_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_clear_specific_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_clear_nonexistent_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_clear_all PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_has_valid_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_has_nonexistent_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_has_expired_key PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_cache_with_dict_values PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_cache_with_list_values PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_multiple_keys_different_ttls PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_cache_manager_with_complex_types PASSED [ 21%]
tests/services/test_cache_manager_coverage.py::TestCacheManager::test_zero_ttl PASSED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_for_multiple_currencies SKIPPED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_invalid_currencies FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_network_failures FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_success_responses FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_empty_currency_list FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_single_currency FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_case_sensitivity FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_invalid_api_key PASSED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_malformed_response_handling FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_timeout_handling FAILED [ 21%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_rate_limiting_handling FAILED [ 22%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_connection_error_handling FAILED [ 22%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_duplicate_currencies PASSED [ 22%]
tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_too_many_currencies PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_basic_functionality FAILED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_multiple_calls PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_different_chains PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_with_custom_options PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_error_handling PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_interface_validation PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_configuration_persistence FAILED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_network_operations PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_subscription_management PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_header_operations PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_service_integration PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_reorg_handling PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_initialization_edge_cases PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_memory_management PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_error_recovery PASSED [ 22%]
tests/services/test_get_chain_tracker.py::test_get_chain_tracker_placeholder PASSED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path SKIPPED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_invalid_txid_formats PASSED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_network_failure_500 FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_network_timeout FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_rate_limiting_429 FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_transaction_not_found_404 FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_malformed_response FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_connection_error FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_provider_fallback FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_success_response FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_different_chains FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_large_response_handling FAILED [ 22%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_unicode_txid_handling FAILED [ 23%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_empty_path_response FAILED [ 23%]
tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_multiple_providers_fallback FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx PASSED  [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_invalid_txid_formats PASSED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_network_failure_500 FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_network_timeout FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_rate_limiting_429 FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_transaction_not_found_404 FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_malformed_response FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_connection_error FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_provider_fallback FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_success_response FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_different_chains FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_unicode_txid_handling FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_large_tx_data_handling FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_empty_response_handling FAILED [ 23%]
tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_multiple_providers_fallback FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_minimal_normal FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_minimal_empty FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_invalid_script_formats FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_empty_script FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_different_chains FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_various_script_patterns FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_case_insensitive_script FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_unicode_script_handling FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_consecutive_calls FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_script_length_boundaries FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_special_characters FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_numeric_script FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_mixed_case_script FAILED [ 23%]
tests/services/test_get_script_history_min.py::test_get_script_history_configuration_variations FAILED [ 24%]
tests/services/test_get_script_history_min.py::test_get_script_history_with_results FAILED [ 24%]
tests/services/test_get_script_history_min.py::test_get_script_history_empty_results FAILED [ 24%]
tests/services/test_get_script_history_min.py::test_get_script_history_result_structure FAILED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_minimal_normal PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_minimal_not_found PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_invalid_script_formats FAILED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_empty_script PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_different_chains PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_various_script_patterns PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_case_insensitive_script PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_unicode_script_handling PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_consecutive_calls PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_script_length_boundaries PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_special_characters FAILED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_numeric_script FAILED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_mixed_case_script PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_configuration_variations PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_with_results PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_empty_results PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_result_structure PASSED [ 24%]
tests/services/test_get_utxo_status_min.py::test_get_utxo_status_error_response_handling PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScript::test_hash_output_script_matches_expected PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinal::test_final_when_all_sequences_are_maxint PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinal::test_height_based_locktime_strict_less_than FAILED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinal::test_timestamp_based_locktime_strict_less_than PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_invalid_hex FAILED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_empty_script PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_odd_length_hex PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_max_length_script PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_unicode_characters PASSED [ 24%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_case_insensitive_hex PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_minimal_script PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_p2pkh_script PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_p2sh_script PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_invalid_transaction PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_transaction_no_inputs FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_mixed_sequences FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_all_non_final_sequences FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_height_based_boundary_values PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_timestamp_based_boundary_values PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_network_height_failure FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_large_sequence_numbers FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_zero_sequence_numbers FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_many_inputs FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_negative_locktime_values FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_extremely_large_locktime PASSED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_transaction_with_locktime_field FAILED [ 25%]
tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_services_method_calls_with_none_self PASSED [ 25%]
tests/services/test_post_beef.py::test_post_beef_arc_minimal_enabled PASSED [ 25%]
tests/services/test_post_beef.py::test_post_beef_array_arc_minimal_enabled PASSED [ 25%]
tests/services/test_post_beef.py::test_post_beef_invalid_beef_format_raises_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_network_failure_500_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_network_timeout_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_rate_limiting_429_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_malformed_json_response FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_empty_response FAILED   [ 25%]
tests/services/test_post_beef.py::test_post_beef_service_unavailable_503_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_unauthorized_401_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_forbidden_403_error FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_array_invalid_input_types FAILED [ 25%]
tests/services/test_post_beef.py::test_post_beef_array_empty_list PASSED [ 25%]
tests/services/test_post_beef.py::test_post_beef_array_mixed_valid_invalid PASSED [ 26%]
tests/services/test_post_beef.py::test_post_beef_success_response PASSED [ 26%]
tests/services/test_post_beef.py::test_post_beef_double_spend_detection FAILED [ 26%]
tests/services/test_post_beef.py::test_post_beef_large_beef_data_handling PASSED [ 26%]
tests/services/test_post_beef.py::test_post_beef_unicode_in_response FAILED [ 26%]
tests/services/test_post_beef.py::test_post_beef_provider_fallback_simulation FAILED [ 26%]
tests/services/test_post_beef.py::test_post_beef_connection_error_handling FAILED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_minimal PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_empty_list PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_invalid_input_types FAILED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_mixed_valid_invalid_elements PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_without_arc_config PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_invalid_arc_url PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_empty_api_key PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_none_api_key PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_single_element PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_large_array PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_duplicate_elements PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_different_chains PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_all_invalid_elements PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_mixed_types_in_array PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_consecutive_calls PASSED [ 26%]
tests/services/test_post_beef_array_min.py::test_post_beef_array_config_validation PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_minimal PASSED  [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_invalid_beef_data FAILED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_empty_beef PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_without_arc_config PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_invalid_arc_url PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_empty_api_key PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_none_api_key PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_different_chains PASSED [ 26%]
tests/services/test_post_beef_min.py::test_post_beef_arc_large_beef_data PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_unicode_in_beef PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_consecutive_calls PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_mixed_valid_invalid PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_error_response_handling PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_config_validation PASSED [ 27%]
tests/services/test_post_beef_min.py::test_post_beef_arc_timeout_simulation PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionInitialization::test_service_collection_creation PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionInitialization::test_service_collection_with_providers PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionProviderManagement::test_add_provider PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionProviderManagement::test_remove_provider PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionProviderManagement::test_get_provider PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionFailover::test_round_robin_selection PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionFailover::test_failover_on_error PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionCallHistory::test_record_call_success PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionCallHistory::test_record_call_failure PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionCallHistory::test_get_call_history PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionCallHistory::test_get_provider_stats PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionErrorHandling::test_collection_without_providers PASSED [ 27%]
tests/services/test_service_collection_coverage.py::TestServiceCollectionErrorHandling::test_all_providers_fail PASSED [ 27%]
tests/services/test_services.py::TestServices::test_getheaderbyhash SKIPPED [ 27%]
tests/services/test_services.py::TestServices::test_getchaintipheight SKIPPED [ 27%]
tests/services/test_services.py::TestServices::test_listen_for_old_block_headers SKIPPED [ 27%]
tests/services/test_services.py::TestServices::test_listen_for_new_block_headers SKIPPED [ 27%]
tests/services/test_services.py::TestServices::test_get_latest_header_bytes SKIPPED [ 27%]
tests/services/test_services.py::TestServices::test_get_headers SKIPPED  [ 27%]
tests/services/test_services.py::TestServices::test_get_header_byte_file_links SKIPPED [ 27%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_initialization_with_invalid_chain SKIPPED [ 27%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_initialization_with_missing_config SKIPPED [ 27%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_initialization_with_invalid_api_keys SKIPPED [ 27%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_method_calls_with_invalid_parameters SKIPPED [ 27%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_provider_configuration_validation SKIPPED [ 28%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_network_failure_recovery SKIPPED [ 28%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_initialization_with_environment_variables SKIPPED [ 28%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_configuration_persistence SKIPPED [ 28%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_method_timeout_handling SKIPPED [ 28%]
tests/services/test_services.py::TestServicesErrorHandling::test_service_error_message_formatting SKIPPED [ 28%]
tests/services/test_services_coverage.py::TestServicesInitialization::test_services_creation_minimal PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesInitialization::test_services_with_all_providers PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesHTTPMethods::test_post_beef_mock PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesHTTPMethods::test_get_raw_tx_mock PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesHTTPMethods::test_get_merkle_path_mock PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesErrorHandling::test_services_invalid_chain PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesErrorHandling::test_services_missing_config PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesProviderSelection::test_provider_fallback SKIPPED [ 28%]
tests/services/test_services_coverage.py::TestServicesChainTracker::test_get_chain_tracker PASSED [ 28%]
tests/services/test_services_coverage.py::TestServicesChainTracker::test_get_header_for_height PASSED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesInitialization::test_services_creation_basic PASSED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesInitialization::test_services_with_chain PASSED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesInitialization::test_services_with_providers PASSED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesTransactionMethods::test_post_transaction SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesTransactionMethods::test_get_transaction_status SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesTransactionMethods::test_get_raw_transaction SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesTransactionMethods::test_post_beef_transaction SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesTransactionMethods::test_post_multiple_transactions SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesUtxoMethods::test_get_utxo_status SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesUtxoMethods::test_get_utxos_for_script SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesUtxoMethods::test_get_script_history SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesMerklePathMethods::test_get_merkle_path SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesMerklePathMethods::test_verify_merkle_path SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesBlockchainMethods::test_get_height SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesBlockchainMethods::test_get_block_header SKIPPED [ 28%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesBlockchainMethods::test_get_chain_tip SKIPPED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesProviderManagement::test_add_provider SKIPPED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesProviderManagement::test_remove_provider SKIPPED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesProviderManagement::test_get_providers SKIPPED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesErrorHandling::test_services_with_no_providers PASSED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesErrorHandling::test_service_method_with_provider_failure PASSED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesCaching::test_cached_height_retrieval SKIPPED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesEdgeCases::test_services_with_none_chain PASSED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesEdgeCases::test_post_empty_transaction PASSED [ 29%]
tests/services/test_services_expanded_coverage.py::TestWalletServicesEdgeCases::test_get_utxo_status_invalid_outpoint PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesInitialization::test_create_default_options_main PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesInitialization::test_create_default_options_test PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesInitialization::test_services_init_with_options PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesInitialization::test_services_init_with_chain PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_get_height PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_get_present_height PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_get_chain PASSED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_get_header_for_height SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_find_header_for_height SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_find_chain_tip_header SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_find_chain_tip_hash SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_find_header_for_block_hash SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesBlockchainMethods::test_is_valid_root_for_height SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_get_raw_tx SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_get_merkle_path_for_transaction SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_get_transaction_status SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_get_tx_propagation SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_post_beef SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesTransactionMethods::test_post_beef_array SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesExchangeRateMethods::test_update_bsv_exchange_rate SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesExchangeRateMethods::test_get_fiat_exchange_rate SKIPPED [ 29%]
tests/services/test_services_methods.py::TestServicesExchangeRateMethods::test_get_fiat_exchange_rate_with_base SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUTXOMethods::test_get_utxo_status SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUTXOMethods::test_get_script_history SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUTXOMethods::test_is_utxo SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_hash_output_script SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_n_lock_time_is_final SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_get_info SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_get_headers SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_get_services_call_history PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesUtilityMethods::test_get_services_call_history_reset PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_get_chain_tracker SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_start_listening PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_listening PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_is_listening SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_is_synchronized SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_subscribe_headers SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_subscribe_reorgs SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_unsubscribe SKIPPED [ 30%]
tests/services/test_services_methods.py::TestServicesChainTrackerMethods::test_add_header PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_height_network_failure FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_height_timeout FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_raw_tx_invalid_txid PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_raw_tx_network_failures FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_merkle_path_invalid_txid PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_merkle_path_provider_failures FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_transaction_status_invalid_txid PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_transaction_status_provider_timeout FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_invalid_beef_data PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_provider_failures FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_array_invalid_inputs PASSED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_array_partial_failures FAILED [ 30%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_update_bsv_exchange_rate_invalid_currencies PASSED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_update_bsv_exchange_rate_provider_failures FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_header_for_height_invalid_height FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_header_for_height_chaintracker_failure FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_find_header_for_height_edge_cases FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_is_valid_root_for_height_invalid_inputs FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_tx_propagation_invalid_txid FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_tx_propagation_provider_failures FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_subscribe_reorgs_invalid_callback FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_add_header_invalid_data PASSED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_add_header_provider_failure PASSED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_services_initialization_invalid_options FAILED [ 31%]
tests/services/test_services_methods.py::TestServicesErrorHandling::test_services_multiple_concurrent_requests FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_placeholder PASSED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_invalid_txid_formats PASSED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_network_failure_500 FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_network_timeout FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_rate_limiting_429 FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_transaction_not_found_404 FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_malformed_response FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_connection_error FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_provider_fallback FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_confirmed_transaction FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_unconfirmed_transaction FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_mempool_transaction FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_different_chains FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_multiple_providers_fallback FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_recently_confirmed FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_well_confirmed FAILED [ 31%]
tests/services/test_transaction_status.py::test_get_transaction_status_unicode_txid_handling FAILED [ 31%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_minimal FAILED [ 31%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_invalid_txid_formats FAILED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_empty_txid PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_different_chains PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_various_txid_patterns PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_case_insensitive_txid PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_unicode_txid_handling PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_consecutive_calls PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_various_response_patterns FAILED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_txid_length_boundaries PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_special_characters FAILED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_numeric_txid FAILED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_mixed_case_txid PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_configuration_variations PASSED [ 32%]
tests/services/test_transaction_status_min.py::test_get_transaction_status_error_response_handling PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_from_hex SKIPPEDr merkle path verification) [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_from_storage PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_invalid_beef_format FAILED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_merkle_path_verification_failure PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_network_timeout_during_verification PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_corrupted_merkle_path PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_missing_merkle_path PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_connection_error_during_verification PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_invalid_transaction_in_beef FAILED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_successful_verification PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_with_different_chaintrackers PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_large_beef_data_handling PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_empty_beef_handling PASSED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_multiple_transactions_in_beef FAILED [ 32%]
tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_verification_strict_vs_lenient PASSED [ 32%]
tests/services/test_wallet_services_coverage.py::TestWalletServices::test_import_wallet_services PASSED [ 32%]
tests/services/test_wallet_services_coverage.py::TestWalletServices::test_create_wallet_services PASSED [ 32%]
tests/services/test_wallet_services_coverage.py::TestWalletServices::test_wallet_services_with_chain PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesOptions::test_import_options PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesOptions::test_create_options PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesOptions::test_options_with_config PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesMethods::test_get_chain_tracker PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesMethods::test_broadcast_transaction PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesMethods::test_get_merkle_path PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestWalletServicesMethods::test_get_raw_transaction PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestChainType::test_import_chain PASSED [ 33%]
tests/services/test_wallet_services_coverage.py::TestChainType::test_chain_usage PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_placeholder PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_getrawtx_testnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_getrawtx_mainnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_getmerklepath_testnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_getmerklepath_mainnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_updatebsvexchangerate PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_gettxpropagation_testnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_gettxpropagation_mainnet PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_invalid_txid_formats PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_network_failure_500 PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_network_timeout FAILED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_rate_limiting_429 PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_malformed_json_response FAILED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_empty_response PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_unauthorized_401 PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_forbidden_403 PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_not_found_404 PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_success_response PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_invalid_txid FAILED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_network_failures FAILED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_network_failures FAILED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_success PASSED [ 33%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_invalid_responses PASSED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_provider_initialization_invalid_chain FAILED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_provider_initialization_empty_api_key PASSED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_provider_initialization_none_api_key PASSED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_connection_error FAILED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_connection_error FAILED [ 34%]
tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_connection_error FAILED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderInitialization::test_provider_creation_mainnet PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderInitialization::test_provider_creation_testnet PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderMethods::test_get_raw_tx PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderMethods::test_get_merkle_path PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderMethods::test_get_utxo_status PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainProviderMethods::test_broadcast_transaction PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainErrorHandling::test_provider_tx_not_found PASSED [ 34%]
tests/services/test_whatsonchain_provider_coverage.py::TestWhatsOnChainErrorHandling::test_provider_network_error PASSED [ 34%]
tests/signer/test_methods_unit.py::TestCreateAction::test_create_action_basic SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestCreateAction::test_create_action_validation SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignAction::test_sign_action_success SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignAction::test_sign_action_invalid_reference SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestProcessAction::test_process_action_new_tx SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestProcessAction::test_process_action_existing_tx SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestInternalizeAction::test_internalize_action_success SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestInternalizeAction::test_internalize_action_validation SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestAcquireDirectCertificate::test_acquire_direct_certificate_success SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestAcquireDirectCertificate::test_acquire_direct_certificate_validation SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestProveCertificate::test_prove_certificate_success SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestProveCertificate::test_prove_certificate_validation SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_build_signable_transaction SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_complete_signed_transaction SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_make_change_lock SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_verify_unlock_scripts SKIPPED [ 34%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_merge_prior_options SKIPPED [ 35%]
tests/signer/test_methods_unit.py::TestSignerHelperFunctions::test_remove_unlock_scripts SKIPPED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerDataclasses::test_pending_sign_action_creation PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerDataclasses::test_pending_storage_input_creation PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerDataclasses::test_create_action_result_x_default PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerDataclasses::test_create_action_result_x_with_values PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestCreateAction::test_create_action_no_new_tx PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestCreateAction::test_create_action_validates_inputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestBuildSignableTransaction::test_build_signable_transaction_basic PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignAction::test_sign_action_requires_wallet PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignAction::test_sign_action_basic_flow PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalizeAction::test_internalize_action_validates_args PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalizeAction::test_internalize_action_with_tx PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalizeAction::test_internalize_action_requires_wallet PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalHelpers::test_pending_sign_action_with_inputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestErrorHandling::test_create_action_with_invalid_wallet PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestErrorHandling::test_sign_action_missing_reference PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestDataclassDefaults::test_pending_storage_input_all_fields PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestDataclassDefaults::test_create_action_result_x_partial PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestCreateActionAdvanced::test_create_action_with_outputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestCreateActionAdvanced::test_create_action_with_description PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestCreateActionAdvanced::test_create_action_with_labels PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignActionAdvanced::test_sign_action_with_spends PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignActionAdvanced::test_sign_action_multiple_inputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalizeActionAdvanced::test_internalize_action_with_outputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestInternalizeActionAdvanced::test_internalize_action_with_labels PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestBuildSignableTransactionAdvanced::test_build_with_complex_prior PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestBuildSignableTransactionAdvanced::test_build_with_multiple_inputs PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerMethodsIntegration::test_create_and_sign_workflow PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerErrorRecovery::test_create_action_with_none_wallet PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerErrorRecovery::test_sign_action_with_empty_spends PASSED [ 35%]
tests/signer/test_signer_methods_coverage.py::TestSignerErrorRecovery::test_internalize_action_with_invalid_tx PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestCompleteSignedTransaction::test_complete_signed_transaction_no_spends PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestCompleteSignedTransaction::test_complete_signed_transaction_with_spends PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestProcessAction::test_process_action_no_prior PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestProcessAction::test_process_action_with_prior PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestProcessAction::test_process_action_delayed_mode PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestAcquireDirectCertificate::test_acquire_direct_certificate_basic PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestAcquireDirectCertificate::test_acquire_direct_certificate_with_fields PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestProveCertificate::test_prove_certificate_basic PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestProveCertificate::test_prove_certificate_with_fields PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestBuildSignableTransactionAdvanced::test_build_signable_with_input_beef PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestBuildSignableTransactionAdvanced::test_build_signable_without_input_beef PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestInternalHelperFunctions::test_create_action_with_sign_action_flag PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestInternalHelperFunctions::test_sign_action_with_options PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestErrorPaths::test_create_action_missing_outputs PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestErrorPaths::test_sign_action_invalid_reference PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestErrorPaths::test_internalize_action_invalid_outputs PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestErrorPaths::test_complete_signed_transaction_missing_key_deriver PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestEdgeCases::test_pending_sign_action_empty_pdi PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestEdgeCases::test_create_action_result_all_fields PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestEdgeCases::test_build_signable_with_empty_inputs PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestEdgeCases::test_process_action_various_flags PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestCertificateMethods::test_acquire_certificate_missing_fields PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestCertificateMethods::test_prove_certificate_missing_certificate_id PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestDataclassFieldValidation::test_pending_storage_input_integer_fields PASSED [ 36%]
tests/signer/test_signer_methods_expanded.py::TestDataclassFieldValidation::test_create_action_result_type_consistency PASSED [ 36%]
tests/storage/entities/test_certificate.py::TestCertificateEntity::test_equals_identifies_matching_certificate_entities PASSED [ 36%]
tests/storage/entities/test_certificate.py::TestCertificateEntity::test_equals_identifies_non_matching_certificate_entities PASSED [ 36%]
tests/storage/entities/test_certificate.py::TestCertificateEntity::test_mergeexisting_updates_entity_and_database_when_ei_updated_at_greater_than_this_updated_at PASSED [ 36%]
tests/storage/entities/test_certificate.py::TestCertificateEntity::test_mergeexisting_does_not_update_entity_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 36%]
tests/storage/entities/test_certificate.py::TestCertificateEntity::test_certificate_class_getters_and_setters PASSED [ 36%]
tests/storage/entities/test_certificate_field.py::TestCertificateFieldEntity::test_equals_identifies_matching_certificatefield_entities PASSED [ 37%]
tests/storage/entities/test_certificate_field.py::TestCertificateFieldEntity::test_equals_identifies_non_matching_certificatefield_entities PASSED [ 37%]
tests/storage/entities/test_certificate_field.py::TestCertificateFieldEntity::test_mergeexisting_updates_entity_and_database_when_ei_updated_at_greater_than_this_updated_at PASSED [ 37%]
tests/storage/entities/test_certificate_field.py::TestCertificateFieldEntity::test_mergeexisting_does_not_update_entity_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 37%]
tests/storage/entities/test_certificate_field.py::TestCertificateFieldEntity::test_certificatefield_getters_and_setters PASSED [ 37%]
tests/storage/entities/test_commission.py::TestCommissionEntity::test_equals_identifies_matching_commission_entities PASSED [ 37%]
tests/storage/entities/test_commission.py::TestCommissionEntity::test_equals_identifies_non_matching_commission_entities PASSED [ 37%]
tests/storage/entities/test_commission.py::TestCommissionEntity::test_mergeexisting_updates_entity_and_database_when_ei_updated_at_greater_than_this_updated_at PASSED [ 37%]
tests/storage/entities/test_commission.py::TestCommissionEntity::test_mergeexisting_does_not_update_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 37%]
tests/storage/entities/test_commission.py::TestCommissionEntity::test_commission_entity_getters_and_setters PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_equals_identifies_matching_entities_with_and_without_syncmap PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_equals_identifies_non_matching_entities PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_equals_handles_optional_fields_and_arrays PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_mergeexisting_updates_entity_and_database_when_ei_updated_at_greater_than_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_mergeexisting_does_not_update_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output.py::TestOutputEntity::test_output_entity_getters_and_setters PASSED [ 37%]
tests/storage/entities/test_output_basket.py::TestOutputBasketEntity::test_mergeexisting_merges_and_updates_entity_when_ei_updated_at_greater_than_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output_basket.py::TestOutputBasketEntity::test_mergeexisting_does_not_merge_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output_basket.py::TestOutputBasketEntity::test_equals_identifies_matching_entities_with_and_without_syncmap PASSED [ 37%]
tests/storage/entities/test_output_basket.py::TestOutputBasketEntity::test_equals_identifies_non_matching_entities PASSED [ 37%]
tests/storage/entities/test_output_basket.py::TestOutputBasketEntity::test_outputbasket_getters_setters_and_updateapi PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_mergeexisting_merges_and_updates_entity_when_ei_updated_at_greater_than_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_mergeexisting_does_not_merge_when_ei_updated_at_less_than_or_equal_this_updated_at PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_equals_identifies_matching_entities_without_syncmap PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_equals_identifies_non_matching_entities_when_tags_differ PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_equals_identifies_non_matching_entities_when_isdeleted_differs PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_equals_identifies_matching_entities_with_syncmap PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_equals_identifies_non_matching_entities_when_userids_differ_and_no_syncmap_is_provided PASSED [ 37%]
tests/storage/entities/test_output_tag.py::TestOutputTagEntity::test_getters_and_setters_work_as_expected_for_outputtag PASSED [ 37%]
tests/storage/entities/test_output_tag_map.py::TestOutputTagMapEntity::test_outputtagmap_getters_and_setters PASSED [ 37%]
tests/storage/entities/test_output_tag_map.py::TestOutputTagMapEntity::test_equals_returns_true_for_matching_entities PASSED [ 37%]
tests/storage/entities/test_output_tag_map.py::TestOutputTagMapEntity::test_equals_returns_false_for_non_matching_entities PASSED [ 38%]
tests/storage/entities/test_output_tag_map.py::TestOutputTagMapEntity::test_mergeexisting_merges_and_updates_entity_when_ei_updated_at_greater_than_this_updated_at_at PASSED [ 38%]
tests/storage/entities/test_output_tag_map.py::TestOutputTagMapEntity::test_mergeexisting_does_not_merge_when_ei_updated_at_less_than_or_equal_this_updated_at_at PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_fromtxid_valid_txid_with_rawtx_and_merkle_proof_real_database PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_fromtxid_txid_with_no_rawtx_available PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_fromtxid_txid_with_no_merkle_proof_available PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_proventx_getters_and_setters PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_identifies_matching_proventx_entities PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_identifies_non_matching_txid PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_identifies_non_matching_height PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_identifies_non_matching_merklepath PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_identifies_non_matching_syncmap PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_equals_proventxid_mismatch_without_syncmap PASSED [ 38%]
tests/storage/entities/test_proven_tx.py::TestProvenTxEntity::test_mergeexisting_always_returns_false PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_apinotify_getter_and_setter PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_gethistorysummary PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_parsehistorynote PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_updatestorage PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_insertormerge PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_equals_identifies_matching_entities PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_equals_identifies_non_matching_entities PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_mergenotifytransactionids PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_getters_and_setters PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_parsehistorynote_82 PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_mergehistory PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_isterminalstatus_with_real_data PASSED [ 38%]
tests/storage/entities/test_proven_tx_req.py::TestProvenTxReqEntity::test_mergeexisting_real_data PASSED [ 38%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_appends_to_string_log PASSED [ 38%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_appends_to_object_log PASSED [ 38%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_returns_undefined_for_invalid_input PASSED [ 38%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_formats_valid_log_without_network PASSED [ 38%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_formats_log_with_network_entries PASSED [ 39%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_handles_invalid_log_entries_gracefully PASSED [ 39%]
tests/storage/entities/test_stamp_log.py::TeststampLog::test_handles_non_string_log_gracefully PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_init_default PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_init_with_api_object PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_init_with_empty_api_object PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_entity_properties PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_to_api PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_equals_true PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_equals_false PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_merge_existing_updates PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_merge_existing_no_update PASSED [ 39%]
tests/storage/entities/test_sync_state.py::TestSyncState::test_sync_state_merge_new PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_creates_instance_with_default_values PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_creates_instance_with_provided_api_object PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getters_and_setters_work_correctly PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getbsvtx_returns_parsed_transaction PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getbsvtx_returns_undefined_if_no_rawtx PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getbsvtxins_returns_inputs PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getinputs_combines_spentby_and_rawtx_inputs PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_mergeexisting_updates_when_ei_updated_at_is_newer PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getbsvtx_handles_undefined_rawtx PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getinputs_handles_storage_lookups_and_input_merging PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getproventx_retrieves_proven_transaction PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getproventx_returns_undefined_when_proventxid_is_not_set PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getproventx_returns_undefined_when_no_matching_proventx_is_found PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getinputs_merges_known_inputs_correctly PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_get_version_returns_api_version PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_get_locktime_returns_api_locktime PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_set_id_updates_transactionid PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_get_entityname_returns_correct_value PASSED [ 39%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_get_entitytable_returns_correct_value PASSED [ 40%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_equals_returns_false_for_mismatched_other_properties PASSED [ 40%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_getinputs_handles_known_and_unknown_inputs PASSED [ 40%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_equals_identifies_matching_entities PASSED [ 40%]
tests/storage/entities/test_transaction.py::TestTransactionEntity::test_equals_identifies_non_matching_entities PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_creates_txlabel_with_default_values PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_creates_txlabel_with_provided_api_object PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_getters_and_setters_work_correctly PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_mergeexisting_does_not_update_txlabel_when_ei_updated_at_is_older PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_equals_identifies_matching_entities PASSED [ 40%]
tests/storage/entities/test_tx_label.py::TestTxLabelEntity::test_equals_identifies_non_matching_entities PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_creates_instance_with_default_values PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_creates_instance_with_provided_api_object PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_getters_and_setters_work_correctly_correctly PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_updateapi_does_nothing PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_get_id_throws_error PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_equals_checks_equality_correctly PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_mergefind_finds_or_creates_entity PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_mergenew_inserts_entity PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_mergeexisting_updates_entity PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_entityname_returns_correct_value PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_entitytable_returns_correct_value PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_equals_identifies_matching_entities_entities PASSED [ 40%]
tests/storage/entities/test_tx_label_map.py::TestTxLabelMapEntity::test_equals_identifies_non_matching_entities_entities PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_creates_user_with_default_values PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_creates_user_with_provided_api_object PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_getters_and_setters_work_correctly PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_equals_identifies_matching_entities PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_equals_identifies_non_matching_entities PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_handles_edge_cases_in_constructor PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_handles_large_input_values PASSED [ 40%]
tests/storage/entities/test_users.py::TestUsersEntity::test_handles_empty_api_object PASSED [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_id_getter_and_setter_work_correctly PASSED [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_entityname_returns_user PASSED [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_entitytable_returns_users PASSED [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_mergeexisting_updates_user_when_ei_updated_at_is_newer SKIPPEDge-local)) [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_mergeexisting_does_not_update_user_when_ei_updated_at_is_older PASSED [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_mergeexisting_updates_user_with_trx SKIPPEDge-local)) [ 41%]
tests/storage/entities/test_users.py::TestUsersEntity::test_mergenew_always_throws_error PASSED [ 41%]
tests/storage/test_count.py::Testcount::test_count_proventx PASSED       [ 41%]
tests/storage/test_count.py::Testcount::test_count_proventxreq PASSED    [ 41%]
tests/storage/test_count.py::Testcount::test_count_user PASSED           [ 41%]
tests/storage/test_count.py::Testcount::test_count_certificate PASSED    [ 41%]
tests/storage/test_count.py::Testcount::test_count_certificatefield PASSED [ 41%]
tests/storage/test_count.py::Testcount::test_count_outputbasket PASSED   [ 41%]
tests/storage/test_count.py::Testcount::test_count_transaction PASSED    [ 41%]
tests/storage/test_count.py::Testcount::test_count_commission PASSED     [ 41%]
tests/storage/test_count.py::Testcount::test_count_output PASSED         [ 41%]
tests/storage/test_count.py::Testcount::test_count_outputtag PASSED      [ 41%]
tests/storage/test_count.py::Testcount::test_count_outputtagmap PASSED   [ 41%]
tests/storage/test_count.py::Testcount::test_count_txlabel PASSED        [ 41%]
tests/storage/test_count.py::Testcount::test_count_txlabelmap PASSED     [ 41%]
tests/storage/test_count.py::Testcount::test_count_monitorevent PASSED   [ 41%]
tests/storage/test_count.py::Testcount::test_count_syncstate PASSED      [ 41%]
tests/storage/test_create_action.py::test_create_action_nosendchange_duplicate PASSED [ 41%]
tests/storage/test_create_action.py::test_create_action_output_tags_persisted PASSED [ 41%]
tests/storage/test_create_action.py::test_create_action_requires_user_id PASSED [ 41%]
tests/storage/test_create_action.py::test_create_action_sign_and_process_happy_path XFAIL [ 41%]
tests/storage/test_create_action.py::test_create_action_nosendchange_output_sequence XFAIL [ 41%]
tests/storage/test_create_action.py::test_create_action_randomizes_outputs XFAIL [ 41%]
tests/storage/test_create_action.py::test_create_action_known_txids_return_txid_only PASSED [ 41%]
tests/storage/test_find.py::test_find_proventx PASSED                    [ 41%]
tests/storage/test_find.py::test_find_proventxreq PASSED                 [ 42%]
tests/storage/test_find.py::test_find_users PASSED                       [ 42%]
tests/storage/test_find.py::test_find_certificates PASSED                [ 42%]
tests/storage/test_find.py::test_find_certificate_fields PASSED          [ 42%]
tests/storage/test_find.py::test_find_output_baskets PASSED              [ 42%]
tests/storage/test_find.py::test_find_outputs PASSED                     [ 42%]
tests/storage/test_find.py::test_find_output_tags_and_maps PASSED        [ 42%]
tests/storage/test_find.py::test_find_transactions_and_commissions PASSED [ 42%]
tests/storage/test_find.py::test_find_tx_labels_and_maps PASSED          [ 42%]
tests/storage/test_find.py::test_find_monitor_and_sync_state PASSED      [ 42%]
tests/storage/test_find.py::test_find_output_baskets_since_filter_per_user PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_proventx PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_proventxreq PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_user PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_certificate PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_certificatefield PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_outputbasket PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_transaction PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_commission PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_output PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_outputtag PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_outputtagmap PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_txlabel PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_txlabelmap PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_monitorevent PASSED [ 42%]
tests/storage/test_find_legacy.py::TestfindLegacy::test_find_syncstate PASSED [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_proventx PASSED    [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_proventxreq PASSED [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_user PASSED        [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_certificate PASSED [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_certificatefield PASSED [ 42%]
tests/storage/test_insert.py::Testinsert::test_insert_outputbasket PASSED [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_transaction PASSED [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_commission PASSED  [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_output PASSED      [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_outputtag PASSED   [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_outputtagmap PASSED [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_txlabel PASSED     [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_txlabelmap PASSED  [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_monitorevent PASSED [ 43%]
tests/storage/test_insert.py::Testinsert::test_insert_syncstate PASSED   [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderBasicOperations::test_storage_provider_initialization PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderBasicOperations::test_get_or_create_user_id PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderBasicOperations::test_find_or_insert_user PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderTransactionOperations::test_insert_transaction PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderTransactionOperations::test_find_transactions PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderTransactionOperations::test_update_transaction PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderOutputOperations::test_insert_output PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderOutputOperations::test_find_outputs PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderOutputOperations::test_find_output_baskets PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderCertificateOperations::test_insert_certificate PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderCertificateOperations::test_find_certificates PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderProvenTxOperations::test_insert_proven_tx PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderProvenTxOperations::test_find_proven_txs PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderProvenTxOperations::test_insert_proven_tx_req PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderProvenTxOperations::test_find_proven_tx_reqs PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderLabelOperations::test_find_or_insert_tx_label PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderLabelOperations::test_find_tx_labels PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderTagOperations::test_find_or_insert_output_tag PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderTagOperations::test_find_output_tags PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderSettings::test_get_settings PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderSettings::test_update_settings PASSED [ 43%]
tests/storage/test_provider_methods.py::TestStorageProviderUtilityMethods::test_count_methods PASSED [ 44%]
tests/storage/test_provider_methods.py::TestStorageProviderUtilityMethods::test_is_available PASSED [ 44%]
tests/storage/test_provider_methods.py::TestStorageProviderUtilityMethods::test_destroy PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_find_outputs_auth_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_certificates_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_actions_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_get_proven_or_raw_tx_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_verify_known_valid_transaction_false PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_include_transactions_returns_beef_key PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_specop_tags_do_not_error PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_include_transactions_accepts_known_txids PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_specop_wallet_balance_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_list_outputs_specop_set_wallet_change_params_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_find_or_insert_proven_tx_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_update_proven_tx_req_with_new_proven_tx_min_shape PASSED [ 44%]
tests/storage/test_provider_minimal.py::test_get_valid_beef_for_txid_min_bytes PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestStorageDataclasses::test_storage_process_action_args PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestStorageDataclasses::test_storage_process_action_results PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestStorageDataclasses::test_generate_change_input PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestStorageDataclasses::test_list_actions_args PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestStorageDataclasses::test_list_outputs_args PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_new_transaction_commit PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_new_transaction_delayed PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_send_with_transactions PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_send_with_delayed PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_missing_required_fields PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionExtended::test_process_action_new_tx_missing_fields PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeExtended::test_generate_change_basic PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeExtended::test_generate_change_with_existing_outputs PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeExtended::test_generate_change_insufficient_outputs PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestListActionsExtended::test_list_actions_with_labels_filter PASSED [ 44%]
tests/storage/test_storage_methods_coverage.py::TestListActionsExtended::test_list_actions_pagination PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListOutputsExtended::test_list_outputs_with_basket_filter PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListOutputsExtended::test_list_outputs_all_baskets PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListCertificatesExtended::test_list_certificates_with_pagination PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListCertificatesExtended::test_list_certificates_empty PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestInternalizeActionExtended::test_internalize_action_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestInternalizeActionExtended::test_internalize_action_with_existing_transaction PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestBeefOperationsExtended::test_get_beef_for_transaction_not_found PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestBeefOperationsExtended::test_get_beef_for_transaction_found PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestNetworkOperationsExtended::test_attempt_to_post_reqs_to_network_no_requests PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestNetworkOperationsExtended::test_attempt_to_post_reqs_to_network_with_requests PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatusExtended::test_review_status_with_limit PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatusExtended::test_review_status_no_limit PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestPurgeDataExtended::test_purge_data_no_aged_before PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestPurgeDataExtended::test_purge_data_with_aged_before PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunkExtended::test_get_sync_chunk_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestProcessAction::test_process_action_requires_storage PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestProcessAction::test_process_action_requires_user_id PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestProcessAction::test_process_action_basic_flow PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChange::test_generate_change_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListActions::test_list_actions_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListOutputs::test_list_outputs_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListCertificates::test_list_certificates_requires_storage PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListCertificates::test_list_certificates_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestListCertificates::test_list_certificates_with_pagination PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestInternalizeAction::test_internalize_action_requires_storage PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestInternalizeAction::test_internalize_action_basic PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestInternalizeAction::test_internalize_action_with_outputs PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_missing_storage PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_missing_txid PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_not_found PASSED [ 45%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_from_proven_tx PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_from_req_with_beef PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_from_req_no_beef PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_construct_beef PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_beef_unavailable PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_merge_beef PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetBeefForTransaction::test_get_beef_for_transaction_missing_raw_tx PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_missing_storage PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_missing_user_id PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_success PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_no_requests_available PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatus::test_review_status_missing_storage PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatus::test_review_status_missing_user_id PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatus::test_review_status_success PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestReviewStatus::test_review_status_no_aged_transactions PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestPurgeData::test_purge_data_missing_storage PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestPurgeData::test_purge_data_success PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestPurgeData::test_purge_data_no_matches PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunk::test_get_sync_chunk_missing_storage PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunk::test_get_sync_chunk_missing_user_id PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunk::test_get_sync_chunk_success PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunk::test_list_actions_zero_limit PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGetSyncChunk::test_internalize_action_missing_tx PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_with_send_with PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_delayed PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_no_send PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_with_log PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_new_transaction_commit PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_missing_required_fields PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_proven_tx_creation PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestProcessActionAdvanced::test_process_action_proven_tx_with_raw_tx PASSED [ 46%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeAdvanced::test_generate_change_multiple_inputs PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeAdvanced::test_generate_change_zero_change PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestGenerateChangeAdvanced::test_generate_change_large_amount PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestListActionsAdvanced::test_list_actions_with_labels_filter PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestListActionsAdvanced::test_list_actions_with_offset PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestListActionsAdvanced::test_list_actions_large_limit PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestListOutputsAdvanced::test_list_outputs_with_basket PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestListOutputsAdvanced::test_list_outputs_with_filters PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_process_action_invalid_auth PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_empty_inputs PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_exact_match_insufficient PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_target_insufficient PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_successful_selection PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_partial_selection PASSED [ 47%]
tests/storage/test_storage_methods_coverage.py::TestEdgeCases::test_generate_change_exact_match PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_requires_storage PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_requires_user_id PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_basic_flow PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_with_sync_state PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_with_transactions PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_with_chunk_size_and_offset PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_with_sync_from_filter PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_creates_sync_state PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_updates_sync_state PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestGetSyncChunk::test_get_sync_chunk_with_outputs_and_certificates PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestPurgeData::test_purge_data_requires_storage PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestPurgeData::test_purge_data_basic_completed_purge PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestPurgeData::test_purge_data_multiple_flags PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestPurgeData::test_purge_data_empty_params PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestReviewStatus::test_review_status_requires_storage PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestReviewStatus::test_review_status_basic_flow PASSED [ 47%]
tests/storage/test_storage_methods_expanded.py::TestReviewStatus::test_review_status_no_aged_limit PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestReviewStatus::test_review_status_with_aged_requests PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_requires_storage PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_empty_txids PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestAttemptToPostReqsToNetwork::test_attempt_to_post_reqs_to_network_with_txids PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestGetBeefForTransaction::test_get_beef_for_transaction_requires_storage PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestGetBeefForTransaction::test_get_beef_for_transaction_basic_flow PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestGetBeefForTransaction::test_get_beef_for_transaction_with_protocol PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestGetBeefForTransaction::test_get_beef_for_transaction_with_options PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestGetBeefForTransaction::test_get_beef_for_transaction_returns_none_when_no_beef PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestStorageMethodIntegration::test_sync_chunk_and_purge_integration PASSED [ 48%]
tests/storage/test_storage_methods_expanded.py::TestStorageMethodIntegration::test_review_and_post_reqs_integration PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestStorageProviderInitialization::test_provider_creation PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestStorageProviderInitialization::test_is_storage_provider PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestStorageProviderInitialization::test_is_available_after_make_available PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestStorageProviderInitialization::test_get_settings PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestStorageProviderInitialization::test_set_and_get_services PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestUserManagement::test_find_or_insert_user_new_user PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestUserManagement::test_find_or_insert_user_existing_user PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestUserManagement::test_get_or_create_user_id PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestOutputBasketManagement::test_find_or_insert_output_basket_new PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestOutputBasketManagement::test_find_or_insert_output_basket_existing PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestOutputBasketManagement::test_find_output_baskets_auth PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestListOperations::test_list_outputs_with_pagination PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestListOperations::test_list_outputs_with_basket_filter PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestListOperations::test_list_certificates_empty PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestListOperations::test_list_actions_empty PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestListOperations::test_list_actions_with_labels PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestCertificateOperations::test_find_certificates_auth PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperations::test_get_proven_or_raw_tx_not_found PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperations::test_verify_known_valid_transaction_not_found PASSED [ 48%]
tests/storage/test_storage_provider_coverage.py::TestOutputOperations::test_find_outputs_auth_empty PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestOutputOperations::test_find_outputs_auth_with_filters PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestInternalMethods::test_normalize_dict_keys PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestInternalMethods::test_normalize_dict_keys_none_input PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestInternalMethods::test_to_api_key PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestInternalMethods::test_to_snake_case PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestInternalMethods::test_normalize_key PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperations::test_insert_user_generic PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperations::test_model_to_dict_conversion PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestErrorHandling::test_relinquish_output_not_found PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestErrorHandling::test_list_outputs_invalid_user PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestSyncState::test_find_or_insert_sync_state_auth PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestSyncState::test_find_or_insert_sync_state PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestSyncState::test_find_sync_states PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_output_basket PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_proven_tx PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_certificate PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_certificate_field PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_output_tag PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDInsertOperations::test_insert_tx_label PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_users PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_users_all PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_output_baskets PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_proven_txs PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_certificates PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_certificate_fields PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_output_tags PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_tx_labels PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_outputs PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDFindOperations::test_find_transactions PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_users PASSED [ 49%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_certificates PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_outputs PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_output_baskets PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_transactions PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_tx_labels PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDCountOperations::test_count_output_tags PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDUpdateOperations::test_update_user PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDUpdateOperations::test_update_certificate PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestCRUDUpdateOperations::test_update_output_basket PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_find_or_insert_tx_label PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_find_or_insert_tx_label_existing PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_find_or_insert_output_tag PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_find_or_insert_output_tag_existing PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_get_tags_for_output_id PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestTagAndLabelManagement::test_get_labels_for_transaction_id PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestProvenTransactionOperations::test_find_or_insert_proven_tx_new PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestProvenTransactionOperations::test_find_or_insert_proven_tx_existing PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestProvenTransactionOperations::test_get_raw_tx_of_known_valid_transaction PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestMigrationAndSetup::test_migrate PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestMigrationAndSetup::test_destroy PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestMigrationAndSetup::test_make_available_twice PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestKeyConversions::test_to_api_key_multiple PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestKeyConversions::test_to_snake_case_multiple PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestKeyConversions::test_normalize_dict_keys_complex PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestKeyConversions::test_normalize_dict_keys_empty PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperations::test_build_minimal_beef_for_txids_empty PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperations::test_get_valid_beef_for_txid_nonexistent PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_outputs_with_tags_filter PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_outputs_with_type_filter PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_certificates_with_certifiers PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_certificates_with_types PASSED [ 50%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_actions_with_includeLabels PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_actions_with_includeInputs PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestListOperationsAdvanced::test_list_actions_with_includeOutputs PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_find_transactions_empty PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_find_transactions_with_query PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_find_transactions_all PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_update_transaction_status_success PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_update_transaction_status_not_found PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_update_transaction_status_invalid_status PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_minimal_valid PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_missing_required_args PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_invalid_auth PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_transaction_not_found PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_invalid_status PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionMethods::test_process_action_status_transitions PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestAdditionalMethods::test_now_method PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestAdditionalMethods::test_get_services_not_set PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestAdditionalMethods::test_is_storage_provider_returns_boolean PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestCreateAction::test_create_action_basic PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestCreateAction::test_create_action_with_change PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestInternalizeAction::test_internalize_action_basic PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestCertificateOperationsExtended::test_relinquish_certificate PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestCertificateOperationsExtended::test_insert_certificate_auth PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestSyncStateOperations::test_find_sync_states PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestSyncStateOperations::test_update_sync_state PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperationsExtended::test_get_beef_for_transaction PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperationsExtended::test_get_valid_beef_for_known_txid PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperationsExtended::test_attempt_to_post_reqs_to_network PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestBeefOperationsExtended::test_get_reqs_and_beef_to_share_with_world PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestCommissionOperations::test_update_commission PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestMonitorOperations::test_update_monitor_event PASSED [ 51%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperationsExtended::test_update_transactions_status PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperationsExtended::test_confirm_spendable_outputs SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperationsExtended::test_process_sync_chunk PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperationsExtended::test_merge_req_to_beef_to_share_externally PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestTransactionOperationsExtended::test_get_proven_or_req PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestAdminOperations::test_admin_stats PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestChangeAllocation::test_allocate_change_input SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestChangeAllocation::test_count_change_inputs SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestAbortOperations::test_abort_action PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestReviewAndPurge::test_review_status PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestReviewAndPurge::test_purge_data SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestProvenTxOperationsExtended::test_update_proven_tx_req_with_new_proven_tx SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestProvenTxOperationsExtended::test_update_proven_tx_req_dynamics PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestSetActive::test_set_active SKIPPED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperationsExtended::test_insert_generic PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperationsExtended::test_find_generic PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperationsExtended::test_count_generic PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperationsExtended::test_update_generic PASSED [ 52%]
tests/storage/test_storage_provider_coverage.py::TestGenericCRUDOperationsExtended::test_get_model PASSED [ 52%]
tests/storage/test_update.py::test_update_proventx PASSED                [ 52%]
tests/storage/test_update.py::test_update_proventx_all_fields PASSED     [ 52%]
tests/storage/test_update.py::test_update_proventxreq PASSED             [ 52%]
tests/storage/test_update.py::test_update_user PASSED                    [ 52%]
tests/storage/test_update.py::test_update_certificate PASSED             [ 52%]
tests/storage/test_update.py::test_update_certificate_field PASSED       [ 52%]
tests/storage/test_update.py::test_update_output_basket PASSED           [ 52%]
tests/storage/test_update.py::test_update_transaction PASSED             [ 52%]
tests/storage/test_update.py::test_update_commission PASSED              [ 52%]
tests/storage/test_update.py::test_update_output PASSED                  [ 52%]
tests/storage/test_update.py::test_update_output_tag PASSED              [ 52%]
tests/storage/test_update.py::test_update_monitor_event PASSED           [ 52%]
tests/storage/test_update.py::test_update_sync_state PASSED              [ 53%]
tests/storage/test_update.py::test_update_tx_label PASSED                [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventx PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventx_193 PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventx_set_created_at_and_updated_at_time PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventx_setting_individual_values PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventxreq PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventxreq_set_created_at_and_updated_at_time PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_proventxreq_setting_individual_values PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_user PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_user_set_created_at_and_updated_at_time PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_user_trigger_db_unique_constraint_errors PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_user_trigger_db_foreign_key_constraint_errors PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_user_table_setting_individual_values PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_certificate PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_certificate_set_created_at_and_updated_at_time PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_certificate_trigger_db_unique_constraint_errors PASSED [ 53%]
tests/storage/test_update_advanced.py::Testupdate2::test_update_certificate_trigger_db_foreign_key_constraint_errors PASSED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_xor_bytes_empty_inputs FAILED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_xor_bytes_single_byte PASSED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_bytes_to_int_list_empty PASSED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_int_list_to_bytes_bounds PASSED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_generate_random_bytes_length PASSED [ 53%]
tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_generate_random_bytes_zero PASSED [ 53%]
tests/test_edge_cases.py::TestUMPTokenEdgeCases::test_empty_token_fields PASSED [ 53%]
tests/test_edge_cases.py::TestUMPTokenEdgeCases::test_token_with_outpoint PASSED [ 53%]
tests/test_edge_cases.py::TestPermissionTokenEdgeCases::test_empty_permission_request PASSED [ 53%]
tests/test_edge_cases.py::TestPermissionTokenEdgeCases::test_expired_token_handling PASSED [ 53%]
tests/test_edge_cases.py::TestPermissionTokenEdgeCases::test_token_cache_key_generation PASSED [ 53%]
tests/test_edge_cases.py::TestCWIWalletManagerEdgeCases::test_profile_name_validation PASSED [ 53%]
tests/test_edge_cases.py::TestCWIWalletManagerEdgeCases::test_snapshot_validation FAILED [ 53%]
tests/test_edge_cases.py::TestIntegrationEdgeCases::test_permission_manager_with_mock_wallet PASSED [ 54%]
tests/test_edge_cases.py::TestIntegrationEdgeCases::test_spending_calculation_edge_cases PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_single_reader PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_single_writer PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_multiple_concurrent_readers PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_writer_blocks_readers PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_readers_block_writer PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_writer_priority_over_readers PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_exception_in_read_fn_releases_lock PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_exception_in_write_fn_releases_lock PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_lock_state_initialization PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_multiple_sequential_operations PASSED [ 54%]
tests/test_swmr_lock_coverage.py::TestSingleWriterMultiReaderLock::test_readers_notified_after_writer_releases PASSED [ 54%]
tests/unit/test_errors.py::TestInvalidParameterError::test_creates_error_with_parameter_name PASSED [ 54%]
tests/unit/test_errors.py::TestInvalidParameterError::test_creates_error_with_custom_message PASSED [ 54%]
tests/unit/test_errors.py::TestInvalidParameterError::test_is_exception_instance PASSED [ 54%]
tests/unit/test_errors.py::TestInvalidParameterError::test_can_be_raised_and_caught PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestArraysEqual::test_returns_true_for_equal_arrays PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestArraysEqual::test_returns_false_for_different_lengths PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestArraysEqual::test_returns_false_for_different_values PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestArraysEqual::test_returns_true_for_empty_arrays PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestOptionalArraysEqual::test_returns_true_when_both_none PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestOptionalArraysEqual::test_returns_false_when_one_is_none PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestOptionalArraysEqual::test_compares_arrays_when_both_exist PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestMaxDate::test_returns_later_date_when_both_provided PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestMaxDate::test_returns_earlier_date_when_later_is_first PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestMaxDate::test_returns_first_date_when_only_first_provided PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestMaxDate::test_returns_second_date_when_only_second_provided PASSED [ 54%]
tests/unit/test_utility_arrays_dates.py::TestMaxDate::test_returns_none_when_both_none PASSED [ 54%]
tests/unit/test_utility_helpers.py::TestToWalletNetwork::test_converts_main_to_mainnet PASSED [ 54%]
tests/unit/test_utility_helpers.py::TestToWalletNetwork::test_converts_test_to_testnet PASSED [ 54%]
tests/unit/test_utility_helpers.py::TestVerifyTruthy::test_returns_truthy_value PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyTruthy::test_raises_error_for_none PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyTruthy::test_raises_error_for_empty_string PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyTruthy::test_uses_custom_description PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyHexString::test_trims_and_lowercases_hex_string PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyHexString::test_raises_error_for_non_string PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyNumber::test_returns_valid_number PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyNumber::test_raises_error_for_none PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyNumber::test_raises_error_for_non_number PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyInteger::test_returns_valid_integer PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyInteger::test_raises_error_for_float PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyInteger::test_raises_error_for_none PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyId::test_returns_valid_id PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyId::test_raises_error_for_zero PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyId::test_raises_error_for_negative PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyId::test_raises_error_for_float PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOneOrNone::test_returns_first_element_for_single_item PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOneOrNone::test_returns_none_for_empty_list PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOneOrNone::test_raises_error_for_multiple_items PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOne::test_returns_element_for_single_item PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOne::test_raises_error_for_empty_list PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOne::test_raises_error_for_multiple_items PASSED [ 55%]
tests/unit/test_utility_helpers.py::TestVerifyOne::test_uses_custom_error_description PASSED [ 55%]
tests/unit/test_wallet_constructor.py::TestWalletConstructor::test_constructor_creates_wallet_with_default_labels_and_baskets PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightBasic::test_returns_valid_header_string PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightBasic::test_requires_services_configured PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightValidation::test_raises_error_for_negative_height PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightValidation::test_raises_error_for_missing_height PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightValidation::test_raises_error_for_invalid_height_type PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightValidation::test_accepts_zero_height PASSED [ 55%]
tests/unit/test_wallet_getheaderforheight.py::TestGetHeaderForHeightIntegration::test_returns_correct_header_format PASSED [ 55%]
tests/unit/test_wallet_getheight.py::TestGetHeightBasic::test_returns_positive_height PASSED [ 55%]
tests/unit/test_wallet_getheight.py::TestGetHeightBasic::test_requires_services_configured PASSED [ 56%]
tests/unit/test_wallet_getheight.py::TestGetHeightWithOriginator::test_accepts_valid_originator PASSED [ 56%]
tests/unit/test_wallet_getknowntxids.py::TestGetKnownTxids::test_returns_empty_array_when_no_txids_provided PASSED [ 56%]
tests/unit/test_wallet_getknowntxids.py::TestGetKnownTxids::test_adds_new_known_txids PASSED [ 56%]
tests/unit/test_wallet_getknowntxids.py::TestGetKnownTxids::test_avoids_duplicating_txids PASSED [ 56%]
tests/unit/test_wallet_getknowntxids.py::TestGetKnownTxids::test_returns_sorted_txids PASSED [ 56%]
tests/unit/test_wallet_getknowntxids.py::TestGetKnownTxids::test_handles_invalid_txids_gracefully PASSED [ 56%]
tests/unit/test_wallet_getnetwork.py::TestWalletGetNetwork::test_returns_testnet_for_test_chain PASSED [ 56%]
tests/unit/test_wallet_getnetwork.py::TestWalletGetNetwork::test_returns_mainnet_for_main_chain PASSED [ 56%]
tests/unit/test_wallet_getversion.py::TestWalletGetVersion::test_returns_correct_wallet_version PASSED [ 56%]
tests/unit/test_wallet_isauthenticated.py::TestIsAuthenticated::test_resolves_with_authenticated_true PASSED [ 56%]
tests/unit/test_wallet_waitforauthentication.py::TestWaitForAuthentication::test_eventually_resolves PASSED [ 56%]
tests/universal/test_abortaction.py::TestUniversalVectorsAbortAction::test_abortaction_wire_matches_universal_vectors XFAILpre-created in
database)                                                                [ 56%]
tests/universal/test_acquirecertificate.py::TestUniversalVectorsAcquireCertificate::test_acquirecertificate_simple_json_matches_universal_vectors XFAIL [ 56%]
tests/universal/test_acquirecertificate.py::TestUniversalVectorsAcquireCertificate::test_acquirecertificate_simple_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_acquirecertificate.py::TestUniversalVectorsAcquireCertificate::test_acquirecertificate_issuance_json_matches_universal_vectors XFAIL [ 56%]
tests/universal/test_acquirecertificate.py::TestUniversalVectorsAcquireCertificate::test_acquirecertificate_issuance_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_createaction.py::TestUniversalVectorsCreateAction::test_createaction_1out_json_matches_universal_vectors SKIPPEDion) [ 56%]
tests/universal/test_createaction.py::TestUniversalVectorsCreateAction::test_createaction_1out_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_createaction.py::TestUniversalVectorsCreateAction::test_createaction_nosignandprocess_json_matches_universal_vectors SKIPPED [ 56%]
tests/universal/test_createaction.py::TestUniversalVectorsCreateAction::test_createaction_nosignandprocess_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_createhmac.py::TestUniversalVectorsCreateHmac::test_createhmac_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_createsignature.py::TestUniversalVectorsCreateSignature::test_createsignature_json_matches_universal_vectors SKIPPED [ 56%]
tests/universal/test_createsignature.py::TestUniversalVectorsCreateSignature::test_createsignature_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_decrypt.py::TestUniversalVectorsDecrypt::test_decrypt_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_discoverbyattributes.py::TestUniversalVectorsDiscoverByAttributes::test_discoverbyattributes_wire_matches_universal_vectors SKIPPED [ 56%]
tests/universal/test_discoverbyidentitykey.py::TestUniversalVectorsDiscoverByIdentityKey::test_discoverbyidentitykey_wire_matches_universal_vectors SKIPPED [ 56%]
tests/universal/test_encrypt.py::TestUniversalVectorsEncrypt::test_encrypt_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_encrypt_min.py::test_encrypt_decrypt_roundtrip PASSED [ 56%]
tests/universal/test_encrypt_min.py::test_encrypt_requires_bytes PASSED  [ 56%]
tests/universal/test_getheaderforheight.py::TestUniversalVectorsGetHeaderForHeight::test_getheaderforheight_wire_matches_universal_vectors PASSED [ 56%]
tests/universal/test_getheight.py::TestUniversalVectorsGetHeight::test_getheight_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_getnetwork.py::TestUniversalVectorsGetNetwork::test_getnetwork_json_matches_universal_vectors PASSED [ 57%]
tests/universal/test_getnetwork.py::TestUniversalVectorsGetNetwork::test_getnetwork_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_getpublickey.py::TestUniversalVectorsGetPublicKey::test_getpublickey_json_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_getpublickey.py::TestUniversalVectorsGetPublicKey::test_getpublickey_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_getversion.py::TestUniversalVectorsGetVersion::test_getversion_json_matches_universal_vectors PASSED [ 57%]
tests/universal/test_getversion.py::TestUniversalVectorsGetVersion::test_getversion_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_hmac_min.py::test_create_hmac_and_verify_roundtrip PASSED [ 57%]
tests/universal/test_hmac_min.py::test_verify_hmac_fail_on_tamper PASSED [ 57%]
tests/universal/test_internalizeaction.py::TestUniversalVectorsInternalizeAction::test_internalizeaction_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_isauthenticated.py::TestUniversalVectorsIsAuthenticated::test_isauthenticated_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_listactions.py::TestUniversalVectorsListActions::test_listActions_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_listcertificates.py::TestUniversalVectorsListCertificates::test_listcertificates_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_listoutputs.py::TestUniversalVectorsListOutputs::test_listoutputs_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_provecertificate.py::TestUniversalVectorsProveCertificate::test_provecertificate_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_relinquishcertificate.py::TestUniversalVectorsRelinquishCertificate::test_relinquishcertificate_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_relinquishoutput.py::TestUniversalVectorsRelinquishOutput::test_relinquishoutput_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_revealcounterpartykeylinkage.py::TestUniversalVectorsRevealCounterpartyKeyLinkage::test_revealcounterpartykeylinkage_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_revealspecifickeylinkage.py::TestUniversalVectorsRevealSpecificKeyLinkage::test_revealspecifickeylinkage_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_signaction.py::TestUniversalVectorsSignAction::test_signaction_wire_matches_universal_vectors SKIPPED [ 57%]
tests/universal/test_signature_min.py::test_create_signature_and_verify_roundtrip PASSED [ 57%]
tests/universal/test_signature_min.py::test_verify_signature_fail_on_modified_data PASSED [ 57%]
tests/universal/test_signature_min.py::test_direct_hash_sign_and_verify PASSED [ 57%]
tests/universal/test_verifyhmac.py::TestUniversalVectorsVerifyHmac::test_verifyHmac_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_verifysignature.py::TestUniversalVectorsVerifySignature::test_verifysignature_wire_matches_universal_vectors PASSED [ 57%]
tests/universal/test_waitforauthentication.py::TestUniversalVectorsWaitForAuthentication::test_waitforauthentication_wire_matches_universal_vectors PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiAdd::test_add_two_ints PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiAdd::test_add_two_max_satoshis PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiAdd::test_add_two_negative_ints PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiAdd::test_add_max_satoshis_and_negative_max_satoshis PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSubtract::test_subtract_two_ints PASSED [ 57%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSubtract::test_subtract_resulting_in_zero PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSubtract::test_subtract_to_obtain_negative_result PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSubtract::test_subtract_exceeding_max_positive_value PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiFrom::test_from_positive_int PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiFrom::test_from_negative_int PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiFrom::test_from_max_satoshi PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiFrom::test_from_max_satoshi_plus_one PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSum::test_sum_of_empty_sequence PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSum::test_sum_of_multiple_elements PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSum::test_sum_of_multiple_elements_with_different_signs PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiSum::test_sum_exceeding_max_satoshi_value PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiMultiply::test_multiply_two_ints PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiMultiply::test_multiplication_overflow PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiMultiply::test_multiply_negative_and_positive PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiEqual::test_equal_numbers PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiEqual::test_unequal_numbers PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiEqual::test_try_equal_with_max_satoshis_plus_one PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiToUint64::test_positive_value PASSED [ 58%]
tests/utils/satoshi/test_satoshi.py::TestSatoshiToUint64::test_negative_value PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressGeneration::test_pubkey_to_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressGeneration::test_script_to_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressGeneration::test_generate_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressValidation::test_validate_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressValidation::test_is_valid_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressConversion::test_address_to_script PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressConversion::test_address_to_pubkey_hash PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressTypes::test_p2pkh_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressTypes::test_p2sh_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressTypes::test_testnet_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressEncoding::test_encode_address PASSED [ 58%]
tests/utils/test_address_coverage.py::TestAddressEncoding::test_decode_address PASSED [ 58%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsSuccess::test_aggregate_single_success PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsSuccess::test_aggregate_multiple_success PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsDoubleSpend::test_aggregate_double_spend_no_storage PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsDoubleSpend::test_aggregate_double_spend_with_storage PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsDoubleSpend::test_aggregate_double_spend_with_multiple_competing PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsDoubleSpend::test_aggregate_double_spend_storage_error PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsServiceError::test_aggregate_service_error PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsServiceError::test_aggregate_multiple_service_errors PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsInvalidTx::test_aggregate_invalid_tx PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsInvalidTx::test_aggregate_multiple_invalid PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsMixed::test_aggregate_mixed_statuses PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsErrors::test_aggregate_missing_detail PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsErrors::test_aggregate_mismatched_txids PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsErrors::test_aggregate_unknown_status PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsErrors::test_aggregate_invalid_status PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsErrors::test_aggregate_unrecognized_status PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_empty_lists PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_missing_txid_in_request PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_none_competing_txs PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_empty_competing_txs_list PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_double_spend_beef_merge_exception PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsEdgeCases::test_aggregate_preserve_original_fields PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsComplex::test_aggregate_large_batch PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsComplex::test_aggregate_with_bytes_rawtx PASSED [ 59%]
tests/utils/test_aggregate_results_complete.py::TestAggregateActionResultsComplex::test_aggregate_order_preservation PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResults::test_aggregate_empty_results PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResults::test_aggregate_single_result PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResults::test_aggregate_multiple_results PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResults::test_aggregate_mixed_status PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResults::test_aggregate_with_errors PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestCombineResults::test_combine_two_results PASSED [ 59%]
tests/utils/test_aggregate_results_coverage.py::TestCombineResults::test_combine_empty_results PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestCombineResults::test_combine_overlapping_keys PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestMergeResultArrays::test_merge_empty_arrays PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestMergeResultArrays::test_merge_two_arrays PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestMergeResultArrays::test_merge_arrays_with_duplicates PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestMergeResultArrays::test_merge_arrays_different_types PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResultsAdvanced::test_aggregate_nested_results PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResultsAdvanced::test_aggregate_large_dataset PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestAggregateResultsAdvanced::test_aggregate_with_none_values PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestEdgeCases::test_aggregate_invalid_input PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestEdgeCases::test_combine_mismatched_types PASSED [ 60%]
tests/utils/test_aggregate_results_coverage.py::TestEdgeCases::test_merge_single_array PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefUtilities::test_import_beef_module PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefUtilities::test_encode_beef_basic PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefUtilities::test_decode_beef_basic PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefUtilities::test_beef_roundtrip PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefValidation::test_validate_beef_structure PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefValidation::test_validate_invalid_beef PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefMerkleProofs::test_extract_merkle_proof PASSED [ 60%]
tests/utils/test_beef_utils_coverage.py::TestBeefMerkleProofs::test_add_merkle_proof_to_beef PASSED [ 60%]
tests/utils/test_bitrails.py::TestBitrails::test_verify_merkle_proof_to_merkle_path PASSED [ 60%]
tests/utils/test_bitrails.py::TestBitrails::test_bitails_get_merkle_path PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_bytes PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_list PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_hex_string PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_utf8_string PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_base64_string PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_with_invalid_type PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_empty_bytes PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsBuffer::test_as_buffer_empty_list PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_bytes_to_hex PASSED [ 60%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_bytes_to_base64 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_bytes_to_utf8 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_hex_to_hex PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_hex_to_utf8 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_utf8_to_hex PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_utf8_to_utf8 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_base64_to_hex PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_list_to_hex PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_list_to_utf8 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_list_to_base64 PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_defaults_return_enc_to_enc PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_with_unsupported_encoding PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsString::test_as_string_with_invalid_type PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_list PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_bytes PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_hex_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_utf8_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_base64_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_with_invalid_type PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsArray::test_as_array_empty PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_bytes PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_list PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_hex_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_utf8_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_base64_string PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_with_invalid_type PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestAsUint8Array::test_as_uint8array_empty PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestEdgeCases::test_round_trip_conversions PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestEdgeCases::test_unicode_string_handling PASSED [ 61%]
tests/utils/test_buffer_utils_complete.py::TestEdgeCases::test_large_data PASSED [ 61%]
tests/utils/test_change_distribution.py::TestChangeDistribution::test_change_distribution_with_various_scenarios PASSED [ 61%]
tests/utils/test_change_distribution.py::TestChangeDistributionPanics::test_change_distribution_panics_on_invalid_inputs PASSED [ 62%]
tests/utils/test_change_distribution.py::TestChangeDistributionWithActualRandomizer::test_change_distribution_with_real_randomizer PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_no_env_file PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_with_explicit_file PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_default_env_exists PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_no_env_no_file PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_returns_dict PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_includes_all_environ_vars PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_with_nonexistent_file PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_empty_file PASSED [ 62%]
tests/utils/test_config_complete.py::TestLoadConfig::test_load_config_with_comments PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_basic PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_no_name PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_custom_level_int PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_custom_level_string PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_string_levels PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_invalid_string_level PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_lowercase_string_level PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_custom_format PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_default_format PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_no_duplicate_handlers PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_handler_type PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_handler_level PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_different_names PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_can_log PASSED [ 62%]
tests/utils/test_config_complete.py::TestConfigureLogger::test_configure_logger_respects_level PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_returns_dict PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_version PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_inputs PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_outputs PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_locktime PASSED [ 62%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_fee_rate PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_dust_limit PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_randomize_outputs PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_use_all_inputs PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_has_change_derivation_path PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_default_values PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_multiple_calls PASSED [ 63%]
tests/utils/test_config_complete.py::TestCreateActionTxAssembler::test_create_assembler_mutable PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigIntegration::test_load_and_use_config PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigIntegration::test_create_assembler_and_modify PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigEdgeCases::test_load_config_with_special_characters PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigEdgeCases::test_configure_logger_empty_name PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigEdgeCases::test_configure_logger_very_long_name PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigEdgeCases::test_create_assembler_repeated_calls PASSED [ 63%]
tests/utils/test_config_complete.py::TestConfigEdgeCases::test_load_config_large_env PASSED [ 63%]
tests/utils/test_config_coverage.py::TestLoadConfig::test_load_config_default PASSED [ 63%]
tests/utils/test_config_coverage.py::TestLoadConfig::test_load_config_from_file PASSED [ 63%]
tests/utils/test_config_coverage.py::TestLoadConfig::test_load_config_from_dict PASSED [ 63%]
tests/utils/test_config_coverage.py::TestLoadConfig::test_load_config_empty PASSED [ 63%]
tests/utils/test_config_coverage.py::TestLoadConfig::test_load_config_with_defaults PASSED [ 63%]
tests/utils/test_config_coverage.py::TestGetConfigValue::test_get_existing_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestGetConfigValue::test_get_non_existing_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestGetConfigValue::test_get_value_with_default PASSED [ 63%]
tests/utils/test_config_coverage.py::TestGetConfigValue::test_get_nested_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestGetConfigValue::test_get_value_various_types PASSED [ 63%]
tests/utils/test_config_coverage.py::TestSetConfigValue::test_set_new_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestSetConfigValue::test_set_existing_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestSetConfigValue::test_set_nested_value PASSED [ 63%]
tests/utils/test_config_coverage.py::TestSetConfigValue::test_set_value_various_types PASSED [ 63%]
tests/utils/test_config_coverage.py::TestValidateConfig::test_validate_valid_config PASSED [ 63%]
tests/utils/test_config_coverage.py::TestValidateConfig::test_validate_invalid_config PASSED [ 63%]
tests/utils/test_config_coverage.py::TestValidateConfig::test_validate_empty_config PASSED [ 64%]
tests/utils/test_config_coverage.py::TestValidateConfig::test_validate_config_with_schema PASSED [ 64%]
tests/utils/test_config_coverage.py::TestConfigAdvanced::test_load_config_merge PASSED [ 64%]
tests/utils/test_config_coverage.py::TestConfigAdvanced::test_config_deep_nesting PASSED [ 64%]
tests/utils/test_config_coverage.py::TestConfigAdvanced::test_config_special_characters PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_load_config_none PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_get_value_from_none_config PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_set_value_in_none_config PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_validate_none_config PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_config_circular_reference PASSED [ 64%]
tests/utils/test_config_coverage.py::TestEdgeCases::test_config_very_large_dict PASSED [ 64%]
tests/utils/test_contains_utxo.py::TestContainsUtxo::test_contains_utxo_checks_presence_correctly PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58Encoding::test_base58_encode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58Encoding::test_base58_decode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58Encoding::test_base58_roundtrip PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58CheckEncoding::test_base58check_encode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58CheckEncoding::test_base58check_decode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase58CheckEncoding::test_base58check_invalid_checksum PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase64Encoding::test_base64_encode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBase64Encoding::test_base64_decode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBech32Encoding::test_bech32_encode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestBech32Encoding::test_bech32_decode PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestEncodingUtilities::test_encode_with_checksum PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestEncodingUtilities::test_verify_checksum PASSED [ 64%]
tests/utils/test_encoding_coverage.py::TestEncodingUtilities::test_compute_checksum PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_hex_strings PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_bytes PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_bytearray PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_dict_with_raw PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_dict_with_rawTx PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_from_dict_with_hex PASSED [ 64%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_dict_priority_raw_over_others PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_dict_priority_rawTx_over_hex PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_mixed_types PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_empty_list PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_invalid_hex_string_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_odd_length_hex_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_dict_missing_raw_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_dict_non_string_raw_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_dict_invalid_hex_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_unsupported_type_raises PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_uppercase_hex_normalized_to_lowercase PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_preserves_order PASSED [ 65%]
tests/utils/test_extract_raw_txs_coverage.py::TestExtractRawTxs::test_extract_generator_input PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_left_basic PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_left_exact_width PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_left_truncate PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_left_with_numbers PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_right_basic PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_right_exact_width PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_right_truncate PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_right_with_numbers PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_align_operations PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_zero_width PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_empty_string_alignment PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_format_large_values PASSED [ 65%]
tests/utils/test_format_utils_coverage.py::TestFormat::test_format_float_values PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignLeft::test_align_left_short_text PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignLeft::test_align_left_exact_width PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignLeft::test_align_left_truncate PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignLeft::test_align_left_with_number PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignRight::test_align_right_short_text PASSED [ 65%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignRight::test_align_right_exact_width PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignRight::test_align_right_truncate PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignRight::test_align_right_with_number PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignMiddle::test_align_middle_short_text PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignMiddle::test_align_middle_exact_width PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignMiddle::test_align_middle_truncate PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatAlignMiddle::test_align_middle_with_number PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatSatoshis::test_format_zero_satoshis PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatSatoshis::test_format_small_amount PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatSatoshis::test_format_one_bsv PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatSatoshis::test_format_large_amount PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatSatoshis::test_format_negative_satoshis PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTxidBytes::test_format_txid_bytes_basic PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatBeefBytes::test_format_beef_bytes_basic PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatBsvAmount::test_format_bsv_amount_from_satoshis PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatBsvAmount::test_format_bsv_amount_fractional PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatUtilsAdvanced::test_format_align_consistency PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatUtilsAdvanced::test_format_satoshis_various_amounts PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatUtilsAdvanced::test_format_alignment_with_unicode PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatUtilsAdvanced::test_format_alignment_empty_string PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatUtilsAdvanced::test_format_alignment_zero_width PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_max_satoshis PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_negative_satoshis_large PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_align_very_long_text PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_align_special_characters PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_satoshis_boundary_values PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_align_with_float PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestEdgeCases::test_format_middle_odd_even_widths PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_transaction_basic PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_transaction_invalid_txid PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_transaction_complex PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_transaction_exception PASSED [ 66%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_beef_txid_found PASSED [ 67%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_beef_txid_not_found PASSED [ 67%]
tests/utils/test_format_utils_expanded_coverage.py::TestFormatTransactionLogging::test_to_log_string_beef_txid_exception PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_two_outputs PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_two_outputs_exact_input PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_two_outputs_666666_200 PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_two_outputs_666666_200_two_change_inputs PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_two_outputs_four_change_outputs PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_werr_insufficient_funds PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_werr_insufficient_funds_no_inputs PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_allocate_all PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_feemodel_5_sat_per_kb PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_feemodel_1_sat_per_kb PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_one_fixed_input PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_one_larger_fixed_input PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_one_fixed_input_1001_73 PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_no_fixed_outputs_one_fixed_input PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_no_fixed_outputs_no_fixed_input PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_params_text4_d4 PASSED [ 67%]
tests/utils/test_generate_change_sdk.py::TestGenerateChangeSdk::test_params_text_d5_through_d14 PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestSHA256Hashing::test_sha256_single PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestSHA256Hashing::test_sha256_double PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestSHA256Hashing::test_sha256_hex_output PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestRIPEMD160Hashing::test_ripemd160 PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestRIPEMD160Hashing::test_hash160 PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestMurmurHashing::test_murmur3 PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestHashUtilities::test_hash_to_int PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestHashUtilities::test_int_to_hash PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestHashUtilities::test_reverse_hash PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestHashComparison::test_hash_equals PASSED [ 67%]
tests/utils/test_hash_utils_coverage.py::TestHashComparison::test_constant_time_compare PASSED [ 67%]
tests/utils/test_height_range.py::TestHeightRange::test_length PASSED    [ 68%]
tests/utils/test_height_range.py::TestHeightRange::test_copy PASSED      [ 68%]
tests/utils/test_height_range.py::TestHeightRange::test_intersect PASSED [ 68%]
tests/utils/test_height_range.py::TestHeightRange::test_union PASSED     [ 68%]
tests/utils/test_height_range.py::TestHeightRange::test_subtract PASSED  [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexConversion::test_bytes_to_hex PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexConversion::test_hex_to_bytes PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexConversion::test_hex_roundtrip PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexValidation::test_is_valid_hex PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexValidation::test_validate_hex_length PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexFormatting::test_format_hex_with_prefix PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexFormatting::test_strip_hex_prefix PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexFormatting::test_normalize_hex PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexEdgeCases::test_empty_hex_string PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexEdgeCases::test_odd_length_hex PASSED [ 68%]
tests/utils/test_hex_utils_coverage.py::TestHexEdgeCases::test_invalid_hex_characters PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_empty_certificates PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_single_certificate_above_threshold PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_certificate_below_threshold PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_untrusted_certifier PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_multiple_certificates_same_subject PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_certificate_without_subject PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestTransformVerifiableCertificatesWithTrust::test_transform_certificate_without_certifier PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlayCertificates::test_query_overlay_certificates_empty_results PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlayCertificates::test_query_overlay_certificates_valid_results PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlayCertificates::test_query_overlay_certificates_invalid_result PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlayCertificates::test_query_overlay_certificates_missing_fields PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestParseResults::test_parse_results_wrong_type PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestParseResults::test_parse_results_empty_outputs PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestParseResults::test_parse_results_missing_beef PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestParseResults::test_parse_results_invalid_output_index PASSED [ 68%]
tests/utils/test_identity_utils_coverage.py::TestParseResults::test_parse_results_exception_handling PASSED [ 69%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlay::test_query_overlay_success PASSED [ 69%]
tests/utils/test_identity_utils_coverage.py::TestQueryOverlay::test_query_overlay_exception PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathUtils::test_import_merkle_utils PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathUtils::test_verify_merkle_path PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathUtils::test_compute_merkle_root PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathUtils::test_parse_merkle_path PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathUtils::test_serialize_merkle_path PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathValidation::test_validate_merkle_proof PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathValidation::test_invalid_merkle_path PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathConstruction::test_build_merkle_path PASSED [ 69%]
tests/utils/test_merkle_path_coverage.py::TestMerklePathConstruction::test_build_merkle_tree PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofBasic::test_convert_single_level_proof PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofBasic::test_convert_multi_level_proof PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofBasic::test_convert_even_index PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofBasic::test_convert_odd_index PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofDuplicates::test_convert_duplicate_marker PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofDuplicates::test_convert_txid_as_node_at_level_0 PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofDuplicates::test_convert_non_duplicate_different_hash PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofIndexCalculation::test_convert_index_progression PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofIndexCalculation::test_convert_odd_index_progression PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofTxidLeaf::test_convert_txid_leaf_even_index PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofTxidLeaf::test_convert_txid_leaf_odd_index PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofTxidLeaf::test_convert_txid_leaf_index_zero PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofPathStructure::test_convert_path_levels_match_nodes PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofPathStructure::test_convert_each_level_has_leaves PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofPathStructure::test_convert_level_0_has_txid PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofEdgeCases::test_convert_single_transaction_tree PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofEdgeCases::test_convert_large_index PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofEdgeCases::test_convert_empty_nodes_list PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofEdgeCases::test_convert_high_block_height PASSED [ 69%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofEdgeCases::test_convert_zero_block_height PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofRealWorld::test_convert_typical_proof PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofRealWorld::test_convert_full_block_proof PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofRealWorld::test_convert_first_transaction PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofRealWorld::test_convert_last_transaction_odd PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofLeafAttributes::test_convert_leaf_has_offset PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofLeafAttributes::test_convert_txid_leaf_attributes PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofLeafAttributes::test_convert_sibling_leaf_attributes PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofIntegration::test_convert_multiple_proofs PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofIntegration::test_convert_consistency PASSED [ 70%]
tests/utils/test_merkle_path_utils_complete.py::TestConvertProofIntegration::test_convert_path_completeness PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_single_byte PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_zero PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_max_single_byte PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint16 PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint16_small PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint32 PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint64 PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_offset_beyond_end PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint16_truncated PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint32_truncated PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_uint64_truncated PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestReadVarint::test_read_varint_at_different_offsets PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEmpty::test_parse_empty_tx PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEmpty::test_parse_too_short_tx PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEmpty::test_parse_exactly_min_length PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsSimple::test_parse_no_inputs_no_outputs PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsSimple::test_parse_one_input_no_script PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsSimple::test_parse_one_input_with_script PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsSimple::test_parse_one_output_no_script PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsSimple::test_parse_one_output_with_script PASSED [ 70%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsMultiple::test_parse_two_inputs PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsMultiple::test_parse_two_outputs PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsMultiple::test_parse_mixed_inputs_outputs PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsVarint::test_parse_input_count_varint_uint16 PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsVarint::test_parse_output_count_varint_uint16 PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsVarint::test_parse_script_length_varint_uint16 PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEdgeCases::test_parse_max_single_byte_counts PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEdgeCases::test_parse_all_zeros_transaction PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsEdgeCases::test_parse_real_like_transaction_structure PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsStress::test_parse_many_small_inputs PASSED [ 71%]
tests/utils/test_parse_tx_script_offsets_complete.py::TestParseTxScriptOffsetsStress::test_parse_many_small_outputs PASSED [ 71%]
tests/utils/test_proof_for_merkle_path.py::TestProofForMerklePath::test_convert_tsc_proof_to_merkle_path_with_various_inputs PASSED [ 71%]
tests/utils/test_pushdrop.py::TestPushdrop::test_pushdrop_transfer_example SKIPPED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_basic PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_zero PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_negative PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_max_valid PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_over_max PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_exactly_max PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_one_ms PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_non_integer PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_string PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestWaitAsync::test_wait_async_multiple_waits PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_basic PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_zero PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_one PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_large PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_uniqueness PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_negative PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_non_integer PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_string PASSED [ 71%]
tests/utils/test_random_utils_complete.py::TestRandomBytes::test_random_bytes_32 PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_basic PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_zero PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_one PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_uniqueness PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_negative PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_non_integer PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesHex::test_random_bytes_hex_large PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_basic PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_zero PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_one PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_decodable PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_uniqueness PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_negative PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestRandomBytesBase64::test_random_bytes_base64_non_integer PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_bytes PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_list PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_empty_bytes PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_empty_list PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_known_value PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_invalid_type PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestSha256Hash::test_sha256_hash_deterministic PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_bytes PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_list PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_empty PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_known_value PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_invalid_type PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256LE::test_double_sha256_le_deterministic PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_bytes PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_list PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_vs_le PASSED [ 72%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_empty PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_invalid_type PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestDoubleSha256BE::test_double_sha256_be_deterministic PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_valid PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_current_time PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_min_valid PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_below_min PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_max_valid PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_above_max PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_negative PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_zero PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_non_integer PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_string PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestValidateSecondsSinceEpoch::test_validate_seconds_year_extraction PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsEdgeCases::test_random_functions_no_collision PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsEdgeCases::test_hash_functions_consistency PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsEdgeCases::test_bytes_and_list_equivalence PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsEdgeCases::test_large_random_generation PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsIntegration::test_generate_and_hash PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsIntegration::test_hex_to_hash PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsIntegration::test_async_timing_precision PASSED [ 73%]
tests/utils/test_random_utils_complete.py::TestRandomUtilsIntegration::test_multiple_hash_operations PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReaderUint8ArrayInitialization::test_init_with_bytes PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReaderUint8ArrayInitialization::test_init_with_list PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReaderUint8ArrayInitialization::test_init_empty_data PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint8::test_read_uint8_single_byte PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint8::test_read_uint8_multiple_bytes PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint8::test_read_uint8_at_end_raises PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint16LE::test_read_uint16_le_basic PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint16LE::test_read_uint16_le_max_value PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint16LE::test_read_uint16_le_insufficient_data PASSED [ 73%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint32LE::test_read_uint32_le_basic PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint32LE::test_read_uint32_le_max_value PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint32LE::test_read_uint32_le_insufficient_data PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint64LE::test_read_uint64_le_basic PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint64LE::test_read_uint64_le_max_value PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadUint64LE::test_read_uint64_le_insufficient_data PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadBytes::test_read_bytes_basic PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadBytes::test_read_bytes_all PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadBytes::test_read_bytes_zero PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestReadBytes::test_read_bytes_insufficient_data PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestSkip::test_skip_forward PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestSkip::test_skip_zero PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestSkip::test_skip_past_end PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_get_position PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_set_position PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_set_position_to_start PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_get_remaining PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_get_remaining_past_end PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_is_at_end_initially_false PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_is_at_end_after_reading_all PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestPositionMethods::test_is_at_end_on_empty_data PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestMixedReads::test_mixed_reads PASSED [ 74%]
tests/utils/test_reader_uint8array_complete.py::TestMixedReads::test_mixed_with_skip PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayInitialization::test_create_from_bytes PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayInitialization::test_create_from_hex PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayInitialization::test_empty_data PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadMethods::test_read_uint8 PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadMethods::test_read_uint16_le PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadMethods::test_read_uint32_le PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadMethods::test_read_uint64_le PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadMethods::test_read_int32_le PASSED [ 74%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadBytes::test_read_bytes PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadBytes::test_read_remaining PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadBytes::test_read_varint PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayReadBytes::test_read_multiple_bytes PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayPosition::test_get_position PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayPosition::test_set_position PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayPosition::test_length_property PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayPosition::test_eof_check PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayEdgeCases::test_read_beyond_end PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayEdgeCases::test_read_uint32_insufficient_data PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayEdgeCases::test_zero_read_amount PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayEdgeCases::test_position_beyond_end PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayUtilityMethods::test_peek PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayUtilityMethods::test_skip PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayUtilityMethods::test_reset PASSED [ 75%]
tests/utils/test_reader_uint8array_coverage.py::TestReaderUint8ArrayUtilityMethods::test_slice PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_valid_positive PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_valid_negative PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_zero PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_exceeds_max PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_exceeds_min PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiFrom::test_satoshi_from_non_integer PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_positive_values PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_negative_values PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_mixed_signs PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_with_zero PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_overflow PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_underflow PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiAdd::test_satoshi_add_invalid_input PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiSubtract::test_satoshi_subtract_positive_values PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiSubtract::test_satoshi_subtract_negative_values PASSED [ 75%]
tests/utils/test_satoshi_complete.py::TestSatoshiSubtract::test_satoshi_subtract_mixed_signs PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSubtract::test_satoshi_subtract_overflow PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSubtract::test_satoshi_subtract_underflow PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_positive_values PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_empty_list PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_with_negatives PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_with_zeros PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_overflow PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiSum::test_satoshi_sum_invalid_value_in_list PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_positive_values PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_by_zero PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_by_one PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_negative_values PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_overflow PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestSatoshiMultiply::test_satoshi_multiply_invalid_input PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestEdgeCases::test_max_satoshis_constant PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestEdgeCases::test_operations_at_boundaries PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestEdgeCases::test_chained_operations PASSED [ 76%]
tests/utils/test_satoshi_complete.py::TestEdgeCases::test_sum_with_generator PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_valid_positive_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_valid_negative_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_zero_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_max_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_exceeds_max_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_exceeds_min_satoshis PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiFrom::test_non_integer_input PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_positive_values PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_negative_values PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_mixed_values PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_zero PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_overflow PASSED [ 76%]
tests/utils/test_satoshi_coverage.py::TestSatoshiAdd::test_add_underflow PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSubtract::test_subtract_positive_values PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSubtract::test_subtract_to_negative PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSubtract::test_subtract_zero PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSubtract::test_subtract_from_zero PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSubtract::test_subtract_overflow PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiMultiply::test_multiply_positive_values PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiMultiply::test_multiply_by_zero PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiMultiply::test_multiply_by_one PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiMultiply::test_multiply_by_negative PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiMultiply::test_multiply_overflow PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSum::test_sum_positive_values PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSum::test_sum_mixed_values PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSum::test_sum_empty_list PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSum::test_sum_single_value PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestSatoshiSum::test_sum_overflow PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestConstants::test_max_satoshis_value PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestConstants::test_max_represents_21m_bitcoin PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestEdgeCases::test_add_to_max_then_subtract PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestEdgeCases::test_alternating_operations PASSED [ 77%]
tests/utils/test_satoshi_coverage.py::TestEdgeCases::test_identity_operations PASSED [ 77%]
tests/utils/test_script_hash.py::TestScriptHashSuccessCases::test_hash_output_script_success_cases PASSED [ 77%]
tests/utils/test_script_hash.py::TestScriptHashErrorCases::test_hash_output_script_error_cases PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptUtilities::test_import_script_utils PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptUtilities::test_parse_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptUtilities::test_create_p2pkh_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptUtilities::test_is_p2pkh_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptTemplates::test_create_op_return_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptTemplates::test_extract_op_return_data PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptSigning::test_create_signature_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptSigning::test_extract_signature_from_script PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptValidation::test_validate_script_syntax PASSED [ 77%]
tests/utils/test_script_utils_coverage.py::TestScriptValidation::test_is_standard_script PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestTransactionSerialization::test_serialize_transaction PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestTransactionSerialization::test_deserialize_transaction PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestInputOutputSerialization::test_serialize_input PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestInputOutputSerialization::test_serialize_output PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestScriptSerialization::test_serialize_script PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestScriptSerialization::test_deserialize_script PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestBlockSerialization::test_serialize_block_header PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestBlockSerialization::test_deserialize_block_header PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestCompactSizeEncoding::test_encode_compact_size PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestCompactSizeEncoding::test_decode_compact_size PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestSerializationUtilities::test_read_bytes PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestSerializationUtilities::test_read_varint PASSED [ 78%]
tests/utils/test_serialization_coverage.py::TestSerializationUtilities::test_write_varint PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_from_bytes PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_from_hex_string PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_from_bytearray PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_consistent_for_same_data PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_different_for_different_data PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_bytes_and_hex_equivalence PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_is_hex_lowercase PASSED [ 78%]
tests/utils/test_transaction_id_coverage.py::TestTransactionId::test_transaction_id_is_reversed_sha256 PASSED [ 78%]
tests/utils/test_tx_size.py::TestTxSize::test_input_size PASSED          [ 78%]
tests/utils/test_tx_size.py::TestTxSize::test_output_size PASSED         [ 78%]
tests/utils/test_tx_size.py::TestTxSize::test_transaction_size PASSED    [ 78%]
tests/utils/test_tx_size.py::TestTxSize::test_transaction_size_with_error_on_inputs PASSED [ 78%]
tests/utils/test_tx_size.py::TestTxSize::test_transaction_size_with_error_on_outputs PASSED [ 78%]
tests/utils/test_tx_size_complete.py::TestVarintLen::test_varint_len_through_input_size PASSED [ 78%]
tests/utils/test_tx_size_complete.py::TestVarintLen::test_varint_negative_size_raises PASSED [ 78%]
tests/utils/test_tx_size_complete.py::TestTransactionInputSize::test_input_size_small_script PASSED [ 78%]
tests/utils/test_tx_size_complete.py::TestTransactionInputSize::test_input_size_zero_script PASSED [ 78%]
tests/utils/test_tx_size_complete.py::TestTransactionInputSize::test_input_size_large_script PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionInputSize::test_input_size_converts_to_int PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionOutputSize::test_output_size_small_script PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionOutputSize::test_output_size_zero_script PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionOutputSize::test_output_size_large_script PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionOutputSize::test_output_size_converts_to_int PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_single_input_output PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_multiple_inputs PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_multiple_outputs PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_no_inputs_no_outputs PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_many_inputs_outputs PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_with_error_in_input PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestTransactionSize::test_transaction_size_with_error_in_output PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestInputsOutputsSizes::test_inputs_outputs_sizes_basic PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestInputsOutputsSizes::test_inputs_outputs_sizes_empty PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestInputsOutputsSizes::test_inputs_outputs_sizes_single PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestInputsOutputsSizes::test_inputs_outputs_sizes_large_scripts PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestInputsOutputsSizes::test_inputs_outputs_sizes_converts_to_int PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestEdgeCases::test_varint_boundaries PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestEdgeCases::test_typical_p2pkh_transaction PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestEdgeCases::test_large_transaction PASSED [ 79%]
tests/utils/test_tx_size_complete.py::TestEdgeCases::test_zero_script_sizes PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionInputSize::test_small_script PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionInputSize::test_zero_script PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionInputSize::test_large_script PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionOutputSize::test_p2pkh_output PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionOutputSize::test_zero_script_output PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionOutputSize::test_large_script_output PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionSize::test_simple_transaction PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionSize::test_empty_transaction PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionSize::test_multiple_inputs PASSED [ 79%]
tests/utils/test_tx_size_coverage.py::TestTransactionSize::test_large_input_count PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestVarintCalculation::test_varint_boundary_252 PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestVarintCalculation::test_varint_boundary_253 PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestVarintCalculation::test_varint_boundary_65535 PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestVarintCalculation::test_varint_boundary_65536 PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestErrorHandling::test_negative_script_size_input PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestErrorHandling::test_negative_script_size_output PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestErrorHandling::test_invalid_input_size_type PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestErrorHandling::test_transaction_with_negative_sizes PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestRealWorldScenarios::test_typical_payment_tx PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestRealWorldScenarios::test_consolidation_tx PASSED [ 80%]
tests/utils/test_tx_size_coverage.py::TestRealWorldScenarios::test_distribution_tx PASSED [ 80%]
tests/utils/test_utility_helpers_no_buffer.py::TestUtilityHelpersNoBuffer::test_convert_from_uint8array PASSED [ 80%]
tests/utils/test_utility_helpers_no_buffer.py::TestUtilityHelpersNoBuffer::test_convert_from_number_array PASSED [ 80%]
tests/utils/test_utility_helpers_no_buffer.py::TestUtilityHelpersNoBuffer::test_convert_from_hex_string PASSED [ 80%]
tests/utils/test_utility_helpers_no_buffer.py::TestUtilityHelpersNoBuffer::test_convert_from_utf8_string PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_valid_originator PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_none_originator PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_empty_originator PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_originator_max_length PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_originator_too_long PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_originator_non_string PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateOriginator::test_originator_utf8_bytes PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_valid_satoshis PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_zero_satoshis PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_max_satoshis PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_negative_satoshis PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_satoshis_non_integer PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_satoshis_float PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateSatoshis::test_satoshis_custom_field_name PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateBasketConfig::test_valid_basket_config PASSED [ 80%]
tests/utils/test_validation_coverage.py::TestValidateBasketConfig::test_basket_config_missing_fields PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateBasketConfig::test_basket_config_invalid_satoshis PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListOutputsArgs::test_valid_list_outputs_args PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListOutputsArgs::test_list_outputs_args_empty PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListOutputsArgs::test_list_outputs_args_invalid_limit PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListActionsArgs::test_valid_list_actions_args PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListActionsArgs::test_none_list_actions_args PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateListActionsArgs::test_list_actions_args_empty PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateCreateActionArgs::test_valid_create_action_args PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateCreateActionArgs::test_create_action_args_missing_outputs PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestValidateCreateActionArgs::test_create_action_args_invalid_outputs PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestParameterValidationPatterns::test_validate_none_allowed_originator PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestParameterValidationPatterns::test_validate_dict_required_list_actions PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestParameterValidationPatterns::test_validate_length_limits PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestParameterValidationPatterns::test_validate_type_checking_originator PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestParameterValidationPatterns::test_validate_type_checking_satoshis PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestErrorMessages::test_originator_error_message PASSED [ 81%]
tests/utils/test_validation_coverage.py::TestErrorMessages::test_satoshis_error_message PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEncoding::test_encode_varint_small PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEncoding::test_encode_varint_medium PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEncoding::test_encode_varint_large PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintDecoding::test_decode_varint_small PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintDecoding::test_decode_varint_with_prefix PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintRoundtrip::test_varint_roundtrip_small PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintRoundtrip::test_varint_roundtrip_large PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEdgeCases::test_encode_varint_zero PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEdgeCases::test_encode_varint_max_uint64 PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEdgeCases::test_decode_varint_incomplete_data PASSED [ 81%]
tests/utils/test_varint_coverage.py::TestVarintEdgeCases::test_decode_varint_empty PASSED [ 81%]
tests/utils/validation/test_validate_abort_action_args.py::TestValidateAbortActionArgs::test_validate_abort_action_args_valid PASSED [ 81%]
tests/utils/validation/test_validate_abort_action_args.py::TestValidateAbortActionArgs::test_validate_abort_action_args_nil_args PASSED [ 81%]
tests/utils/validation/test_validate_abort_action_args.py::TestValidateAbortActionArgs::test_validate_abort_action_args_blank_reference PASSED [ 82%]
tests/utils/validation/test_validate_abort_action_args.py::TestValidateAbortActionArgs::test_validate_abort_action_args_invalid_base64 PASSED [ 82%]
tests/utils/validation/test_validate_basket_config.py::TestValidateBasketConfig::test_validate_basket_config_valid_name PASSED [ 82%]
tests/utils/validation/test_validate_basket_config.py::TestValidateBasketConfig::test_validate_basket_config_exact_300_bytes PASSED [ 82%]
tests/utils/validation/test_validate_basket_config.py::TestValidateBasketConfig::test_validate_basket_config_empty_name PASSED [ 82%]
tests/utils/validation/test_validate_basket_config.py::TestValidateBasketConfig::test_validate_basket_config_name_too_long PASSED [ 82%]
tests/utils/validation/test_validate_create_action_args.py::TestValidateCreateActionArgs::test_validate_create_action_args_valid PASSED [ 82%]
tests/utils/validation/test_validate_create_action_args.py::TestValidateCreateActionArgs::test_validate_create_action_args_empty_description PASSED [ 82%]
tests/utils/validation/test_validate_create_action_args.py::TestValidateCreateActionArgs::test_validate_create_action_args_invalid_locking_script_not_hex PASSED [ 82%]
tests/utils/validation/test_validate_create_action_args.py::TestValidateCreateActionArgs::test_validate_create_action_args_invalid_locking_script_odd_length PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_valid PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_invalid_type_non_hex PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_type_odd_length PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_certifier_too_long PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_empty_subject PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_invalid_revocation_outpoint PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_signature_odd_length PASSED [ 82%]
tests/utils/validation/test_validate_insert_certificate_auth_args.py::TestValidateInsertCertificateAuthArgs::test_validate_insert_certificate_auth_args_field_invalid_master_key PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_valid PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_empty_tx PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_empty_outputs PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_description_too_short PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_label_too_long PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_output_empty_protocol PASSED [ 82%]
tests/utils/validation/test_validate_internalize_action_args.py::TestValidateInternalizeActionArgs::test_validate_internalize_action_args_wallet_payment_missing_remittance PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_valid PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_nil PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_limit_exceeds_max PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_offset_exceeds_max PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_invalid_label_query_mode PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_seek_permission_false PASSED [ 82%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_label_too_long PASSED [ 83%]
tests/utils/validation/test_validate_list_actions_args.py::TestValidateListActionsArgs::test_validate_list_actions_args_label_empty PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_valid PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_invalid_certifier_non_hex PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_certifier_odd_length PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_invalid_type_not_base64 PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_limit_above_maximum PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_partial_invalid_certifier PASSED [ 83%]
tests/utils/validation/test_validate_list_certificates_args.py::TestValidateListCertificatesArgs::test_validate_list_certificates_args_partial_malformed_outpoint PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_valid_paging_only PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_valid_with_tag_query_all PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_valid_with_tag_query_any PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_invalid_txid PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_zero_limit PASSED [ 83%]
tests/utils/validation/test_validate_list_outputs_args.py::TestValidateListOutputsArgs::test_validate_list_outputs_args_wrong_tag_query PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_single_valid_output PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_multiple_valid_outputs PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_empty_outputs PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_provided_by_mismatch PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_purpose_mismatch PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_basket_name_none PASSED [ 83%]
tests/utils/validation/test_validate_no_send_change_outputs.py::TestValidateNoSendChangeOutputs::test_validate_no_send_change_outputs_basket_name_mismatch PASSED [ 83%]
tests/utils/validation/test_validate_originator.py::TestValidateOriginator::test_validate_originator_valid PASSED [ 83%]
tests/utils/validation/test_validate_originator.py::TestValidateOriginator::test_validate_originator_invalid_type PASSED [ 83%]
tests/utils/validation/test_validate_originator.py::TestValidateOriginator::test_validate_originator_too_long PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_valid PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_invalid_txid PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_new_tx_missing_reference PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_new_tx_missing_raw_tx PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_new_tx_missing_txid PASSED [ 83%]
tests/utils/validation/test_validate_process_action_args.py::TestValidateProcessActionArgs::test_validate_process_action_args_send_with_missing_arguments PASSED [ 83%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_valid PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_invalid_type PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_invalid_serial_number PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_invalid_certifier_non_hex PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_certifier_odd_length PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_certificate_args.py::TestValidateRelinquishCertificateArgs::test_validate_relinquish_certificate_args_empty_certifier PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_valid PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_basket_min_length PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_basket_max_length PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_empty_basket PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_missing_dot PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_index_not_numeric PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_empty_output PASSED [ 84%]
tests/utils/validation/test_validate_relinquish_output_args.py::TestValidateRelinquishOutputArgs::test_validate_relinquish_output_args_basket_too_long PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_valid_all_fields PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_valid_minimal_fields PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_missing_to_storage_identity_key PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_missing_from_storage_identity_key PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_missing_identity_key PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_max_items_zero PASSED [ 84%]
tests/utils/validation/test_validate_request_sync_chunk_args.py::TestValidateRequestSyncChunkArgs::test_validate_request_sync_chunk_args_max_rough_size_zero PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_empty_reference PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_invalid_base64 PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_reference_too_long PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_abort_specific_reference PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_none_reference_raises_error PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_wrong_type_reference_raises_error PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_whitespace_only_reference_raises_error PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_reference_with_invalid_chars_raises_error PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_reference_too_short_raises_error PASSED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_missing_reference_key_raises_error FAILED [ 84%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_extra_keys_ignored PASSED [ 85%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_abort_nonexistent_reference_raises_error PASSED [ 85%]
tests/wallet/test_abort_action.py::TestWalletAbortAction::test_abort_already_aborted_reference_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_00 PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_empty_type_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_none_type_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_type_type_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_empty_certifier_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_none_certifier_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_certifier_type_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_invalid_hex_certifier_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_empty_acquisition_protocol_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_none_acquisition_protocol_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_acquisition_protocol_type_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_invalid_acquisition_protocol_value_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_none_fields_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_fields_type_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_missing_type_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_missing_certifier_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_missing_acquisition_protocol_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_empty_args_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_privileged_none_reason_with_privileged_true_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_privileged_empty_reason_with_privileged_true_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_acquirecertificate_listcertificate_provecertificate SKIPPED [ 85%]
tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_privileged_acquirecertificate_listcertificate_provecertificate SKIPPED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_prove_certificate SKIPPED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_missing_certificate_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_missing_verifier_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_missing_fields_to_reveal_key_raises_error PASSED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_empty_certificate_raises_error FAILED [ 85%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_none_certificate_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_empty_fields_to_reveal_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_none_fields_to_reveal_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_wrong_certificate_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_wrong_fields_to_reveal_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_empty_args_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_certificate PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_type_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_none_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_wrong_type_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_serial_number_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_none_serial_number_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_wrong_serial_number_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_certifier_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_none_certifier_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_wrong_certifier_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_invalid_hex_certifier_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_missing_type_key_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_missing_serial_number_key_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_missing_certifier_key_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_args_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_nonexistent_certificate_returns_false FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_already_relinquished_certificate_returns_false FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_certificate_case_sensitive_certifier FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_certificate_unicode_type_serial FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_discover_by_identity_key SKIPPED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_missing_identity_key_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_empty_identity_key_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_none_identity_key_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_wrong_identity_key_type_raises_error PASSED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_invalid_hex_identity_key_raises_error FAILED [ 86%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_discover_by_attributes SKIPPED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_missing_attributes_key_raises_error PASSED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_empty_attributes_raises_error FAILED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_none_attributes_raises_error PASSED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_wrong_attributes_type_raises_error PASSED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_wrong_limit_type_raises_error PASSED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_zero_limit_raises_error FAILED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_negative_limit_raises_error FAILED [ 87%]
tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_valid_params_with_limit FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_identity_key PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_protocol_id PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_empty_args_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_none_protocol_id_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_empty_key_id_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_invalid_protocol_id_format FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_special_characters_in_key_id PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_counterparty PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_empty_plaintext PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_large_plaintext PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_missing_plaintext_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_none_plaintext_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_invalid_counterparty_key_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_empty_counterparty_key_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_none_protocol_id_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_with_counterparty PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_encrypt_decrypt_round_trip_consistency PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_empty_ciphertext_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_invalid_ciphertext_format_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_with_wrong_counterparty_raises_error PASSED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_with_missing_ciphertext_raises_error FAILED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletRevealCounterpartyKeyLinkage::test_reveal_counterparty_key_linkage SKIPPED [ 87%]
tests/wallet/test_crypto_methods.py::TestWalletRevealCounterpartyKeyLinkage::test_reveal_counterparty_key_linkage_without_privileged_reason_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealCounterpartyKeyLinkage::test_reveal_counterparty_key_linkage_with_empty_counterparty_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealCounterpartyKeyLinkage::test_reveal_counterparty_key_linkage_with_invalid_counterparty_format_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealCounterpartyKeyLinkage::test_reveal_counterparty_key_linkage_with_none_verifier_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealSpecificKeyLinkage::test_reveal_specific_key_linkage SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealSpecificKeyLinkage::test_reveal_specific_key_linkage_with_different_protocols SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealSpecificKeyLinkage::test_reveal_specific_key_linkage_missing_protocol_id_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealSpecificKeyLinkage::test_reveal_specific_key_linkage_missing_key_id_raises_error SKIPPED [ 88%]
tests/wallet/test_crypto_methods.py::TestWalletRevealSpecificKeyLinkage::test_reveal_specific_key_linkage_empty_key_id_raises_error SKIPPED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_empty_data PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_large_data PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_unicode_data PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_different_protocols_produce_different_hmacs PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_different_keys_produce_different_hmacs PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_missing_data_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_none_data_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_invalid_protocol_id_raises_error PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_empty_key_id_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_valid PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_invalid PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_wrong_key_returns_invalid PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_wrong_protocol_returns_invalid PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_modified_data_returns_invalid PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_empty_hmac_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_wrong_hmac_length_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_missing_data_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_none_hmac_raises_error FAILED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_empty_data PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_large_data PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_different_data_produces_different_signatures PASSED [ 88%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_missing_data_raises_error FAILED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_none_data_raises_error FAILED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_valid PASSED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_invalid PASSED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_wrong_public_key_returns_invalid FAILED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_modified_data_returns_invalid PASSED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_invalid_signature_format_raises_error PASSED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_invalid_public_key_raises_error FAILED [ 89%]
tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_missing_signature_raises_error FAILED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_empty_tx PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_empty_description PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_empty_outputs PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_internalize_custom_output_basket_insertion SKIPPEDp) [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_none_tx_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_invalid_tx_type_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_none_description_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_wrong_description_type_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_whitespace_description_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_none_outputs_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_wrong_outputs_type_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_output_missing_output_index_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_output_negative_output_index_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_output_invalid_protocol_raises_error PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_tx_key_raises_error FAILED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_outputs_key_raises_error FAILED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_description_key_raises_error FAILED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_valid_params_unicode_description PASSED [ 89%]
tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_valid_params_multiple_outputs PASSED [ 89%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_label_too_long PASSED [ 89%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_all_actions PASSED [ 89%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_non_existing_label_with_any PASSED [ 89%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_specific_label_filter PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_empty_label_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_whitespace_label_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_none_labels_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_labels_type_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_label_types_in_list_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_invalid_label_query_mode_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_include_labels_type_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_zero_limit_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_negative_limit_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_negative_offset_raises_error PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_limit_type_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_offset_type_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_extremely_large_limit_raises_error FAILED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_empty_labels_list PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_include_labels_false PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_with_pagination PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_label_query_mode_all PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_label_query_mode_any PASSED [ 90%]
tests/wallet/test_list_actions.py::TestWalletListActions::test_valid_params_large_offset_returns_empty PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_invalid_certifier PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_filter_by_certifier_lowercase SKIPPEDrom TypeScript) [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_filter_by_certifier_uppercase SKIPPEDrom TypeScript) [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_filter_by_multiple_certifiers SKIPPEDrom TypeScript) [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_filter_by_type SKIPPEDrom TypeScript) [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_none_certifiers_raises_error PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_certifiers_type_raises_error PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_certifier_types_in_list_raises_error PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_empty_certifier_strings_raises_error PASSED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_invalid_hex_certifiers_raises_error FAILED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_certifier_too_long_raises_error FAILED [ 90%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_none_types_raises_error PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_types_type_raises_error PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_type_types_in_list_raises_error PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_empty_type_strings_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_invalid_base64_types_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_limit_type_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_offset_type_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_zero_limit_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_negative_limit_raises_error PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_negative_offset_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_extremely_large_limit_raises_error FAILED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_minimal_args PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_empty_filters PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_with_pagination PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_case_insensitive_certifier_hex PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_large_offset_returns_empty PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_multiple_filters_combined PASSED [ 91%]
tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_unicode_type_strings FAILED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_empty_basket PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_empty_tag PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_limit_zero PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_limit_exceeds_max PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_negative_offset PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_too_long PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_with_originator PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_none_basket_raises_error PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_basket_type_raises_error PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_whitespace_basket_raises_error FAILED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_basket_too_long_raises_error PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_none_tags_raises_error PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_tags_type_raises_error PASSED [ 91%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_tag_types_in_list_raises_error PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_whitespace_tags_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_tag_too_long_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_limit_type_raises_error PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_offset_type_raises_error PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_tag_query_mode_raises_error PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_include_type_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_invalid_include_value_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_boolean_types_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_empty_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_whitespace_raises_error FAILED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_wrong_type_raises_error PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_minimal_args PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_with_pagination PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_tag_query_mode_all PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_tag_query_mode_any PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_include_options PASSED [ 92%]
tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_valid_params_large_offset_returns_empty PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_negative_height PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_valid_height PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_none_height PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_wrong_height_type FAILED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_missing_height_key PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_zero_height FAILED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_very_large_height FAILED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_float_height PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_valid_params_different_heights PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_valid_params_extra_parameters_ignored PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_valid_originator PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_invalid_originator_too_long PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_invalid_originator_type PASSED [ 92%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_empty_originator FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_whitespace_originator FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_none_originator FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_wrong_originator_type PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_invalid_domain_format FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_unicode_originator PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_without_originator PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_args_dict_none FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_empty_args_dict PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_extra_args_ignored PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_valid_params PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_invalid_root_key PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_invalid_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_none_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_wrong_chain_type PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_empty_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_whitespace_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_none_key_deriver FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_wrong_key_deriver_type FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_invalid_private_key FAILED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_valid_test_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_case_insensitive_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_unicode_chain PASSED [ 93%]
tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_extra_params_ignored PASSED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_specific_output PASSED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_empty_basket_raises_error FAILED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_whitespace_basket_raises_error FAILED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_none_basket_raises_error FAILED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_wrong_basket_type_raises_error FAILED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_basket_too_long_raises_error FAILED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_empty_output_raises_error PASSED [ 93%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_whitespace_output_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_none_output_raises_error PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_wrong_output_type_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_missing_output_vout_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_invalid_txid_format_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_negative_vout_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_invalid_vout_format_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_missing_basket_key_raises_error FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_missing_output_key_raises_error PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_empty_args_raises_error PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_nonexistent_output_returns_false PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_already_relinquished_output_returns_false FAILED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_output_from_different_basket PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_output_with_unicode_basket_name PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_output_case_sensitive_basket PASSED [ 94%]
tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_output_extra_parameters_ignored PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_empty_reference PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_with_valid_reference SKIPPEDneration)) [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_with_spend_authorizations SKIPPED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_none_reference_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_wrong_reference_type_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_whitespace_reference_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_wrong_spends_type_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_missing_reference_key_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_missing_spends_key_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_params_extra_keys_ignored PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_reference_too_short_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletSignAction::test_sign_action_invalid_reference_invalid_base64_raises_error PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_missing_txid SKIPPED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_new_tx_missing_reference PASSED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_new_transaction SKIPPED [ 94%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_with_send_with SKIPPED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_none_txid_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_wrong_txid_type_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_txid_wrong_length_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_none_raw_tx_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_wrong_raw_tx_type_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_none_reference_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_wrong_reference_type_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_whitespace_reference_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_missing_txid_key_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_missing_raw_tx_key_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_is_new_tx_false_missing_txid_allowed PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_invalid_base64_reference_raises_error PASSED [ 95%]
tests/wallet/test_sign_process_action.py::TestWalletProcessAction::test_process_action_invalid_params_empty_raw_tx_raises_error PASSED [ 95%]
tests/wallet/test_sync.py::TestWalletSyncToWriter::test_sync_initial_then_no_changes_then_one_change SKIPPED [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_to_backup_and_back_without_backup_first SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_to_backup_and_back_with_backup_first SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_empty_writer_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_none_writer_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_wrong_writer_type_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_none_options_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_wrong_options_type_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_missing_writer_key_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_missing_options_key_raises_error SKIPPEDthods) [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_empty_args_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_zero_batch_size_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_negative_batch_size_raises_error SKIPPEDthods) [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_invalid_params_wrong_batch_size_type_raises_error SKIPPEDods) [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_sync_to_writer_valid_params_extra_options_ignored SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_empty_storage_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_none_storage_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 95%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_wrong_storage_type_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_none_backup_first_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_wrong_backup_first_type_raises_error SKIPPEDthods) [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_missing_storage_key_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_missing_backup_first_key_raises_error SKIPPEDhods) [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_invalid_params_empty_args_raises_error SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_valid_params_backup_first_true SKIPPEDtive are WalletStorageManager methods, not
Wallet methods)                                                          [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_valid_params_backup_first_false SKIPPEDtive are WalletStorageManager methods, not
Wallet methods)                                                          [ 96%]
tests/wallet/test_sync.py::TestWalletSetActive::test_set_active_valid_params_extra_parameters_ignored SKIPPEDtive are
WalletStorageManager methods, not Wallet methods)                        [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletInitializationEdgeCases::test_wallet_without_storage PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletInitializationEdgeCases::test_wallet_with_custom_chain PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletKeyManagement::test_derive_key_path PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletKeyManagement::test_get_public_key PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionMethods::test_create_transaction_minimal PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionMethods::test_sign_transaction PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionMethods::test_get_balance PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_create_action PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_list_actions PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_get_action_status PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_create_action_with_outputs PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_create_action_with_options PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_list_actions_with_status PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_sign_and_process_action PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletActionMethods::test_internalize_action PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_acquire_certificate PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_list_certificates PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_prove_certificate PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_acquire_certificate_with_fields PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_list_certificates_with_filter PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateMethods::test_prove_certificate_with_fields PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletErrorHandling::test_wallet_invalid_storage PASSED [ 96%]
tests/wallet/test_wallet_coverage.py::TestWalletErrorHandling::test_wallet_operation_without_initialization PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletNetworkMethods::test_get_network PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletNetworkMethods::test_get_version PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletNetworkMethods::test_get_height PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletNetworkMethods::test_get_header_for_height PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletNetworkMethods::test_get_chain PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_get_utxo_status PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_get_script_history PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_relinquish_output PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_list_outputs PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_list_outputs_with_basket PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_get_utxo_status_with_valid_outpoint PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_get_script_history_with_valid_hash PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletUtxoMethods::test_relinquish_output_with_valid_params PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionStatusMethods::test_get_transaction_status PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionStatusMethods::test_get_raw_tx PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionStatusMethods::test_get_merkle_path_for_transaction PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionStatusMethods::test_post_beef PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletTransactionStatusMethods::test_post_beef_array PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletAuthenticationMethods::test_is_authenticated PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletAuthenticationMethods::test_wait_for_authentication PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletAuthenticationMethods::test_get_identity_key PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletExchangeRateMethods::test_update_bsv_exchange_rate PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletExchangeRateMethods::test_get_fiat_exchange_rate PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateAdvanced::test_acquire_certificate_with_fields PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletCertificateAdvanced::test_relinquish_certificate PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_find_chain_tip_header PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_find_chain_tip_hash PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_find_header_for_block_hash PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_find_header_for_height PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_is_valid_root_for_height PASSED [ 97%]
tests/wallet/test_wallet_coverage.py::TestWalletBlockchainMethods::test_get_present_height PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletKeyLinkageMethods::test_reveal_counterparty_key_linkage PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletKeyLinkageMethods::test_reveal_specific_key_linkage PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletInternalMethods::test_get_client_change_key_pair PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletInternalMethods::test_storage_party PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletInternalMethods::test_get_known_txids PASSED [ 98%]
tests/wallet/test_wallet_coverage.py::TestWalletInternalMethods::test_destroy PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_empty_description PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_locking_script_not_hex PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_locking_script_odd_length PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_repeatable_txid PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_signable_transaction PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_create_action_defaults_options_and_returns_signable SKIPPED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_create_action_sign_and_process_flow SKIPPED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_negative_satoshis PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_zero_satoshis PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_empty_outputs PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_none_outputs PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_missing_satoshis PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_missing_locking_script PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_invalid_hex_locking_script PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_extremely_large_satoshis FAILED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_valid_params_minimal_satoshis PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_valid_params_multiple_outputs PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_valid_params_with_options FAILED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_empty_description_edge_cases PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_locking_script_edge_cases PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_valid_params_unicode_description PASSED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_none_description_raises_error FAILED [ 98%]
tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_invalid_output_format PASSED [ 98%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_get_present_height PASSED [ 98%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_get_chain PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_find_chain_tip_header PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_find_chain_tip_hash PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_find_header_for_block_hash PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBlockchainMethods::test_find_header_for_height PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletTransactionStatusMethods::test_get_tx_propagation PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletTransactionStatusMethods::test_get_utxo_status PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletTransactionStatusMethods::test_get_script_history PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletTransactionStatusMethods::test_get_transaction_status PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletTransactionStatusMethods::test_get_raw_tx PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletExchangeRateMethods::test_update_bsv_exchange_rate PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletExchangeRateMethods::test_get_fiat_exchange_rate PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletExchangeRateMethods::test_get_fiat_exchange_rate_default_base PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletMerklePathMethods::test_get_merkle_path_for_transaction PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletMerklePathMethods::test_is_valid_root_for_height PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBeefMethods::test_post_beef PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBeefMethods::test_post_beef_array PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletKeyMethods::test_get_client_change_key_pair PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletKeyMethods::test_get_identity_key PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBeefVerificationMethods::test_verify_returned_txid_only PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletBeefVerificationMethods::test_verify_returned_txid_only_atomic_beef PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletKnownTxidsMethods::test_get_known_txids_empty PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletKnownTxidsMethods::test_get_known_txids_with_new_txids PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletDestructionMethods::test_destroy_wallet PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletAuthenticationMethods::test_is_authenticated PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletAuthenticationMethods::test_wait_for_authentication PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletNetworkMethods::test_get_network PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletNetworkMethods::test_get_version PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletNetworkMethods::test_get_height PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletStoragePartyMethods::test_storage_party PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletHeaderMethods::test_get_header PASSED [ 99%]
tests/wallet/test_wallet_expanded_coverage.py::TestWalletHeaderMethods::test_get_header_for_height PASSED [100%]

=================================== FAILURES ===================================
E   AssertionError: assert {'authenticated': True} is True
     +  where {'authenticated': True} = is_authenticated()
     +    where is_authenticated = <bsv_wallet_toolbox.manager.cwi_style_wallet_manager.CWIStyleWalletManager object at 0x78468dc73ce0>.is_authenticated
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/integration/test_cwi_style_wallet_manager.py:460: AssertionError: assert {'authenticated': True} is True
E   ValueError: External applications are not allowed to use the admin originator
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/cwi_style_wallet_manager.py:1521: ValueError: External applications are not allowed to use the admin originator
E   ValueError: User is not authenticated
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/cwi_style_wallet_manager.py:1519: ValueError: User is not authenticated
E   assert None is not None
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_callbacks.py:203: assert None is not None
E   AssertionError: assert <coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93b040> == {'publicKey': 'test-key'}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_callbacks.py:238: AssertionError: assert <coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93b040> == {'publicKey': 'test-key'}
E   Failed: DID NOT RAISE <class 'ValueError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_callbacks.py:266: Failed: DID NOT RAISE <class 'ValueError'>
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   Failed: DID NOT RAISE <class 'ValueError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:276: Failed: DID NOT RAISE <class 'ValueError'>
E   Failed: DID NOT RAISE <class 'ValueError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:310: Failed: DID NOT RAISE <class 'ValueError'>
E   Failed: DID NOT RAISE <class 'ValueError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:435: Failed: DID NOT RAISE <class 'ValueError'>
E   RuntimeError: Basket permission denied for remove
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1296: RuntimeError: Basket permission denied for remove
E   ValueError: Labels starting with 'admin' are reserved

During handling of the above exception, another exception occurred:
E   AssertionError: Regex pattern did not match.
      Expected regex: 'admin-only'
      Actual message: "Labels starting with 'admin' are reserved"
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:713: AssertionError: Regex pattern did not match.
E   ValueError: Unsupported event name: onLabelPermissionRequested
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:977: ValueError: Unsupported event name: onLabelPermissionRequested
E   ValueError: Unsupported event name: onLabelPermissionRequested
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:977: ValueError: Unsupported event name: onLabelPermissionRequested
E   AssertionError: assert 0 == 3
     +  where 0 = <AsyncMock name='mock.decrypt' id='132244399985568'>.call_count
     +    where <AsyncMock name='mock.decrypt' id='132244399985568'> = <MagicMock spec='WalletInterface' id='132244382664416'>.decrypt
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_encryption.py:278: AssertionError: assert 0 == 3
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   Failed: DID NOT RAISE <class 'ValueError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_proxying.py:130: Failed: DID NOT RAISE <class 'ValueError'>
E   RuntimeError: Basket permission denied for remove
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1296: RuntimeError: Basket permission denied for remove
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   AttributeError: 'list' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1226: AttributeError: 'list' object has no attribute 'get'
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:273: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:297: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:316: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:336: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:390: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:412: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:435: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:450: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:472: TypeError: object dict can't be used in 'await' expression
E   TypeError: object list can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:507: TypeError: object list can't be used in 'await' expression
E   TypeError: object list can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:529: TypeError: object list can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_arc_services.py:554: TypeError: object dict can't be used in 'await' expression
E   NameError: name 'InvalidParameterError' is not defined
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_exchange_rates.py:264: NameError: name 'InvalidParameterError' is not defined
E   NameError: name 'update_exchangeratesapi' is not defined
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_exchange_rates.py:285: NameError: name 'update_exchangeratesapi' is not defined
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   NameError: name 'update_exchangeratesapi' is not defined
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_exchange_rates.py:344: NameError: name 'update_exchangeratesapi' is not defined
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   NameError: name 'update_exchangeratesapi' is not defined

During handling of the above exception, another exception occurred:
E   NameError: name 'InvalidParameterError' is not defined
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_exchange_rates.py:384: NameError: name 'InvalidParameterError' is not defined
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
/usr/lib/python3.12/pkgutil.py:528: AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
E   AssertionError: assert (False or False)
     +  where False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9613a0>, 'get_height')
     +  and   False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9613a0>, 'get_chain_tip_height')
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_chain_tracker.py:23: AssertionError: assert (False or False)
E   AssertionError: assert (False or False)
     +  where False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9c6db0>, 'chain')
     +  and   False = hasattr(<bsv_wallet_toolbox.services.services.Services object at 0x78468d9c6660>, '_chain')
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_chain_tracker.py:107: AssertionError: assert (False or False)
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:683: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:586: TypeError: 'Mock' object cannot be interpreted as an integer
E   AssertionError: assert ('confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []})
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:20: AssertionError: assert ('confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []})
E   AssertionError: assert None == []
     +  where None = <built-in method get of dict object at 0x78468b600fc0>('confirmed')
     +    where <built-in method get of dict object at 0x78468b600fc0> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}.get
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:31: AssertionError: assert None == []
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:53: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:63: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:78: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:98: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:113: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:126: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:139: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:166: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:184: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:193: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:209: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:220: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:240: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   AssertionError: assert None == []
     +  where None = <built-in method get of dict object at 0x78468b639700>('confirmed')
     +    where <built-in method get of dict object at 0x78468b639700> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}.get
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:260: AssertionError: assert None == []
E   AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_script_history_min.py:272: AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_utxo_status_min.py:58: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_utxo_status_min.py:179: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_get_utxo_status_min.py:188: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   TypeError: object int can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:552: TypeError: object int can't be used in 'await' expression
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_local_services_hash_and_locktime.py:95: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/chaintrackers/whatsonchain.py:43: TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   ConnectionError: Network unreachable
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_local_services_hash_and_locktime.py:279: ConnectionError: Network unreachable
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/chaintrackers/whatsonchain.py:43: TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
E   AttributeError: 'str' object has no attribute 'outputs'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/transaction_input.py:28: AttributeError: 'str' object has no attribute 'outputs'
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:169: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:190: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:207: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:227: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:248: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:268: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:287: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:306: assert True is False
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:325: assert True is False
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:347: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   AssertionError: assert False is True
     +  where False = <built-in method get of dict object at 0x78468b542380>('accepted')
     +    where <built-in method get of dict object at 0x78468b542380> = {'accepted': False, 'txid': None, 'message': 'Invalid BEEF/tx hex'}.get
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:439: AssertionError: assert False is True
E   AssertionError: assert '\u65e0\u6548\u7684\u4ea4\u6613\u6570\u636e' in 'mocked'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:484: AssertionError: assert '\u65e0\u6548\u7684\u4ea4\u6613\u6570\u636e' in 'mocked'
E   AssertionError: assert 'fallback' in 'mocked'
     +  where 'mocked' = <built-in method lower of str object at 0x78468e3361f0>()
     +    where <built-in method lower of str object at 0x78468e3361f0> = 'mocked'.lower
     +      where 'mocked' = <built-in method get of dict object at 0x78468b525e40>('message', '')
     +        where <built-in method get of dict object at 0x78468b525e40> = {'accepted': True, 'txid': '7e5b797b86abd31a654bf296900d6cb14d04ef0811568ff4675494af2d92166b', 'message': 'mocked'}.get
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:507: AssertionError: assert 'fallback' in 'mocked'
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef.py:523: assert True is False
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef_array_min.py:56: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_post_beef_min.py:40: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244378973248'> is None or False)
     +  where False = isinstance(<AsyncMock name='mock.current_height()' id='132244378973248'>, int)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:417: AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244378973248'> is None or False)
E   AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244380891856'> is None or False)
     +  where False = isinstance(<AsyncMock name='mock.current_height()' id='132244380891856'>, int)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:427: AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244380891856'> is None or False)
E   TypeError: object NoneType can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:455: TypeError: object NoneType can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:483: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:510: TypeError: object dict can't be used in 'await' expression
E   TypeError: object dict can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:538: TypeError: object dict can't be used in 'await' expression
E   TypeError: object list can't be used in 'await' expression
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:565: TypeError: object list can't be used in 'await' expression
E   AttributeError: 'Services' object has no attribute 'update_exchangeratesapi_services'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:592: AttributeError: 'Services' object has no attribute 'update_exchangeratesapi_services'
E   assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5140> is None or False)
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5140>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:611: assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5140> is None or False)
E   assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93bb40> is None or False)
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93bb40>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:625: assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93bb40> is None or False)
E   AttributeError: 'coroutine' object has no attribute 'version'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:417: AttributeError: 'coroutine' object has no attribute 'version'
E   assert False
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e7940>, bool)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:657: assert False
E   AssertionError: assert False
     +  where False = isinstance(<AsyncMock name='mock.get_tx_propagation()' id='132244379821568'>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:671: AssertionError: assert False
E   ConnectionError: Provider down
/usr/lib/python3.12/unittest/mock.py:2262: ConnectionError: Provider down
E   assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93a640> is None or False)
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93a640>, str)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_services_methods.py:696: assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93a640> is None or False)
E   KeyError: 'chain'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:213: KeyError: 'chain'
E   TypeError: An asyncio.Future, a coroutine or an awaitable is required
/usr/lib/python3.12/asyncio/tasks.py:689: TypeError: An asyncio.Future, a coroutine or an awaitable is required
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   TypeError: 'Mock' object cannot be interpreted as an integer
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/services.py:1014: TypeError: 'Mock' object cannot be interpreted as an integer
E   AssertionError: assert 'error' in {'not_found', 'unknown'}
     +  where 'error' = <built-in method get of dict object at 0x78468b358040>('status')
     +    where <built-in method get of dict object at 0x78468b358040> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}}.get
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_transaction_status_min.py:34: AssertionError: assert 'error' in {'not_found', 'unknown'}
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_transaction_status_min.py:55: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   AssertionError: assert 'error' in ['confirmed', 'not_found', 'unknown', 'pending', 'unconfirmed']
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_transaction_status_min.py:149: AssertionError: assert 'error' in ['confirmed', 'not_found', 'unknown', 'pending', 'unconfirmed']
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_transaction_status_min.py:189: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_transaction_status_min.py:198: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_verify_beef.py:178: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>)
E   assert True is False
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_verify_beef.py:297: assert True is False
E   assert 0 > 0
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_verify_beef.py:427: assert 0 > 0
E   AttributeError: 'coroutine' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/providers/whatsonchain.py:571: AttributeError: 'coroutine' object has no attribute 'get'
E   ValueError: Invalid JSON
/usr/lib/python3.12/unittest/mock.py:1193: ValueError: Invalid JSON
E   assert False
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68ef40>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_whats_on_chain.py:532: assert False
E   ValueError: Invalid JSON
/usr/lib/python3.12/unittest/mock.py:1193: ValueError: Invalid JSON
E   ValueError: Invalid JSON
/usr/lib/python3.12/unittest/mock.py:1193: ValueError: Invalid JSON
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_whats_on_chain.py:652: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   AttributeError: 'coroutine' object has no attribute 'get'
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/services/providers/whatsonchain.py:571: AttributeError: 'coroutine' object has no attribute 'get'
E   assert False
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5d40>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_whats_on_chain.py:702: assert False
E   assert (False or <coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68d840> is None)
     +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68d840>, dict)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/services/test_whats_on_chain.py:716: assert (False or <coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68d840> is None)
E   ZeroDivisionError: integer division or modulo by zero
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/crypto_utils.py:58: ZeroDivisionError: integer division or modulo by zero
E   Failed: DID NOT RAISE <class 'RuntimeError'>
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/test_edge_cases.py:232: Failed: DID NOT RAISE <class 'RuntimeError'>
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'reference': a non-empty base64 string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00048s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00544s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:20.662045', '2025-12-01 05:16:20.662045')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:20.664198', '2025-12-01 05:16:20.664198')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:405: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'reference': a non-empty base64 string
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 123, None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:20.879801', '2025-12-01 05:16:20.879801')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:20.867920', '2025-12-01 05:16:20.867922')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:20.868809', '2025-12-01 05:16:20.868810')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a9293c0>, '2025-12-01 05:16:20.870006', '2025-12-01 05:16:20.870007')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00022s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a929780>, 0, '2025-12-01 05:16:20.871340', '2025-12-01 05:16:20.871342')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008673s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:20.877287', '2025-12-01 05:16:20.877287')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('', 123, None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:20.879801', '2025-12-01 05:16:20.879801')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, 123, None, None, None, None, 0, '2025-12-01 05:16:20.970697', '2025-12-01 05:16:20.970697')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:20.958465', '2025-12-01 05:16:20.958467')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:20.959376', '2025-12-01 05:16:20.959378')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c7280>, '2025-12-01 05:16:20.960532', '2025-12-01 05:16:20.960533')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c74c0>, 0, '2025-12-01 05:16:20.961871', '2025-12-01 05:16:20.961873')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008736s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('default', 1, 0, '2025-12-01 05:16:20.968146', '2025-12-01 05:16:20.968146')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('', 'dGVzdA==', None, 123, None, None, None, None, 0, '2025-12-01 05:16:20.970697', '2025-12-01 05:16:20.970697')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, 'gggggggggggggggggggggggggggggggggggggggg', None, None, None, None, 0, '2025-12-01 05:16:21.004037', '2025-12-01 05:16:21.004037')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:20.990002', '2025-12-01 05:16:20.990005')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:20.990952', '2025-12-01 05:16:20.990953')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c7280>, '2025-12-01 05:16:20.992073', '2025-12-01 05:16:20.992074')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c4b80>, 0, '2025-12-01 05:16:20.993590', '2025-12-01 05:16:20.993592')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01065s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:21.001536', '2025-12-01 05:16:21.001536')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('', 'dGVzdA==', None, 'gggggggggggggggggggggggggggggggggggggggg', None, None, None, None, 0, '2025-12-01 05:16:21.004037', '2025-12-01 05:16:21.004037')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.094448', '2025-12-01 05:16:21.094448')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.082426', '2025-12-01 05:16:21.082428')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.083343', '2025-12-01 05:16:21.083344')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c7d00>, '2025-12-01 05:16:21.084458', '2025-12-01 05:16:21.084460')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c7f40>, 0, '2025-12-01 05:16:21.085839', '2025-12-01 05:16:21.085840')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008755s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('default', 1, 0, '2025-12-01 05:16:21.091903', '2025-12-01 05:16:21.091903')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.094448', '2025-12-01 05:16:21.094448')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.127878', '2025-12-01 05:16:21.127878')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.116045', '2025-12-01 05:16:21.116048')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.117024', '2025-12-01 05:16:21.117026')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c7c40>, '2025-12-01 05:16:21.118058', '2025-12-01 05:16:21.118059')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c7700>, 0, '2025-12-01 05:16:21.119546', '2025-12-01 05:16:21.119547')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008502s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00008s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:21.125405', '2025-12-01 05:16:21.125405')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.127878', '2025-12-01 05:16:21.127878')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.158745', '2025-12-01 05:16:21.158745')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.146689', '2025-12-01 05:16:21.146691')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.147752', '2025-12-01 05:16:21.147753')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x784689b18580>, '2025-12-01 05:16:21.148750', '2025-12-01 05:16:21.148751')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x784689b187c0>, 0, '2025-12-01 05:16:21.150178', '2025-12-01 05:16:21.150179')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008748s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:21.156141', '2025-12-01 05:16:21.156141')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.158745', '2025-12-01 05:16:21.158745')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.190112', '2025-12-01 05:16:21.190112')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.178269', '2025-12-01 05:16:21.178271')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.179193', '2025-12-01 05:16:21.179194')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x784689b187c0>, '2025-12-01 05:16:21.180290', '2025-12-01 05:16:21.180291')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x784689b18e80>, 0, '2025-12-01 05:16:21.181690', '2025-12-01 05:16:21.181691')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00864s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:21.187642', '2025-12-01 05:16:21.187642')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.190112', '2025-12-01 05:16:21.190112')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.476511', '2025-12-01 05:16:21.476511')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.464457', '2025-12-01 05:16:21.464460')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.465397', '2025-12-01 05:16:21.465398')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a929a80>, '2025-12-01 05:16:21.466410', '2025-12-01 05:16:21.466412')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c7d00>, 0, '2025-12-01 05:16:21.467941', '2025-12-01 05:16:21.467942')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008536s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:21.473918', '2025-12-01 05:16:21.473918')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.476511', '2025-12-01 05:16:21.476511')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   sqlite3.IntegrityError: NOT NULL constraint failed: certificates.serialNumber

The above exception was the direct cause of the following exception:
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
    [SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
    [parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.508209', '2025-12-01 05:16:21.508209')]
    (Background on this error at: https://sqlalche.me/e/20/gkpj)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.496132', '2025-12-01 05:16:21.496136')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.497244', '2025-12-01 05:16:21.497246')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c7340>, '2025-12-01 05:16:21.498247', '2025-12-01 05:16:21.498248')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c5480>, 0, '2025-12-01 05:16:21.499605', '2025-12-01 05:16:21.499606')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008869s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00008s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:21.505674', '2025-12-01 05:16:21.505674')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.508209', '2025-12-01 05:16:21.508209')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:951: sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
E   TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.622409', '2025-12-01 05:16:21.622414')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.623357', '2025-12-01 05:16:21.623358')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c6c80>, '2025-12-01 05:16:21.624526', '2025-12-01 05:16:21.624527')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c6e00>, 0, '2025-12-01 05:16:21.625821', '2025-12-01 05:16:21.625822')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008731s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:21.631923', '2025-12-01 05:16:21.631923')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00447s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/signer/methods.py:683: TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
E   TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:21.684700', '2025-12-01 05:16:21.684702')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:21.685632', '2025-12-01 05:16:21.685634')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a6c6e00>, '2025-12-01 05:16:21.686747', '2025-12-01 05:16:21.686748')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a6c7dc0>, 0, '2025-12-01 05:16:21.688254', '2025-12-01 05:16:21.688255')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008666s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:21.694285', '2025-12-01 05:16:21.694285')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.004317s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/signer/methods.py:683: TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005783s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:21.869997', '2025-12-01 05:16:21.869997')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:21.871918', '2025-12-01 05:16:21.871918')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01053s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('', 'test', '020000000000000000000000000000000000000000000000000000000000000000')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_certificates.py:820: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005548s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:21.947630', '2025-12-01 05:16:21.947630')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:21.949650', '2025-12-01 05:16:21.949650')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01049s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('dGVzdA==', '', '020000000000000000000000000000000000000000000000000000000000000000')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_certificates.py:859: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005324s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.095511', '2025-12-01 05:16:22.095511')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.097403', '2025-12-01 05:16:22.097403')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01013s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('dGVzdA==', 'test', 'abcdef1234567890abcdef1234567890abcd')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_certificates.py:945: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005245s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.218609', '2025-12-01 05:16:22.218609')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.220580', '2025-12-01 05:16:22.220580')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:654: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
E   AssertionError: assert {'relinquished': True} == {'relinquished': False}
      
      Differing items:
      {'relinquished': True} != {'relinquished': False}
      
      Full diff:
        {
      -     'relinquished': False,
      ?                     ^^^^
      +     'relinquished': True,
      ?                     ^^^
        }
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00050s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005547s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:22.242565', '2025-12-01 05:16:22.242565')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.244736', '2025-12-01 05:16:22.244736')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01053s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('dGVzdA==', 'c2VyaWFs', '020000000000000000000000000000000000000000000000000000000000000000')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01228s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.001293s ago] ('dGVzdA==', 'c2VyaWFs', '020000000000000000000000000000000000000000000000000000000000000000')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_certificates.py:1028: AssertionError: assert {'relinquished': True} == {'relinquished': False}
E   AssertionError: assert {'relinquished': True} == {'relinquished': False}
      
      Differing items:
      {'relinquished': True} != {'relinquished': False}
      
      Full diff:
        {
      -     'relinquished': False,
      ?                     ^^^^
      +     'relinquished': True,
      ?                     ^^^
        }
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005161s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:22.269570', '2025-12-01 05:16:22.269570')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.271534', '2025-12-01 05:16:22.271534')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00985s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates.type = ? AND certificates."serialNumber" = ? AND certificates.certifier = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('dGVzdA==', 'c2VyaWFs', '020000000000000000000000000000000000000000000000000000000000000000')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_certificates.py:1047: AssertionError: assert {'relinquished': True} == {'relinquished': False}
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005409s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:22.299645', '2025-12-01 05:16:22.299645')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.301679', '2025-12-01 05:16:22.301679')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:654: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.350477', '2025-12-01 05:16:22.350479')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.351398', '2025-12-01 05:16:22.351399')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a92bf40>, '2025-12-01 05:16:22.352508', '2025-12-01 05:16:22.352509')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a928e80>, 0, '2025-12-01 05:16:22.353964', '2025-12-01 05:16:22.353965')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008507s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.360119', '2025-12-01 05:16:22.360119')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2647: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.441243', '2025-12-01 05:16:22.441245')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.442196', '2025-12-01 05:16:22.442197')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a92ad40>, '2025-12-01 05:16:22.443226', '2025-12-01 05:16:22.443227')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a929240>, 0, '2025-12-01 05:16:22.444750', '2025-12-01 05:16:22.444752')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008606s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:22.450768', '2025-12-01 05:16:22.450768')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2647: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.500452', '2025-12-01 05:16:22.500454')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.501362', '2025-12-01 05:16:22.501364')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x78468a92bdc0>, '2025-12-01 05:16:22.502537', '2025-12-01 05:16:22.502539')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x78468a929300>, 0, '2025-12-01 05:16:22.503855', '2025-12-01 05:16:22.503857')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008728s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('default', 1, 0, '2025-12-01 05:16:22.509810', '2025-12-01 05:16:22.509810')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2737: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.622359', '2025-12-01 05:16:22.622361')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.623324', '2025-12-01 05:16:22.623326')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x784689b196c0>, '2025-12-01 05:16:22.624450', '2025-12-01 05:16:22.624451')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x784689b19600>, 0, '2025-12-01 05:16:22.625715', '2025-12-01 05:16:22.625716')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00875s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.631855', '2025-12-01 05:16:22.631855')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2737: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00025s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.652421', '2025-12-01 05:16:22.652424')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.655775', '2025-12-01 05:16:22.655776')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x784689b18280>, '2025-12-01 05:16:22.656788', '2025-12-01 05:16:22.656790')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x784689b19900>, 0, '2025-12-01 05:16:22.658095', '2025-12-01 05:16:22.658096')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01101s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:22.664169', '2025-12-01 05:16:22.664169')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2737: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   TypeError: query_overlay() missing 1 required positional argument: 'resolver'
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet_full', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage", created_at, updated_at) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', 'test', '2025-12-01 05:16:22.684063', '2025-12-01 05:16:22.684065')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 10, 1000, 0, '2025-12-01 05:16:22.684998', '2025-12-01 05:16:22.685000')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'completed', 'test-seed-tx', 0, 2000, 1, 0, 'Seeded UTXO for testing', '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, <memory at 0x784689b19780>, '2025-12-01 05:16:22.686138', '2025-12-01 05:16:22.686139')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1, 1, 1, 1, 0, 2000, 'test', 'change', 'change', None, '03cca43f0f28d3edffe30354b28934bc8e881e94ecfa68de2cf899a0a647d37c', None, None, None, None, None, None, None, None, None, <memory at 0x784689b19cc0>, 0, '2025-12-01 05:16:22.687591', '2025-12-01 05:16:22.687593')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008563s ago] ('test_wallet_full',)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.693600', '2025-12-01 05:16:22.693600')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2737: TypeError: query_overlay() missing 1 required positional argument: 'resolver'
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID and keyID': required if identityKey is false or undefined
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005294s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.765401', '2025-12-01 05:16:22.765401')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.767440', '2025-12-01 05:16:22.767440')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2022: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID and keyID': required if identityKey is false or undefined
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005147s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.791366', '2025-12-01 05:16:22.791366')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.793221', '2025-12-01 05:16:22.793221')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2033: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'keyID': a non-empty string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005128s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.814703', '2025-12-01 05:16:22.814703')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.816587', '2025-12-01 05:16:22.816587')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2029: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'keyID': a non-empty string
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005393s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.838250', '2025-12-01 05:16:22.838250')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.840240', '2025-12-01 05:16:22.840240')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2033: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005307s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:22.961523', '2025-12-01 05:16:22.961523')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.963438', '2025-12-01 05:16:22.963438')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005352s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:22.985625', '2025-12-01 05:16:22.985625')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:22.987665', '2025-12-01 05:16:22.987665')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
E   ValueError: non-hexadecimal number found in fromhex() arg at position 0

The above exception was the direct cause of the following exception:
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got 'invalid_key_format', error: non-hexadecimal number found in fromhex() arg at position 0)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005358s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] ('default', 1, 0, '2025-12-01 05:16:23.010223', '2025-12-01 05:16:23.010223')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00027s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.012232', '2025-12-01 05:16:23.012232')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:87: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got 'invalid_key_format', error: non-hexadecimal number found in fromhex() arg at position 0)
E   ValueError: The public key could not be parsed or is invalid.

The above exception was the direct cause of the following exception:
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got '', error: The public key could not be parsed or is invalid.)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005223s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:23.037732', '2025-12-01 05:16:23.037732')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.039652', '2025-12-01 05:16:23.039652')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:87: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got '', error: The public key could not be parsed or is invalid.)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005115s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:23.061801', '2025-12-01 05:16:23.061801')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.063838', '2025-12-01 05:16:23.063838')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2255: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
E   AssertionError: invalid encrypted length
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00027s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008123s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:23.140088', '2025-12-01 05:16:23.140088')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.142015', '2025-12-01 05:16:23.142015')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/bsv/keys.py:306: AssertionError: invalid encrypted length
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005218s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:23.163858', '2025-12-01 05:16:23.163858')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.165735', '2025-12-01 05:16:23.165735')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005246s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:23.211205', '2025-12-01 05:16:23.211205')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.213130', '2025-12-01 05:16:23.213130')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005315s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:23.787828', '2025-12-01 05:16:23.787828')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.789687', '2025-12-01 05:16:23.789687')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005138s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:23.811486', '2025-12-01 05:16:23.811486')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.813415', '2025-12-01 05:16:23.813415')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005101s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:23.861358', '2025-12-01 05:16:23.861358')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:23.863282', '2025-12-01 05:16:23.863282')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2369: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005186s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.007947', '2025-12-01 05:16:24.007947')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.009832', '2025-12-01 05:16:24.009832')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_hmac_signature.py:348: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005445s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:24.032314', '2025-12-01 05:16:24.032314')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.034202', '2025-12-01 05:16:24.034202')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_hmac_signature.py:365: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005145s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.056186', '2025-12-01 05:16:24.056186')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.058141', '2025-12-01 05:16:24.058141')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'hmac': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00558s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.080677', '2025-12-01 05:16:24.080677')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.082628', '2025-12-01 05:16:24.082628')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'hmac': bytes-like or list[int] expected
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'KeyError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005029s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.202637', '2025-12-01 05:16:24.202637')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.204464', '2025-12-01 05:16:24.204464')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_hmac_signature.py:483: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'KeyError'>)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005053s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:24.229397', '2025-12-01 05:16:24.229397')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.231325', '2025-12-01 05:16:24.231325')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:112: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
E   assert True is False
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005183s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:24.300525', '2025-12-01 05:16:24.300525')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.302356', '2025-12-01 05:16:24.302356')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_hmac_signature.py:591: assert True is False
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005245s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:24.374548', '2025-12-01 05:16:24.374548')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.376491', '2025-12-01 05:16:24.376491')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_hmac_signature.py:660: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID/signature': required
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005322s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.399063', '2025-12-01 05:16:24.399063')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.400914', '2025-12-01 05:16:24.400914')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:2181: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID/signature': required
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'tx': non-empty bytes or list of integers
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00030s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009155s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00037s] ('default', 1, 0, '2025-12-01 05:16:24.735053', '2025-12-01 05:16:24.735053')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.737313', '2025-12-01 05:16:24.737313')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:442: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'tx': non-empty bytes or list of integers
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'outputs': a non-empty list
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005318s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.759806', '2025-12-01 05:16:24.759806')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.761736', '2025-12-01 05:16:24.761736')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:447: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'outputs': a non-empty list
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005272s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:24.783678', '2025-12-01 05:16:24.783678')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.785610', '2025-12-01 05:16:24.785610')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:452: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00047s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005565s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:24.984739', '2025-12-01 05:16:24.984739')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:24.986931', '2025-12-01 05:16:24.986931')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01056s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId" 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.is_deleted IS 0 AND tx_labels.label IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, '   ')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:178: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005251s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.084641', '2025-12-01 05:16:25.084641')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.086523', '2025-12-01 05:16:25.086523')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009948s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId" 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.is_deleted IS 0 AND tx_labels.label IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'test')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:244: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005358s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.110383', '2025-12-01 05:16:25.110383')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.112299', '2025-12-01 05:16:25.112299')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01005s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM (SELECT count(*) AS count_2 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?)) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?) ORDER BY transactions."transactionId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal', 50, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:262: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005197s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.137393', '2025-12-01 05:16:25.137393')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.139281', '2025-12-01 05:16:25.139281')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009876s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM (SELECT count(*) AS count_2 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?)) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?) ORDER BY transactions."transactionId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal', 0, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:277: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00526s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.214443', '2025-12-01 05:16:25.214443')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.216356', '2025-12-01 05:16:25.216356')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009952s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM (SELECT count(*) AS count_2 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?)) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?) ORDER BY transactions."transactionId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:325: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005057s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.241166', '2025-12-01 05:16:25.241166')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.243025', '2025-12-01 05:16:25.243025')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009633s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM (SELECT count(*) AS count_2 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?)) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?) ORDER BY transactions."transactionId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal', 50, 1)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:343: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00028s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009074s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:25.271853', '2025-12-01 05:16:25.271853')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.273816', '2025-12-01 05:16:25.273816')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01392s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM (SELECT count(*) AS count_2 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?)) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.status IN (?, ?, ?, ?, ?, ?, ?) ORDER BY transactions."transactionId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, 'completed', 'unprocessed', 'sending', 'unproven', 'unsigned', 'nosend', 'nonfinal', 10000, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_actions.py:361: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005152s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, '2025-12-01 05:16:25.578093', '2025-12-01 05:16:25.578093')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.579968', '2025-12-01 05:16:25.579968')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009756s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:273: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00504s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:25.602979', '2025-12-01 05:16:25.602979')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.604830', '2025-12-01 05:16:25.604830')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009627s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:286: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005083s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.701798', '2025-12-01 05:16:25.701798')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.703736', '2025-12-01 05:16:25.703736')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009776s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:349: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005015s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:25.726726', '2025-12-01 05:16:25.726726')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.728691', '2025-12-01 05:16:25.728691')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009781s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:375: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00029s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.008304s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:25.755243', '2025-12-01 05:16:25.755243')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.757135', '2025-12-01 05:16:25.757135')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.013s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:394: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005252s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:25.781179', '2025-12-01 05:16:25.781179')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.783153', '2025-12-01 05:16:25.783153')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0102s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:413: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005151s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.806612', '2025-12-01 05:16:25.806612')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.808492', '2025-12-01 05:16:25.808492')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009873s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:429: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005062s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.854477', '2025-12-01 05:16:25.854477')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.856361', '2025-12-01 05:16:25.856361')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01258s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:461: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00053s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005488s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:25.882498', '2025-12-01 05:16:25.882498')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:25.884409', '2025-12-01 05:16:25.884409')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01013s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT certificates."certificateId", certificates."userId", certificates.type, certificates."serialNumber", certificates.certifier, certificates.subject, certificates.verifier, certificates."revocationOutpoint", certificates.signature, certificates."isDeleted", certificates.created_at, certificates.updated_at 
FROM certificates 
WHERE certificates."userId" = ? AND certificates."isDeleted" IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_certificates.py:480: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'type': a base64 string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005278s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.064887', '2025-12-01 05:16:26.064887')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.066836', '2025-12-01 05:16:26.066836')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:261: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'type': a base64 string
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005263s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.313327', '2025-12-01 05:16:26.313327')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.315214', '2025-12-01 05:16:26.315214')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00994s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, '   ')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:274: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005201s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.435329', '2025-12-01 05:16:26.435329')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.437181', '2025-12-01 05:16:26.437181')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009824s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_tags."outputTagId" 
FROM output_tags 
WHERE output_tags."userId" = ? AND output_tags.is_deleted IS 0 AND output_tags.tag IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, '   ')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:350: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005348s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.461284', '2025-12-01 05:16:26.461284')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.463268', '2025-12-01 05:16:26.463268')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01004s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_tags."outputTagId" 
FROM output_tags 
WHERE output_tags."userId" = ? AND output_tags.is_deleted IS 0 AND output_tags.tag IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00020s] (1, 'tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_tag_name_')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:363: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005092s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:26.727211', '2025-12-01 05:16:26.727211')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.729102', '2025-12-01 05:16:26.729102')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01003s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ? ORDER BY outputs."outputId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 1, 10, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:431: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005178s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.754835', '2025-12-01 05:16:26.754835')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.756696', '2025-12-01 05:16:26.756696')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00984s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ? ORDER BY outputs."outputId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 1, 10, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:450: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00041s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.007723s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:26.784641', '2025-12-01 05:16:26.784641')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.786631', '2025-12-01 05:16:26.786631')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01246s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ? ORDER BY outputs."outputId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 1, 10, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:477: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005286s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.813029', '2025-12-01 05:16:26.813029')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.814956', '2025-12-01 05:16:26.814956')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01036s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] (1, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ? ORDER BY outputs."outputId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 1, 10, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:486: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005251s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:26.840886', '2025-12-01 05:16:26.840886')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:26.842762', '2025-12-01 05:16:26.842762')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009934s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId" 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ? AND output_baskets.is_deleted IS 0
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(*) AS count_1 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs 
WHERE outputs."userId" = ? AND outputs.spendable IS 1 AND outputs."basketId" = ? ORDER BY outputs."outputId"
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 1, 10, 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_list_outputs.py:499: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   RuntimeError: Services must be configured to use getHeaderForHeight
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005314s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.143103', '2025-12-01 05:16:27.143103')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.144998', '2025-12-01 05:16:27.144998')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:1373: RuntimeError: Services must be configured to use getHeaderForHeight
E   RuntimeError: Services must be configured to use getHeaderForHeight
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0053s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.190685', '2025-12-01 05:16:27.190685')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.192533', '2025-12-01 05:16:27.192533')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:1373: RuntimeError: Services must be configured to use getHeaderForHeight
E   RuntimeError: Services must be configured to use getHeaderForHeight
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005099s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:27.214352', '2025-12-01 05:16:27.214352')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.216242', '2025-12-01 05:16:27.216242')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/wallet.py:1373: RuntimeError: Services must be configured to use getHeaderForHeight
E   Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005129s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.395091', '2025-12-01 05:16:27.395091')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.396990', '2025-12-01 05:16:27.396990')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:321: Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
E   Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005395s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, '2025-12-01 05:16:27.419459', '2025-12-01 05:16:27.419459')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.421310', '2025-12-01 05:16:27.421310')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:334: Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005125s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.443153', '2025-12-01 05:16:27.443153')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.445033', '2025-12-01 05:16:27.445033')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:346: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005168s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.489656', '2025-12-01 05:16:27.489656')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.491518', '2025-12-01 05:16:27.491518')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:381: Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
E   Failed: DID NOT RAISE <class 'TypeError'>
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005234s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.564524', '2025-12-01 05:16:27.564524')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.566392', '2025-12-01 05:16:27.566392')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:418: Failed: DID NOT RAISE <class 'TypeError'>
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:555: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:567: Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
E   ValueError: non-hexadecimal number found in fromhex() arg at position 0
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_misc_methods.py:580: ValueError: non-hexadecimal number found in fromhex() arg at position 0
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005359s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.682631', '2025-12-01 05:16:27.682631')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.684595', '2025-12-01 05:16:27.684595')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01029s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:140: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005384s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.708102', '2025-12-01 05:16:27.708102')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.710043', '2025-12-01 05:16:27.710043')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01017s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:152: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005094s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.732256', '2025-12-01 05:16:27.732256')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.734086', '2025-12-01 05:16:27.734086')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009655s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:164: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005037s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.755969', '2025-12-01 05:16:27.755969')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.757794', '2025-12-01 05:16:27.757794')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009738s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:179: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00054s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005871s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.784221', '2025-12-01 05:16:27.784221')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.786325', '2025-12-01 05:16:27.786325')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.0108s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:192: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005214s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.832565', '2025-12-01 05:16:27.832565')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.834448', '2025-12-01 05:16:27.834448')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009974s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:216: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005183s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.880377', '2025-12-01 05:16:27.880377')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.882233', '2025-12-01 05:16:27.882233')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009765s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:243: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005113s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:27.904089', '2025-12-01 05:16:27.904089')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.905939', '2025-12-01 05:16:27.905939')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009634s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:255: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.00546s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.932158', '2025-12-01 05:16:27.932158')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.934043', '2025-12-01 05:16:27.934043')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01018s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs JOIN transactions ON outputs."transactionId" = transactions."transactionId" 
WHERE outputs."userId" = ? AND transactions.txid = ? AND outputs.vout = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] (1, 'invalid-txid', 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:275: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005202s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.958558', '2025-12-01 05:16:27.958558')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.960476', '2025-12-01 05:16:27.960476')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01009s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs JOIN transactions ON outputs."transactionId" = transactions."transactionId" 
WHERE outputs."userId" = ? AND transactions.txid = ? AND outputs.vout = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, '2795b293c698b2244147aaba745db887a632d21990c474df46d842ec3e52f122', -1)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:287: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005371s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00013s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:27.986280', '2025-12-01 05:16:27.986280')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:27.988202', '2025-12-01 05:16:27.988202')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01009s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:306: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'KeyError'>, <class 'TypeError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005052s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:28.010310', '2025-12-01 05:16:28.010310')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:28.012208', '2025-12-01 05:16:28.012208')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009703s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:318: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'KeyError'>, <class 'TypeError'>)
E   AssertionError: assert {'relinquished': False} == {'relinquished': True}
      
      Differing items:
      {'relinquished': False} != {'relinquished': True}
      
      Full diff:
        {
      -     'relinquished': True,
      ?                     ^^^
      +     'relinquished': False,
      ?                     ^^^^
        }
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005255s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, '2025-12-01 05:16:28.109744', '2025-12-01 05:16:28.109744')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:28.111741', '2025-12-01 05:16:28.111741')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT outputs."outputId", outputs."userId", outputs."transactionId", outputs."basketId", outputs.spendable, outputs.change, outputs.vout, outputs.satoshis, outputs."providedBy", outputs.purpose, outputs.type, outputs."outputDescription", outputs.txid, outputs."senderIdentityKey", outputs."derivationPrefix", outputs."derivationSuffix", outputs."customInstructions", outputs."spentBy", outputs."sequenceNumber", outputs."spendingDescription", outputs."scriptLength", outputs."scriptOffset", outputs."lockingScript", outputs.spent, outputs.created_at, outputs.updated_at 
FROM outputs JOIN transactions ON outputs."transactionId" = transactions."transactionId" 
WHERE outputs."userId" = ? AND transactions.txid = ? AND outputs.vout = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, '2795b293c698b2244147aaba745db887a632d21990c474df46d842ec3e52f122', 0)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_relinquish_output.py:366: AssertionError: assert {'relinquished': False} == {'relinquished': True}
E   Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'OverflowError'>)
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00003s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005129s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, '2025-12-01 05:16:30.710778', '2025-12-01 05:16:30.710778')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:30.712655', '2025-12-01 05:16:30.712655')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.009796s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'unsigned', '4ZdVaoO5VpXC', 1, 0, 1, 0, 'too large', None, <memory at 0x78468b61bb80>, None, '2025-12-01 05:16:30.714532', '2025-12-01 05:16:30.714532')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] (1, 1, None, 1, 0, 0, 220000000000000000, 'you', '', 'custom', 'too large', None, None, None, None, None, None, None, None, None, None, <memory at 0x78468b61b7c0>, 0, '2025-12-01 05:16:30.714532', '2025-12-01 05:16:30.714532')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.reference = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, '4ZdVaoO5VpXC')
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE transactions SET status=?, txid=?, "rawTx"=? WHERE transactions."transactionId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('unprocessed', '9dd4f5f0a8502e03ee4cfae6c6e1c8c2f96c8be7c7ba89553d0a25e3b0fe6c6a', <memory at 0x78468b61ae00>, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO proven_tx_reqs ("provenTxId", status, attempts, notified, txid, batch, history, notify, "rawTx", "inputBEEF") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "provenTxReqId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (None, 'unsent', 0, 0, '9dd4f5f0a8502e03ee4cfae6c6e1c8c2f96c8be7c7ba89553d0a25e3b0fe6c6a', None, '{}', '{}', <memory at 0x78468a929840>, None)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_wallet_create_action.py:349: Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'OverflowError'>)
E   AssertionError: assert 'noSendChange' in {'txid': '24a6598512489c0102f8371cefc5cc4e4d1f1bf23ec97e919f5c114d91bb91a5', 'tx': [1, 0, 0, 0, 0, 1, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.005256s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:30.811513', '2025-12-01 05:16:30.811513')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:30.813402', '2025-12-01 05:16:30.813402')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.01002s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO transactions ("userId", "provenTxId", status, reference, "isOutgoing", satoshis, version, "lockTime", description, txid, "inputBEEF", "rawTx", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (1, None, 'unsigned', 'VIeDKWXbvycy', 1, 0, 1, 0, 'Test transaction', None, <memory at 0x784689b1a140>, None, '2025-12-01 05:16:30.815357', '2025-12-01 05:16:30.815357')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO outputs ("userId", "transactionId", "basketId", spendable, change, vout, satoshis, "providedBy", purpose, type, "outputDescription", txid, "senderIdentityKey", "derivationPrefix", "derivationSuffix", "customInstructions", "spentBy", "sequenceNumber", "spendingDescription", "scriptLength", "scriptOffset", "lockingScript", spent, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] (1, 1, None, 1, 0, 0, 42, 'you', '', 'custom', 'test output', None, None, None, None, None, None, None, None, None, None, <memory at 0x784689b1bc40>, 0, '2025-12-01 05:16:30.815357', '2025-12-01 05:16:30.815357')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."transactionId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE transactions SET txid=? WHERE transactions."transactionId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00031s] ('b518c3f96c47cf0b580ccff6dfa6c88440b7eb2a8bd159a0b1edd1bd14842b21', 1)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT transactions."transactionId", transactions."userId", transactions."provenTxId", transactions.status, transactions.reference, transactions."isOutgoing", transactions.satoshis, transactions.version, transactions."lockTime", transactions.description, transactions.txid, transactions."inputBEEF", transactions."rawTx", transactions.created_at, transactions.updated_at 
FROM transactions 
WHERE transactions."userId" = ? AND transactions.reference = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'VIeDKWXbvycy')
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE transactions SET status=?, txid=?, "rawTx"=? WHERE transactions."transactionId" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('nosend', '24a6598512489c0102f8371cefc5cc4e4d1f1bf23ec97e919f5c114d91bb91a5', <memory at 0x784689b1a800>, 1)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO proven_tx_reqs ("provenTxId", status, attempts, notified, txid, batch, history, notify, "rawTx", "inputBEEF") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "provenTxReqId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00014s] (None, 'nosend', 0, 0, '24a6598512489c0102f8371cefc5cc4e4d1f1bf23ec97e919f5c114d91bb91a5', None, '{}', '{}', <memory at 0x784689b19300>, None)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/wallet/test_wallet_create_action.py:415: AssertionError: assert 'noSendChange' in {'txid': '24a6598512489c0102f8371cefc5cc4e4d1f1bf23ec97e919f5c114d91bb91a5', 'tx': [1, 0, 0, 0, 0, 1, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}
E   bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE settings (
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR(128) NOT NULL, 
	chain VARCHAR(10) NOT NULL, 
	dbtype VARCHAR(10) NOT NULL, 
	"maxOutputScript" INTEGER NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("storageIdentityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	"userId" INTEGER NOT NULL, 
	"identityKey" VARCHAR(130) NOT NULL, 
	"activeStorage" VARCHAR(130) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("userId"), 
	CONSTRAINT ux_users_identity UNIQUE ("identityKey")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_txs (
	"provenTxId" INTEGER NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	height INTEGER NOT NULL, 
	"index" INTEGER NOT NULL, 
	"merklePath" BLOB NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"blockHash" VARCHAR(64) NOT NULL, 
	"merkleRoot" VARCHAR(64) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxId"), 
	CONSTRAINT ux_proven_txs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_txs_height_unsigned CHECK (height >= 0)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_txs_blockhash ON proven_txs ("blockHash")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE monitor_events (
	id INTEGER NOT NULL, 
	event VARCHAR(64) NOT NULL, 
	details TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_monitor_events_event ON monitor_events (event)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE sync_states (
	"syncStateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"storageIdentityKey" VARCHAR(130) NOT NULL, 
	"storageName" VARCHAR NOT NULL, 
	status VARCHAR NOT NULL, 
	init BOOLEAN NOT NULL, 
	"refNum" VARCHAR(100) NOT NULL, 
	"syncMap" TEXT NOT NULL, 
	"when" VARCHAR, 
	satoshis BIGINT, 
	"errorLocal" TEXT, 
	"errorOther" TEXT, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("syncStateId"), 
	CONSTRAINT ux_sync_states_refnum UNIQUE ("refNum"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_sync_states_status ON sync_states (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE transactions (
	"transactionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(64) NOT NULL, 
	reference VARCHAR(64) NOT NULL, 
	"isOutgoing" BOOLEAN NOT NULL, 
	satoshis BIGINT NOT NULL, 
	version INTEGER, 
	"lockTime" INTEGER, 
	description VARCHAR(2048) NOT NULL, 
	txid VARCHAR(64), 
	"inputBEEF" BLOB, 
	"rawTx" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId"), 
	CONSTRAINT ux_transactions_reference UNIQUE (reference), 
	CONSTRAINT ck_transactions_version_unsigned CHECK (version >= 0), 
	CONSTRAINT ck_transactions_locktime_unsigned CHECK (lockTime >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_transactions_status ON transactions (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE proven_tx_reqs (
	"provenTxReqId" INTEGER NOT NULL, 
	"provenTxId" INTEGER, 
	status VARCHAR(16) NOT NULL, 
	attempts INTEGER NOT NULL, 
	notified BOOLEAN NOT NULL, 
	txid VARCHAR(64) NOT NULL, 
	batch VARCHAR(64), 
	history TEXT NOT NULL, 
	notify TEXT NOT NULL, 
	"rawTx" BLOB NOT NULL, 
	"inputBEEF" BLOB, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("provenTxReqId"), 
	CONSTRAINT ux_proven_tx_reqs_txid UNIQUE (txid), 
	CONSTRAINT ck_proven_tx_reqs_attempts_unsigned CHECK (attempts >= 0), 
	FOREIGN KEY("provenTxId") REFERENCES proven_txs ("provenTxId")
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_batch ON proven_tx_reqs (batch)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_proven_tx_reqs_status ON proven_tx_reqs (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificates (
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	type VARCHAR(100) NOT NULL, 
	"serialNumber" VARCHAR(100) NOT NULL, 
	certifier VARCHAR(100) NOT NULL, 
	subject VARCHAR(100) NOT NULL, 
	verifier VARCHAR(100), 
	"revocationOutpoint" VARCHAR(100) NOT NULL, 
	signature VARCHAR(255) NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateId"), 
	CONSTRAINT ux_certificates_unique UNIQUE ("userId", type, certifier, "serialNumber"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_baskets (
	"basketId" INTEGER NOT NULL, 
	name VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	number_of_desired_utxos INTEGER NOT NULL, 
	minimum_desired_utxo_value INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("basketId"), 
	CONSTRAINT ux_output_baskets_user_name UNIQUE ("userId", name), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags (
	"outputTagId" INTEGER NOT NULL, 
	tag VARCHAR(150) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputTagId"), 
	CONSTRAINT ux_output_tags_user_tag UNIQUE ("userId", tag), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels (
	"txLabelId" INTEGER NOT NULL, 
	label VARCHAR(300) NOT NULL, 
	"userId" INTEGER NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("txLabelId"), 
	CONSTRAINT ux_tx_labels_user_label UNIQUE ("userId", label), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE outputs (
	"outputId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	"basketId" INTEGER, 
	spendable BOOLEAN NOT NULL, 
	change BOOLEAN NOT NULL, 
	vout INTEGER NOT NULL, 
	satoshis BIGINT NOT NULL, 
	"providedBy" VARCHAR(130) NOT NULL, 
	purpose VARCHAR(20) NOT NULL, 
	type VARCHAR(50) NOT NULL, 
	"outputDescription" VARCHAR(2048), 
	txid VARCHAR(64), 
	"senderIdentityKey" VARCHAR(130), 
	"derivationPrefix" VARCHAR(200), 
	"derivationSuffix" VARCHAR(200), 
	"customInstructions" VARCHAR(2500), 
	"spentBy" INTEGER, 
	"sequenceNumber" INTEGER, 
	"spendingDescription" VARCHAR(2048), 
	"scriptLength" BIGINT, 
	"scriptOffset" BIGINT, 
	"lockingScript" BLOB, 
	spent BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId"), 
	CONSTRAINT ux_outputs_txid_vout_user UNIQUE ("transactionId", vout, "userId"), 
	CONSTRAINT ck_outputs_scriptlength_unsigned CHECK (scriptLength >= 0), 
	CONSTRAINT ck_outputs_scriptoffset_unsigned CHECK (scriptOffset >= 0), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId"), 
	FOREIGN KEY("basketId") REFERENCES output_baskets ("basketId") ON DELETE SET NULL, 
	FOREIGN KEY("spentBy") REFERENCES transactions ("transactionId") ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE certificate_fields (
	"certificateFieldId" INTEGER NOT NULL, 
	"certificateId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"fieldName" VARCHAR(100) NOT NULL, 
	"fieldValue" VARCHAR NOT NULL, 
	"masterKey" VARCHAR(255) NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("certificateFieldId"), 
	CONSTRAINT ux_certificate_fields_name_cert UNIQUE ("fieldName", "certificateId"), 
	FOREIGN KEY("certificateId") REFERENCES certificates ("certificateId") ON DELETE CASCADE, 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_certificate_fields_cert ON certificate_fields ("certificateId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE tx_labels_map (
	"transactionId" INTEGER NOT NULL, 
	"txLabelId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("transactionId", "txLabelId"), 
	CONSTRAINT ux_tx_labels_map_pair UNIQUE ("txLabelId", "transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE, 
	FOREIGN KEY("txLabelId") REFERENCES tx_labels ("txLabelId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_tx_labels_map_tx ON tx_labels_map ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00004s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE commissions (
	"commissionId" INTEGER NOT NULL, 
	"userId" INTEGER NOT NULL, 
	"transactionId" INTEGER NOT NULL, 
	satoshis INTEGER NOT NULL, 
	"keyOffset" VARCHAR(130) NOT NULL, 
	"isRedeemed" BOOLEAN NOT NULL, 
	"lockingScript" BLOB NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("commissionId"), 
	FOREIGN KEY("userId") REFERENCES users ("userId") ON DELETE CASCADE, 
	UNIQUE ("transactionId"), 
	FOREIGN KEY("transactionId") REFERENCES transactions ("transactionId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_commissions_tx ON commissions ("transactionId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE output_tags_map (
	"outputId" INTEGER NOT NULL, 
	"outputTagId" INTEGER NOT NULL, 
	"isDeleted" BOOLEAN NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, 
	PRIMARY KEY ("outputId", "outputTagId"), 
	CONSTRAINT ux_output_tags_map_pair UNIQUE ("outputTagId", "outputId"), 
	FOREIGN KEY("outputId") REFERENCES outputs ("outputId") ON DELETE CASCADE, 
	FOREIGN KEY("outputTagId") REFERENCES output_tags ("outputTagId") ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_output_tags_map_output ON output_tags_map ("outputId")
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00005s] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users ("identityKey", "activeStorage") VALUES (?, ?) RETURNING "userId", created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097', '')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("settings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("sync_states")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("transactions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_txs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("proven_tx_reqs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificates")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("certificate_fields")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_baskets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("output_tags_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("tx_labels_map")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("commissions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("monitor_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT settings."storageIdentityKey", settings."storageName", settings.chain, settings.dbtype, settings."maxOutputScript", settings.created_at, settings.updated_at 
FROM settings 
WHERE settings."storageIdentityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] ('test_wallet',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO settings ("storageIdentityKey", "storageName", chain, dbtype, "maxOutputScript") VALUES (?, ?, ?, ?, ?) RETURNING created_at, updated_at
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00010s] ('test_wallet', 'default', 'main', 'SQLite', 10000000)
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users."userId", users."identityKey", users."activeStorage", users.created_at, users.updated_at 
FROM users 
WHERE users."identityKey" = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.004984s ago] ('025ad43a22ac38d0bc1f8bacaabb323b5d634703b7a774c4268f6a09e4ddf79097',)
INFO     sqlalchemy.engine.Engine:base.py:2705 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT tx_labels."txLabelId", tx_labels.label, tx_labels."userId", tx_labels.is_deleted, tx_labels.created_at, tx_labels.updated_at 
FROM tx_labels 
WHERE tx_labels."userId" = ? AND tx_labels.label = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00009s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO tx_labels (label, "userId", is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] ('default', 1, 0, '2025-12-01 05:16:30.923134', '2025-12-01 05:16:30.923134')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2702 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT output_baskets."basketId", output_baskets.name, output_baskets."userId", output_baskets.number_of_desired_utxos, output_baskets.minimum_desired_utxo_value, output_baskets.is_deleted, output_baskets.created_at, output_baskets.updated_at 
FROM output_baskets 
WHERE output_baskets."userId" = ? AND output_baskets.name = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00011s] (1, 'default')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO output_baskets (name, "userId", number_of_desired_utxos, minimum_desired_utxo_value, is_deleted, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00012s] ('default', 1, 0, 0, 0, '2025-12-01 05:16:30.925001', '2025-12-01 05:16:30.925001')
INFO     sqlalchemy.engine.Engine:base.py:2708 COMMIT
/home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/utils/validation.py:319: bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
=============================== warnings summary ===============================
tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerExistingUser::test_successfully_decrypts_with_presentation_plus_recovery
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/integration/test_cwi_style_wallet_manager.py:305: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    result = await manager.authenticate_with_recovery(presentation_key, recovery_key)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerProxyMethods::test_passes_if_user_is_authenticated_and_originator_is_not_admin
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/integration/test_cwi_style_wallet_manager.py:881: RuntimeWarning: coroutine 'CWIStyleWalletManager._handle_sync_or_async' was never awaited
    await manager.get_public_key({"identity_key": True}, originator="example.com")
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_trigger_onprotocolpermissionrequested_with_correct_params_when_a_non_admin_domain_requests_a_protocol_operation
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_callbacks.py:198: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.get_public_key(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_reject_the_original_caller_promise_when_permission_is_denied
tests/signer/test_signer_methods_coverage.py::TestSignerMethodsIntegration::test_create_and_sign_workflow
  /usr/lib/python3.12/unittest/mock.py:767: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_reject_the_original_caller_promise_when_permission_is_denied
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_callbacks.py:267: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.get_public_key(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_listing_permission_if_seekbasketlistingpermissions_true_and_no_token
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:2537: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if self._config.get("encryptWalletMetadata") and result.get("outputs"):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_removal_permission_if_seekbasketremovalpermissions_true
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1497: RuntimeWarning: coroutine 'TestWalletPermissionsManagerChecks.test_should_prompt_for_removal_permission_if_seekbasketremovalpermissions_true.<locals>.permission_callback' was never awaited
    return self._request_permission(permission_request)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_certificate_disclosure_permission_if_config_seekcertificatedisclosurepermissions_false
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:468: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.prove_certificate(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_permission_if_seekcertificatedisclosurepermissions_true_no_valid_token
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:500: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.prove_certificate(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_check_that_requested_fields_are_a_subset_of_the_tokens_fields
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:538: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.prove_certificate(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_renewal_if_token_is_expired_cert
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/permissions/test_wallet_permissions_manager_checks.py:582: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    manager.prove_certificate(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_ensure_basket_removal_permission_then_call_relinquishoutput
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/src/bsv_wallet_toolbox/manager/wallet_permissions_manager.py:1497: RuntimeWarning: coroutine 'TestWalletPermissionsManagerProxying.test_should_ensure_basket_removal_permission_then_call_relinquishoutput.<locals>.auto_grant' was never awaited
    return self._request_permission(permission_request)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_get_chain_tracker.py::test_get_chain_tracker_subscription_management
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'WhatsOnChain.unsubscribe' was never awaited
    result = testfunction(**testargs)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_get_chain_tracker.py::test_get_chain_tracker_header_operations
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'WhatsOnChain.find_header_for_height' was never awaited
    result = testfunction(**testargs)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_get_chain_tracker.py::test_get_chain_tracker_reorg_handling
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'WhatsOnChain.subscribe_reorgs' was never awaited
    result = testfunction(**testargs)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_services_methods.py::TestServicesErrorHandling::test_subscribe_reorgs_invalid_callback
  /usr/lib/python3.12/unittest/mock.py:2188: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_transaction_status.py::test_get_transaction_status_invalid_txid_formats
  /usr/lib/python3.12/unittest/mock.py:2129: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if getattr(self, "_mock_methods", None) is not None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_transaction_status.py::test_get_transaction_status_invalid_txid_formats
  /usr/lib/python3.12/unittest/mock.py:2129: RuntimeWarning: coroutine 'Services.get_height' was never awaited
    if getattr(self, "_mock_methods", None) is not None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_invalid_responses
  /usr/lib/python3.12/unittest/mock.py:2537: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    return tuple.__new__(cls, (name, args, kwargs))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/storage/test_create_action.py::test_create_action_nosendchange_duplicate
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:1410: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    setattr(self, key, memo)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_edge_cases.py::TestCWIWalletManagerEdgeCases::test_snapshot_validation
  /home/sneakyfox/TOOLBOX/py-wallet-toolbox/tests/test_edge_cases.py:233: RuntimeWarning: coroutine 'CWIStyleWalletManager.load_snapshot' was never awaited
    manager.load_snapshot([])
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/integration/test_cwi_style_wallet_manager.py::TestCWIStyleWalletManagerSnapshot::test_saves_a_snapshot_and_can_load_it_into_a_fresh_manager_instance - AssertionError: assert {'authenticated': True} is True
 +  where {'authenticated': True} = is_authenticated()
 +    where is_authenticated = <bsv_wallet_toolbox.manager.cwi_style_wallet_manager.CWIStyleWalletManager object at 0x78468dc73ce0>.is_authenticated
FAILED tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_with_invalid_originator - ValueError: External applications are not allowed to use the admin originator
FAILED tests/manager/test_cwi_manager_coverage.py::TestCWIManagerBlockchainOperations::test_ensure_can_call_not_authenticated - ValueError: User is not authenticated
FAILED tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_trigger_onprotocolpermissionrequested_with_correct_params_when_a_non_admin_domain_requests_a_protocol_operation - assert None is not None
FAILED tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_resolve_the_original_caller_promise_when_requests_are_granted - AssertionError: assert <coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93b040> == {'publicKey': 'test-key'}
FAILED tests/permissions/test_wallet_permissions_manager_callbacks.py::TestWalletPermissionsManagerCallbacks::test_should_reject_the_original_caller_promise_when_permission_is_denied - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_skip_permission_prompt_if_seclevel_0_open_usage - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_protocol_usage_if_securitylevel_1_and_no_existing_token - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_deny_protocol_usage_if_user_denies_permission - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_enforce_privileged_token_if_differentiateprivilegedoperations_true - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_ignore_privileged_true_if_differentiateprivilegedoperations_false - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_if_protocol_name_is_admin_reserved_and_caller_is_not_admin - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_renewal_if_token_is_found_but_expired - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_immediately_if_using_an_admin_only_basket_as_non_admin - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_immediately_if_using_the_reserved_basket_default_as_non_admin - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_require_listing_permission_if_seekbasketlistingpermissions_true_and_no_token - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_removal_permission_if_seekbasketremovalpermissions_true - RuntimeError: Basket permission denied for remove
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_fail_if_label_starts_with_admin - AssertionError: Regex pattern did not match.
  Expected regex: 'admin-only'
  Actual message: "Labels starting with 'admin' are reserved"
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_prompt_for_label_usage_if_seekpermissionwhenapplyingactionlabels_true - ValueError: Unsupported event name: onLabelPermissionRequested
FAILED tests/permissions/test_wallet_permissions_manager_checks.py::TestWalletPermissionsManagerChecks::test_should_also_prompt_for_listing_actions_by_label_if_seekpermissionwhenlistingactionsbylabel_true - ValueError: Unsupported event name: onLabelPermissionRequested
FAILED tests/permissions/test_wallet_permissions_manager_encryption.py::TestWalletPermissionsManagerEncryptionIntegration::test_should_not_encrypt_metadata_if_encryptwalletmetadata_false_storing_and_retrieving_plaintext - AssertionError: assert 0 == 3
 +  where 0 = <AsyncMock name='mock.decrypt' id='132244399985568'>.call_count
 +    where <AsyncMock name='mock.decrypt' id='132244399985568'> = <MagicMock spec='WalletInterface' id='132244382664416'>.decrypt
FAILED tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_skip_protocol_permission_checks_for_signing_if_seekprotocolpermissionsforsigning_false - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_initialization.py::TestWalletPermissionsManagerInitialization::test_should_enforce_protocol_permission_checks_for_signing_if_seekprotocolpermissionsforsigning_true - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_abort_the_action_if_spending_permission_is_denied - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_ensure_basket_removal_permission_then_call_relinquishoutput - RuntimeError: Basket permission denied for remove
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_encrypt_calls_after_checking_protocol_permission - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_decrypt_calls_after_checking_protocol_permission - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_createhmac_calls - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_verifyhmac_calls - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_createsignature_calls_already_tested_the_netspent_logic_in_createaction_but_lets_double_check - AttributeError: 'list' object has no attribute 'get'
FAILED tests/permissions/test_wallet_permissions_manager_proxying.py::TestWalletPermissionsManagerProxying::test_should_proxy_verifysignature_calls - AttributeError: 'list' object has no attribute 'get'
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_network_failures - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_authentication_failures - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_rate_limiting - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_success_responses - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_double_spend_handling - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_insufficient_funds - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_transaction_rejected - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_connection_error - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_services_provider_fallback - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_array_empty_list - TypeError: object list can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_post_beef_array_partial_failures - TypeError: object list can't be used in 'await' expression
FAILED tests/services/test_arc_services.py::TestArcServices::test_arc_services_large_payload_handling - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_invalid_currencies - NameError: name 'InvalidParameterError' is not defined
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_network_failures - NameError: name 'update_exchangeratesapi' is not defined
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_success_responses - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_empty_currency_list - NameError: name 'update_exchangeratesapi' is not defined
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_single_currency - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_case_sensitivity - NameError: name 'InvalidParameterError' is not defined
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_malformed_response_handling - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_timeout_handling - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_rate_limiting_handling - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_exchange_rates.py::TestExchangeRates::test_update_exchange_rates_connection_error_handling - AttributeError: module 'bsv_wallet_toolbox.services.providers' has no attribute 'exchange_rates'
FAILED tests/services/test_get_chain_tracker.py::test_get_chain_tracker_basic_functionality - AssertionError: assert (False or False)
 +  where False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9613a0>, 'get_height')
 +  and   False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9613a0>, 'get_chain_tip_height')
FAILED tests/services/test_get_chain_tracker.py::test_get_chain_tracker_configuration_persistence - AssertionError: assert (False or False)
 +  where False = hasattr(<bsv_wallet_toolbox.services.providers.whatsonchain.WhatsOnChain object at 0x78468d9c6db0>, 'chain')
 +  and   False = hasattr(<bsv_wallet_toolbox.services.services.Services object at 0x78468d9c6660>, '_chain')
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_network_failure_500 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_network_timeout - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_rate_limiting_429 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_transaction_not_found_404 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_malformed_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_connection_error - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_provider_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_success_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_different_chains - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_large_response_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_unicode_txid_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_empty_path_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_merkle_path.py::TestGetMerklePath::test_get_merkle_path_multiple_providers_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_network_failure_500 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_network_timeout - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_rate_limiting_429 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_transaction_not_found_404 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_malformed_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_connection_error - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_provider_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_success_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_different_chains - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_unicode_txid_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_large_tx_data_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_empty_response_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_raw_tx.py::TestGetRawTx::test_get_raw_tx_multiple_providers_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_minimal_normal - AssertionError: assert ('confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []})
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_minimal_empty - AssertionError: assert None == []
 +  where None = <built-in method get of dict object at 0x78468b600fc0>('confirmed')
 +    where <built-in method get of dict object at 0x78468b600fc0> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}.get
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_invalid_script_formats - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_empty_script - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_different_chains - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_various_script_patterns - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_case_insensitive_script - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_unicode_script_handling - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_consecutive_calls - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_script_length_boundaries - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_special_characters - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_numeric_script - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_mixed_case_script - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_configuration_variations - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_with_results - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_empty_results - AssertionError: assert None == []
 +  where None = <built-in method get of dict object at 0x78468b639700>('confirmed')
 +    where <built-in method get of dict object at 0x78468b639700> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}.get
FAILED tests/services/test_get_script_history_min.py::test_get_script_history_result_structure - AssertionError: assert 'confirmed' in {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}, 'history': []}
FAILED tests/services/test_get_utxo_status_min.py::test_get_utxo_status_invalid_script_formats - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_get_utxo_status_min.py::test_get_utxo_status_special_characters - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_get_utxo_status_min.py::test_get_utxo_status_numeric_script - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinal::test_height_based_locktime_strict_less_than - TypeError: object int can't be used in 'await' expression
FAILED tests/services/test_local_services_hash_and_locktime.py::TestHashOutputScriptErrorHandling::test_hash_output_script_invalid_hex - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_transaction_no_inputs - TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_mixed_sequences - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_all_non_final_sequences - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_network_height_failure - ConnectionError: Network unreachable
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_large_sequence_numbers - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_zero_sequence_numbers - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_many_inputs - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_negative_locktime_values - TypeError: WhatsOnChain.get_headers() missing 2 required positional arguments: 'height' and 'count'
FAILED tests/services/test_local_services_hash_and_locktime.py::TestNLockTimeIsFinalErrorHandling::test_n_lock_time_is_final_transaction_with_locktime_field - AttributeError: 'str' object has no attribute 'outputs'
FAILED tests/services/test_post_beef.py::test_post_beef_invalid_beef_format_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_post_beef.py::test_post_beef_network_failure_500_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_network_timeout_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_rate_limiting_429_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_malformed_json_response - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_empty_response - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_service_unavailable_503_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_unauthorized_401_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_forbidden_403_error - assert True is False
FAILED tests/services/test_post_beef.py::test_post_beef_array_invalid_input_types - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_post_beef.py::test_post_beef_double_spend_detection - AssertionError: assert False is True
 +  where False = <built-in method get of dict object at 0x78468b542380>('accepted')
 +    where <built-in method get of dict object at 0x78468b542380> = {'accepted': False, 'txid': None, 'message': 'Invalid BEEF/tx hex'}.get
FAILED tests/services/test_post_beef.py::test_post_beef_unicode_in_response - AssertionError: assert '\u65e0\u6548\u7684\u4ea4\u6613\u6570\u636e' in 'mocked'
FAILED tests/services/test_post_beef.py::test_post_beef_provider_fallback_simulation - AssertionError: assert 'fallback' in 'mocked'
 +  where 'mocked' = <built-in method lower of str object at 0x78468e3361f0>()
 +    where <built-in method lower of str object at 0x78468e3361f0> = 'mocked'.lower
 +      where 'mocked' = <built-in method get of dict object at 0x78468b525e40>('message', '')
 +        where <built-in method get of dict object at 0x78468b525e40> = {'accepted': True, 'txid': '7e5b797b86abd31a654bf296900d6cb14d04ef0811568ff4675494af2d92166b', 'message': 'mocked'}.get
FAILED tests/services/test_post_beef.py::test_post_beef_connection_error_handling - assert True is False
FAILED tests/services/test_post_beef_array_min.py::test_post_beef_array_invalid_input_types - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_post_beef_min.py::test_post_beef_arc_invalid_beef_data - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_height_network_failure - AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244378973248'> is None or False)
 +  where False = isinstance(<AsyncMock name='mock.current_height()' id='132244378973248'>, int)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_height_timeout - AssertionError: assert (<AsyncMock name='mock.current_height()' id='132244380891856'> is None or False)
 +  where False = isinstance(<AsyncMock name='mock.current_height()' id='132244380891856'>, int)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_raw_tx_network_failures - TypeError: object NoneType can't be used in 'await' expression
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_merkle_path_provider_failures - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_transaction_status_provider_timeout - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_provider_failures - TypeError: object dict can't be used in 'await' expression
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_post_beef_array_partial_failures - TypeError: object list can't be used in 'await' expression
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_update_bsv_exchange_rate_provider_failures - AttributeError: 'Services' object has no attribute 'update_exchangeratesapi_services'
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_header_for_height_invalid_height - assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5140> is None or False)
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5140>, dict)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_header_for_height_chaintracker_failure - assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93bb40> is None or False)
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93bb40>, dict)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_find_header_for_height_edge_cases - AttributeError: 'coroutine' object has no attribute 'version'
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_is_valid_root_for_height_invalid_inputs - assert False
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e7940>, bool)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_tx_propagation_invalid_txid - AssertionError: assert False
 +  where False = isinstance(<AsyncMock name='mock.get_tx_propagation()' id='132244379821568'>, dict)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_get_tx_propagation_provider_failures - ConnectionError: Provider down
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_subscribe_reorgs_invalid_callback - assert (<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93a640> is None or False)
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468c93a640>, str)
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_services_initialization_invalid_options - KeyError: 'chain'
FAILED tests/services/test_services_methods.py::TestServicesErrorHandling::test_services_multiple_concurrent_requests - TypeError: An asyncio.Future, a coroutine or an awaitable is required
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_network_failure_500 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_network_timeout - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_rate_limiting_429 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_transaction_not_found_404 - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_malformed_response - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_connection_error - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_provider_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_confirmed_transaction - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_unconfirmed_transaction - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_mempool_transaction - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_different_chains - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_multiple_providers_fallback - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_recently_confirmed - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_well_confirmed - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status.py::test_get_transaction_status_unicode_txid_handling - TypeError: 'Mock' object cannot be interpreted as an integer
FAILED tests/services/test_transaction_status_min.py::test_get_transaction_status_minimal - AssertionError: assert 'error' in {'not_found', 'unknown'}
 +  where 'error' = <built-in method get of dict object at 0x78468b358040>('status')
 +    where <built-in method get of dict object at 0x78468b358040> = {'name': '<noservices>', 'status': 'error', 'error': {'message': 'No services available.', 'code': 'NO_SERVICES'}}.get
FAILED tests/services/test_transaction_status_min.py::test_get_transaction_status_invalid_txid_formats - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_transaction_status_min.py::test_get_transaction_status_various_response_patterns - AssertionError: assert 'error' in ['confirmed', 'not_found', 'unknown', 'pending', 'unconfirmed']
FAILED tests/services/test_transaction_status_min.py::test_get_transaction_status_special_characters - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_transaction_status_min.py::test_get_transaction_status_numeric_txid - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'TypeError'>)
FAILED tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_invalid_beef_format - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>)
FAILED tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_invalid_transaction_in_beef - assert True is False
FAILED tests/services/test_verify_beef.py::TestVerifyBeef::test_verify_beef_multiple_transactions_in_beef - assert 0 > 0
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_network_timeout - AttributeError: 'coroutine' object has no attribute 'get'
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_malformed_json_response - ValueError: Invalid JSON
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_invalid_txid - assert False
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68ef40>, dict)
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_network_failures - ValueError: Invalid JSON
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_network_failures - ValueError: Invalid JSON
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_provider_initialization_invalid_chain - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_raw_tx_connection_error - AttributeError: 'coroutine' object has no attribute 'get'
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_get_merkle_path_connection_error - assert False
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b6e5d40>, dict)
FAILED tests/services/test_whats_on_chain.py::TestWhatsOnChain::test_update_bsv_exchange_rate_connection_error - assert (False or <coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68d840> is None)
 +  where False = isinstance(<coroutine object AsyncMockMixin._execute_mock_call at 0x78468b68d840>, dict)
FAILED tests/test_edge_cases.py::TestCryptoUtilsEdgeCases::test_xor_bytes_empty_inputs - ZeroDivisionError: integer division or modulo by zero
FAILED tests/test_edge_cases.py::TestCWIWalletManagerEdgeCases::test_snapshot_validation - Failed: DID NOT RAISE <class 'RuntimeError'>
FAILED tests/wallet/test_abort_action.py::TestWalletAbortAction::test_invalid_params_missing_reference_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'reference': a non-empty base64 string
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_type_type_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 123, None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:20.879801', '2025-12-01 05:16:20.879801')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_certifier_type_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, 123, None, None, None, None, 0, '2025-12-01 05:16:20.970697', '2025-12-01 05:16:20.970697')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_invalid_hex_certifier_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, 'gggggggggggggggggggggggggggggggggggggggg', None, None, None, None, 0, '2025-12-01 05:16:21.004037', '2025-12-01 05:16:21.004037')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_acquisition_protocol_type_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.094448', '2025-12-01 05:16:21.094448')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_invalid_acquisition_protocol_value_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.127878', '2025-12-01 05:16:21.127878')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_none_fields_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.158745', '2025-12-01 05:16:21.158745')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_wrong_fields_type_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.190112', '2025-12-01 05:16:21.190112')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_privileged_none_reason_with_privileged_true_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.476511', '2025-12-01 05:16:21.476511')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletAcquireCertificate::test_invalid_params_privileged_empty_reason_with_privileged_true_raises_error - sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: certificates.serialNumber
[SQL: INSERT INTO certificates ("userId", type, "serialNumber", certifier, subject, verifier, "revocationOutpoint", signature, "isDeleted", created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('', 'dGVzdA==', None, '020000000000000000000000000000000000000000000000000000000000000000', None, None, None, None, 0, '2025-12-01 05:16:21.508209', '2025-12-01 05:16:21.508209')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
FAILED tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_empty_certificate_raises_error - TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
FAILED tests/wallet/test_certificates.py::TestWalletProveCertificate::test_invalid_params_empty_fields_to_reveal_raises_error - TypeError: StorageProvider.list_certificates() missing 1 required positional argument: 'args'
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_empty_serial_number_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_invalid_params_invalid_hex_certifier_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_nonexistent_certificate_returns_false - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_already_relinquished_certificate_returns_false - AssertionError: assert {'relinquished': True} == {'relinquished': False}
  
  Differing items:
  {'relinquished': True} != {'relinquished': False}
  
  Full diff:
    {
  -     'relinquished': False,
  ?                     ^^^^
  +     'relinquished': True,
  ?                     ^^^
    }
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_certificate_case_sensitive_certifier - AssertionError: assert {'relinquished': True} == {'relinquished': False}
  
  Differing items:
  {'relinquished': True} != {'relinquished': False}
  
  Full diff:
    {
  -     'relinquished': False,
  ?                     ^^^^
  +     'relinquished': True,
  ?                     ^^^
    }
FAILED tests/wallet/test_certificates.py::TestWalletRelinquishCertificate::test_relinquish_certificate_unicode_type_serial - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'serialNumber': a base64 string
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_empty_identity_key_raises_error - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByIdentityKey::test_invalid_params_invalid_hex_identity_key_raises_error - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_empty_attributes_raises_error - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_zero_limit_raises_error - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_invalid_params_negative_limit_raises_error - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_certificates.py::TestWalletDiscoverByAttributes::test_valid_params_with_limit - TypeError: query_overlay() missing 1 required positional argument: 'resolver'
FAILED tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_empty_args_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID and keyID': required if identityKey is false or undefined
FAILED tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_none_protocol_id_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
FAILED tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_empty_key_id_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'keyID': a non-empty string
FAILED tests/wallet/test_crypto_methods.py::TestWalletGetPublicKey::test_get_public_key_with_invalid_protocol_id_format - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID': a tuple/list of [security_level, protocol_name]
FAILED tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_missing_plaintext_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
FAILED tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_none_plaintext_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'plaintext': bytes-like or list[int] expected
FAILED tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_invalid_counterparty_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got 'invalid_key_format', error: non-hexadecimal number found in fromhex() arg at position 0)
FAILED tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_empty_counterparty_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'counterparty': 'self', 'anyone', or a valid hex-encoded public key (got '', error: The public key could not be parsed or is invalid.)
FAILED tests/wallet/test_crypto_methods.py::TestWalletEncrypt::test_encrypt_with_none_protocol_id_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
FAILED tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_empty_ciphertext_raises_error - AssertionError: invalid encrypted length
FAILED tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_invalid_ciphertext_format_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
FAILED tests/wallet/test_crypto_methods.py::TestWalletDecrypt::test_decrypt_with_missing_ciphertext_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'ciphertext': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_missing_data_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_none_data_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletCreateHmac::test_create_hmac_empty_key_id_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID': required
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_empty_hmac_raises_error - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_wrong_hmac_length_raises_error - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_missing_data_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifyHmac::test_verify_hmac_none_hmac_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'hmac': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_missing_data_raises_error - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>, <class 'KeyError'>)
FAILED tests/wallet/test_hmac_signature.py::TestWalletCreateSignature::test_create_signature_none_data_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'data': bytes-like or list[int] expected
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_wrong_public_key_returns_invalid - assert True is False
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_invalid_public_key_raises_error - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/wallet/test_hmac_signature.py::TestWalletVerifySignature::test_verify_signature_missing_signature_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'protocolID/keyID/signature': required
FAILED tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_tx_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'tx': non-empty bytes or list of integers
FAILED tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_outputs_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'outputs': a non-empty list
FAILED tests/wallet/test_internalize_action.py::TestWalletInternalizeAction::test_invalid_params_missing_description_key_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_whitespace_label_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_invalid_label_query_mode_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_include_labels_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_zero_limit_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_limit_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_wrong_offset_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_actions.py::TestWalletListActions::test_invalid_params_extremely_large_limit_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_invalid_hex_certifiers_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_certifier_too_long_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_empty_type_strings_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_invalid_base64_types_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_limit_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_wrong_offset_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_zero_limit_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_negative_offset_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_invalid_params_extremely_large_limit_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_certificates.py::TestWalletListCertificates::test_valid_params_unicode_type_strings - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'type': a base64 string
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_whitespace_basket_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_whitespace_tags_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_tag_too_long_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_include_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_invalid_include_value_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_params_wrong_boolean_types_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_empty_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_list_outputs.py::TestWalletListOutputs::test_invalid_originator_whitespace_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_wrong_height_type - RuntimeError: Services must be configured to use getHeaderForHeight
FAILED tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_zero_height - RuntimeError: Services must be configured to use getHeaderForHeight
FAILED tests/wallet/test_misc_methods.py::TestWalletGetHeader::test_get_header_invalid_params_very_large_height - RuntimeError: Services must be configured to use getHeaderForHeight
FAILED tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_empty_originator - Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
FAILED tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_whitespace_originator - Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
FAILED tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_none_originator - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_invalid_domain_format - Failed: DID NOT RAISE <class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>
FAILED tests/wallet/test_misc_methods.py::TestWalletGetVersion::test_get_version_with_args_dict_none - Failed: DID NOT RAISE <class 'TypeError'>
FAILED tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_none_key_deriver - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_wrong_key_deriver_type - Failed: DID NOT RAISE any of (<class 'ValueError'>, <class 'TypeError'>)
FAILED tests/wallet/test_misc_methods.py::TestWalletConstructor::test_wallet_constructor_with_invalid_private_key - ValueError: non-hexadecimal number found in fromhex() arg at position 0
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_empty_basket_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_whitespace_basket_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_none_basket_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_wrong_basket_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_basket_too_long_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_whitespace_output_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_wrong_output_type_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'TypeError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_missing_output_vout_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_invalid_txid_format_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_negative_vout_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_invalid_vout_format_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_invalid_params_missing_basket_key_raises_error - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'KeyError'>, <class 'TypeError'>)
FAILED tests/wallet/test_relinquish_output.py::TestWalletRelinquishOutput::test_relinquish_already_relinquished_output_returns_false - AssertionError: assert {'relinquished': False} == {'relinquished': True}
  
  Differing items:
  {'relinquished': False} != {'relinquished': True}
  
  Full diff:
    {
  -     'relinquished': True,
  ?                     ^^^
  +     'relinquished': False,
  ?                     ^^^^
    }
FAILED tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_extremely_large_satoshis - Failed: DID NOT RAISE any of (<class 'bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError'>, <class 'ValueError'>, <class 'OverflowError'>)
FAILED tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_valid_params_with_options - AssertionError: assert 'noSendChange' in {'txid': '24a6598512489c0102f8371cefc5cc4e4d1f1bf23ec97e919f5c114d91bb91a5', 'tx': [1, 0, 0, 0, 0, 1, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}
FAILED tests/wallet/test_wallet_create_action.py::TestWalletCreateAction::test_invalid_params_none_description_raises_error - bsv_wallet_toolbox.errors.wallet_errors.InvalidParameterError: Invalid parameter 'description': a string
= 283 failed, 2580 passed, 240 skipped, 6 xfailed, 22 warnings in 69.44s (0:01:09) =
